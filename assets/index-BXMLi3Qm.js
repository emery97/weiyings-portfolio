(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();function iv(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Ou={exports:{}},Zr={},ju={exports:{}},Rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Um;function rA(){if(Um)return Rt;Um=1;var i=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function g(D){return D===null||typeof D!="object"?null:(D=m&&D[m]||D["@@iterator"],typeof D=="function"?D:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,x={};function S(D,$,Z){this.props=D,this.context=$,this.refs=x,this.updater=Z||w}S.prototype.isReactComponent={},S.prototype.setState=function(D,$){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,$,"setState")},S.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function E(){}E.prototype=S.prototype;function _(D,$,Z){this.props=D,this.context=$,this.refs=x,this.updater=Z||w}var C=_.prototype=new E;C.constructor=_,b(C,S.prototype),C.isPureReactComponent=!0;var R=Array.isArray,k=Object.prototype.hasOwnProperty,N={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function L(D,$,Z){var st,mt={},wt=null,et=null;if($!=null)for(st in $.ref!==void 0&&(et=$.ref),$.key!==void 0&&(wt=""+$.key),$)k.call($,st)&&!O.hasOwnProperty(st)&&(mt[st]=$[st]);var _t=arguments.length-2;if(_t===1)mt.children=Z;else if(1<_t){for(var kt=Array(_t),Tt=0;Tt<_t;Tt++)kt[Tt]=arguments[Tt+2];mt.children=kt}if(D&&D.defaultProps)for(st in _t=D.defaultProps,_t)mt[st]===void 0&&(mt[st]=_t[st]);return{$$typeof:i,type:D,key:wt,ref:et,props:mt,_owner:N.current}}function H(D,$){return{$$typeof:i,type:D.type,key:$,ref:D.ref,props:D.props,_owner:D._owner}}function W(D){return typeof D=="object"&&D!==null&&D.$$typeof===i}function Y(D){var $={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Z){return $[Z]})}var ft=/\/+/g;function dt(D,$){return typeof D=="object"&&D!==null&&D.key!=null?Y(""+D.key):$.toString(36)}function nt(D,$,Z,st,mt){var wt=typeof D;(wt==="undefined"||wt==="boolean")&&(D=null);var et=!1;if(D===null)et=!0;else switch(wt){case"string":case"number":et=!0;break;case"object":switch(D.$$typeof){case i:case t:et=!0}}if(et)return et=D,mt=mt(et),D=st===""?"."+dt(et,0):st,R(mt)?(Z="",D!=null&&(Z=D.replace(ft,"$&/")+"/"),nt(mt,$,Z,"",function(Tt){return Tt})):mt!=null&&(W(mt)&&(mt=H(mt,Z+(!mt.key||et&&et.key===mt.key?"":(""+mt.key).replace(ft,"$&/")+"/")+D)),$.push(mt)),1;if(et=0,st=st===""?".":st+":",R(D))for(var _t=0;_t<D.length;_t++){wt=D[_t];var kt=st+dt(wt,_t);et+=nt(wt,$,Z,kt,mt)}else if(kt=g(D),typeof kt=="function")for(D=kt.call(D),_t=0;!(wt=D.next()).done;)wt=wt.value,kt=st+dt(wt,_t++),et+=nt(wt,$,Z,kt,mt);else if(wt==="object")throw $=String(D),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return et}function xt(D,$,Z){if(D==null)return D;var st=[],mt=0;return nt(D,st,"","",function(wt){return $.call(Z,wt,mt++)}),st}function G(D){if(D._status===-1){var $=D._result;$=$(),$.then(function(Z){(D._status===0||D._status===-1)&&(D._status=1,D._result=Z)},function(Z){(D._status===0||D._status===-1)&&(D._status=2,D._result=Z)}),D._status===-1&&(D._status=0,D._result=$)}if(D._status===1)return D._result.default;throw D._result}var U={current:null},B={transition:null},tt={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:B,ReactCurrentOwner:N};function Q(){throw Error("act(...) is not supported in production builds of React.")}return Rt.Children={map:xt,forEach:function(D,$,Z){xt(D,function(){$.apply(this,arguments)},Z)},count:function(D){var $=0;return xt(D,function(){$++}),$},toArray:function(D){return xt(D,function($){return $})||[]},only:function(D){if(!W(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Rt.Component=S,Rt.Fragment=e,Rt.Profiler=r,Rt.PureComponent=_,Rt.StrictMode=n,Rt.Suspense=h,Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tt,Rt.act=Q,Rt.cloneElement=function(D,$,Z){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var st=b({},D.props),mt=D.key,wt=D.ref,et=D._owner;if($!=null){if($.ref!==void 0&&(wt=$.ref,et=N.current),$.key!==void 0&&(mt=""+$.key),D.type&&D.type.defaultProps)var _t=D.type.defaultProps;for(kt in $)k.call($,kt)&&!O.hasOwnProperty(kt)&&(st[kt]=$[kt]===void 0&&_t!==void 0?_t[kt]:$[kt])}var kt=arguments.length-2;if(kt===1)st.children=Z;else if(1<kt){_t=Array(kt);for(var Tt=0;Tt<kt;Tt++)_t[Tt]=arguments[Tt+2];st.children=_t}return{$$typeof:i,type:D.type,key:mt,ref:wt,props:st,_owner:et}},Rt.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:a,_context:D},D.Consumer=D},Rt.createElement=L,Rt.createFactory=function(D){var $=L.bind(null,D);return $.type=D,$},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(D){return{$$typeof:c,render:D}},Rt.isValidElement=W,Rt.lazy=function(D){return{$$typeof:f,_payload:{_status:-1,_result:D},_init:G}},Rt.memo=function(D,$){return{$$typeof:d,type:D,compare:$===void 0?null:$}},Rt.startTransition=function(D){var $=B.transition;B.transition={};try{D()}finally{B.transition=$}},Rt.unstable_act=Q,Rt.useCallback=function(D,$){return U.current.useCallback(D,$)},Rt.useContext=function(D){return U.current.useContext(D)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(D){return U.current.useDeferredValue(D)},Rt.useEffect=function(D,$){return U.current.useEffect(D,$)},Rt.useId=function(){return U.current.useId()},Rt.useImperativeHandle=function(D,$,Z){return U.current.useImperativeHandle(D,$,Z)},Rt.useInsertionEffect=function(D,$){return U.current.useInsertionEffect(D,$)},Rt.useLayoutEffect=function(D,$){return U.current.useLayoutEffect(D,$)},Rt.useMemo=function(D,$){return U.current.useMemo(D,$)},Rt.useReducer=function(D,$,Z){return U.current.useReducer(D,$,Z)},Rt.useRef=function(D){return U.current.useRef(D)},Rt.useState=function(D){return U.current.useState(D)},Rt.useSyncExternalStore=function(D,$,Z){return U.current.useSyncExternalStore(D,$,Z)},Rt.useTransition=function(){return U.current.useTransition()},Rt.version="18.3.1",Rt}var Wm;function Jh(){return Wm||(Wm=1,ju.exports=rA()),ju.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gm;function oA(){if(Gm)return Zr;Gm=1;var i=Jh(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,d){var f,m={},g=null,w=null;d!==void 0&&(g=""+d),h.key!==void 0&&(g=""+h.key),h.ref!==void 0&&(w=h.ref);for(f in h)n.call(h,f)&&!a.hasOwnProperty(f)&&(m[f]=h[f]);if(c&&c.defaultProps)for(f in h=c.defaultProps,h)m[f]===void 0&&(m[f]=h[f]);return{$$typeof:t,type:c,key:g,ref:w,props:m,_owner:r.current}}return Zr.Fragment=e,Zr.jsx=l,Zr.jsxs=l,Zr}var Xm;function aA(){return Xm||(Xm=1,Ou.exports=oA()),Ou.exports}var F=aA(),il={},Bu={exports:{}},We={},Vu={exports:{}},zu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Km;function lA(){return Km||(Km=1,(function(i){function t(B,tt){var Q=B.length;B.push(tt);t:for(;0<Q;){var D=Q-1>>>1,$=B[D];if(0<r($,tt))B[D]=tt,B[Q]=$,Q=D;else break t}}function e(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var tt=B[0],Q=B.pop();if(Q!==tt){B[0]=Q;t:for(var D=0,$=B.length,Z=$>>>1;D<Z;){var st=2*(D+1)-1,mt=B[st],wt=st+1,et=B[wt];if(0>r(mt,Q))wt<$&&0>r(et,mt)?(B[D]=et,B[wt]=Q,D=wt):(B[D]=mt,B[st]=Q,D=st);else if(wt<$&&0>r(et,Q))B[D]=et,B[wt]=Q,D=wt;else break t}}return tt}function r(B,tt){var Q=B.sortIndex-tt.sortIndex;return Q!==0?Q:B.id-tt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();i.unstable_now=function(){return l.now()-c}}var h=[],d=[],f=1,m=null,g=3,w=!1,b=!1,x=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(B){for(var tt=e(d);tt!==null;){if(tt.callback===null)n(d);else if(tt.startTime<=B)n(d),tt.sortIndex=tt.expirationTime,t(h,tt);else break;tt=e(d)}}function R(B){if(x=!1,C(B),!b)if(e(h)!==null)b=!0,G(k);else{var tt=e(d);tt!==null&&U(R,tt.startTime-B)}}function k(B,tt){b=!1,x&&(x=!1,E(L),L=-1),w=!0;var Q=g;try{for(C(tt),m=e(h);m!==null&&(!(m.expirationTime>tt)||B&&!Y());){var D=m.callback;if(typeof D=="function"){m.callback=null,g=m.priorityLevel;var $=D(m.expirationTime<=tt);tt=i.unstable_now(),typeof $=="function"?m.callback=$:m===e(h)&&n(h),C(tt)}else n(h);m=e(h)}if(m!==null)var Z=!0;else{var st=e(d);st!==null&&U(R,st.startTime-tt),Z=!1}return Z}finally{m=null,g=Q,w=!1}}var N=!1,O=null,L=-1,H=5,W=-1;function Y(){return!(i.unstable_now()-W<H)}function ft(){if(O!==null){var B=i.unstable_now();W=B;var tt=!0;try{tt=O(!0,B)}finally{tt?dt():(N=!1,O=null)}}else N=!1}var dt;if(typeof _=="function")dt=function(){_(ft)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,xt=nt.port2;nt.port1.onmessage=ft,dt=function(){xt.postMessage(null)}}else dt=function(){S(ft,0)};function G(B){O=B,N||(N=!0,dt())}function U(B,tt){L=S(function(){B(i.unstable_now())},tt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(B){B.callback=null},i.unstable_continueExecution=function(){b||w||(b=!0,G(k))},i.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<B?Math.floor(1e3/B):5},i.unstable_getCurrentPriorityLevel=function(){return g},i.unstable_getFirstCallbackNode=function(){return e(h)},i.unstable_next=function(B){switch(g){case 1:case 2:case 3:var tt=3;break;default:tt=g}var Q=g;g=tt;try{return B()}finally{g=Q}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(B,tt){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Q=g;g=B;try{return tt()}finally{g=Q}},i.unstable_scheduleCallback=function(B,tt,Q){var D=i.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?D+Q:D):Q=D,B){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=Q+$,B={id:f++,callback:tt,priorityLevel:B,startTime:Q,expirationTime:$,sortIndex:-1},Q>D?(B.sortIndex=Q,t(d,B),e(h)===null&&B===e(d)&&(x?(E(L),L=-1):x=!0,U(R,Q-D))):(B.sortIndex=$,t(h,B),b||w||(b=!0,G(k))),B},i.unstable_shouldYield=Y,i.unstable_wrapCallback=function(B){var tt=g;return function(){var Q=g;g=tt;try{return B.apply(this,arguments)}finally{g=Q}}}})(zu)),zu}var qm;function cA(){return qm||(qm=1,Vu.exports=lA()),Vu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ym;function uA(){if(Ym)return We;Ym=1;var i=Jh(),t=cA();function e(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function a(s,o){l(s,o),l(s+"Capture",o)}function l(s,o){for(r[s]=o,s=0;s<o.length;s++)n.add(o[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function g(s){return h.call(m,s)?!0:h.call(f,s)?!1:d.test(s)?m[s]=!0:(f[s]=!0,!1)}function w(s,o,u,p){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function b(s,o,u,p){if(o===null||typeof o>"u"||w(s,o,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function x(s,o,u,p,y,v,A){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=u,this.propertyName=s,this.type=o,this.sanitizeURL=v,this.removeEmptyString=A}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){S[s]=new x(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];S[o]=new x(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){S[s]=new x(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){S[s]=new x(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){S[s]=new x(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){S[s]=new x(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){S[s]=new x(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){S[s]=new x(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){S[s]=new x(s,5,!1,s.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function _(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(E,_);S[o]=new x(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(E,_);S[o]=new x(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(E,_);S[o]=new x(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){S[s]=new x(s,1,!1,s.toLowerCase(),null,!1,!1)}),S.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){S[s]=new x(s,1,!1,s.toLowerCase(),null,!0,!0)});function C(s,o,u,p){var y=S.hasOwnProperty(o)?S[o]:null;(y!==null?y.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(b(o,u,y,p)&&(u=null),p||y===null?g(o)&&(u===null?s.removeAttribute(o):s.setAttribute(o,""+u)):y.mustUseProperty?s[y.propertyName]=u===null?y.type===3?!1:"":u:(o=y.attributeName,p=y.attributeNamespace,u===null?s.removeAttribute(o):(y=y.type,u=y===3||y===4&&u===!0?"":""+u,p?s.setAttributeNS(p,o,u):s.setAttribute(o,u))))}var R=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),N=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),Y=Symbol.for("react.context"),ft=Symbol.for("react.forward_ref"),dt=Symbol.for("react.suspense"),nt=Symbol.for("react.suspense_list"),xt=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),U=Symbol.for("react.offscreen"),B=Symbol.iterator;function tt(s){return s===null||typeof s!="object"?null:(s=B&&s[B]||s["@@iterator"],typeof s=="function"?s:null)}var Q=Object.assign,D;function $(s){if(D===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);D=o&&o[1]||""}return`
`+D+s}var Z=!1;function st(s,o){if(!s||Z)return"";Z=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(z){var p=z}Reflect.construct(s,[],o)}else{try{o.call()}catch(z){p=z}s.call(o.prototype)}else{try{throw Error()}catch(z){p=z}s()}}catch(z){if(z&&p&&typeof z.stack=="string"){for(var y=z.stack.split(`
`),v=p.stack.split(`
`),A=y.length-1,T=v.length-1;1<=A&&0<=T&&y[A]!==v[T];)T--;for(;1<=A&&0<=T;A--,T--)if(y[A]!==v[T]){if(A!==1||T!==1)do if(A--,T--,0>T||y[A]!==v[T]){var M=`
`+y[A].replace(" at new "," at ");return s.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",s.displayName)),M}while(1<=A&&0<=T);break}}}finally{Z=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?$(s):""}function mt(s){switch(s.tag){case 5:return $(s.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return s=st(s.type,!1),s;case 11:return s=st(s.type.render,!1),s;case 1:return s=st(s.type,!0),s;default:return""}}function wt(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case O:return"Fragment";case N:return"Portal";case H:return"Profiler";case L:return"StrictMode";case dt:return"Suspense";case nt:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Y:return(s.displayName||"Context")+".Consumer";case W:return(s._context.displayName||"Context")+".Provider";case ft:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case xt:return o=s.displayName||null,o!==null?o:wt(s.type)||"Memo";case G:o=s._payload,s=s._init;try{return wt(s(o))}catch{}}return null}function et(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wt(o);case 8:return o===L?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function _t(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function kt(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Tt(s){var o=kt(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),p=""+s[o];if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,v=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return y.call(this)},set:function(A){p=""+A,v.call(this,A)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(A){p=""+A},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function ge(s){s._valueTracker||(s._valueTracker=Tt(s))}function Se(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return s&&(p=kt(s)?s.checked?"true":"false":s.value),s=p,s!==u?(o.setValue(s),!0):!1}function Lt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function jt(s,o){var u=o.checked;return Q({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function Qt(s,o){var u=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;u=_t(o.value!=null?o.value:u),s._wrapperState={initialChecked:p,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function te(s,o){o=o.checked,o!=null&&C(s,"checked",o,!1)}function Pn(s,o){te(s,o);var u=_t(o.value),p=o.type;if(u!=null)p==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(p==="submit"||p==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?Bi(s,o.type,u):o.hasOwnProperty("defaultValue")&&Bi(s,o.type,_t(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function ui(s,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,u||o===s.value||(s.value=o),s.defaultValue=o}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function Bi(s,o,u){(o!=="number"||Lt(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var Vi=Array.isArray;function gn(s,o,u,p){if(s=s.options,o){o={};for(var y=0;y<u.length;y++)o["$"+u[y]]=!0;for(u=0;u<s.length;u++)y=o.hasOwnProperty("$"+s[u].value),s[u].selected!==y&&(s[u].selected=y),y&&p&&(s[u].defaultSelected=!0)}else{for(u=""+_t(u),o=null,y=0;y<s.length;y++){if(s[y].value===u){s[y].selected=!0,p&&(s[y].defaultSelected=!0);return}o!==null||s[y].disabled||(o=s[y])}o!==null&&(o.selected=!0)}}function mr(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(e(91));return Q({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Go(s,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(e(92));if(Vi(u)){if(1<u.length)throw Error(e(93));u=u[0]}o=u}o==null&&(o=""),u=o}s._wrapperState={initialValue:_t(u)}}function Xo(s,o){var u=_t(o.value),p=_t(o.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),o.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),p!=null&&(s.defaultValue=""+p)}function Ko(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function qo(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nn(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?qo(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var yn,vn=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,p,y){MSApp.execUnsafeLocalFunction(function(){return s(o,u,p,y)})}:s})(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(yn=yn||document.createElement("div"),yn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=yn.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function Gn(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var gr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cb=["Webkit","ms","Moz","O"];Object.keys(gr).forEach(function(s){cb.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),gr[o]=gr[s]})});function rf(s,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||gr.hasOwnProperty(s)&&gr[s]?(""+o).trim():o+"px"}function of(s,o){s=s.style;for(var u in o)if(o.hasOwnProperty(u)){var p=u.indexOf("--")===0,y=rf(u,o[u],p);u==="float"&&(u="cssFloat"),p?s.setProperty(u,y):s[u]=y}}var ub=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ql(s,o){if(o){if(ub[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(e(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(e(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(e(61))}if(o.style!=null&&typeof o.style!="object")throw Error(e(62))}}function Yl(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ql=null;function Jl(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Zl=null,ys=null,vs=null;function af(s){if(s=jr(s)){if(typeof Zl!="function")throw Error(e(280));var o=s.stateNode;o&&(o=va(o),Zl(s.stateNode,s.type,o))}}function lf(s){ys?vs?vs.push(s):vs=[s]:ys=s}function cf(){if(ys){var s=ys,o=vs;if(vs=ys=null,af(s),o)for(s=0;s<o.length;s++)af(o[s])}}function uf(s,o){return s(o)}function hf(){}var tc=!1;function df(s,o,u){if(tc)return s(o,u);tc=!0;try{return uf(s,o,u)}finally{tc=!1,(ys!==null||vs!==null)&&(hf(),cf())}}function yr(s,o){var u=s.stateNode;if(u===null)return null;var p=va(u);if(p===null)return null;u=p[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break t;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(e(231,o,typeof u));return u}var ec=!1;if(c)try{var vr={};Object.defineProperty(vr,"passive",{get:function(){ec=!0}}),window.addEventListener("test",vr,vr),window.removeEventListener("test",vr,vr)}catch{ec=!1}function hb(s,o,u,p,y,v,A,T,M){var z=Array.prototype.slice.call(arguments,3);try{o.apply(u,z)}catch(K){this.onError(K)}}var wr=!1,Yo=null,Qo=!1,nc=null,db={onError:function(s){wr=!0,Yo=s}};function fb(s,o,u,p,y,v,A,T,M){wr=!1,Yo=null,hb.apply(db,arguments)}function pb(s,o,u,p,y,v,A,T,M){if(fb.apply(this,arguments),wr){if(wr){var z=Yo;wr=!1,Yo=null}else throw Error(e(198));Qo||(Qo=!0,nc=z)}}function zi(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function ff(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function pf(s){if(zi(s)!==s)throw Error(e(188))}function mb(s){var o=s.alternate;if(!o){if(o=zi(s),o===null)throw Error(e(188));return o!==s?null:s}for(var u=s,p=o;;){var y=u.return;if(y===null)break;var v=y.alternate;if(v===null){if(p=y.return,p!==null){u=p;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===u)return pf(y),s;if(v===p)return pf(y),o;v=v.sibling}throw Error(e(188))}if(u.return!==p.return)u=y,p=v;else{for(var A=!1,T=y.child;T;){if(T===u){A=!0,u=y,p=v;break}if(T===p){A=!0,p=y,u=v;break}T=T.sibling}if(!A){for(T=v.child;T;){if(T===u){A=!0,u=v,p=y;break}if(T===p){A=!0,p=v,u=y;break}T=T.sibling}if(!A)throw Error(e(189))}}if(u.alternate!==p)throw Error(e(190))}if(u.tag!==3)throw Error(e(188));return u.stateNode.current===u?s:o}function mf(s){return s=mb(s),s!==null?gf(s):null}function gf(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=gf(s);if(o!==null)return o;s=s.sibling}return null}var yf=t.unstable_scheduleCallback,vf=t.unstable_cancelCallback,gb=t.unstable_shouldYield,yb=t.unstable_requestPaint,ee=t.unstable_now,vb=t.unstable_getCurrentPriorityLevel,ic=t.unstable_ImmediatePriority,wf=t.unstable_UserBlockingPriority,Jo=t.unstable_NormalPriority,wb=t.unstable_LowPriority,bf=t.unstable_IdlePriority,Zo=null,Rn=null;function bb(s){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(Zo,s,void 0,(s.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:Sb,xb=Math.log,Ab=Math.LN2;function Sb(s){return s>>>=0,s===0?32:31-(xb(s)/Ab|0)|0}var ta=64,ea=4194304;function br(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function na(s,o){var u=s.pendingLanes;if(u===0)return 0;var p=0,y=s.suspendedLanes,v=s.pingedLanes,A=u&268435455;if(A!==0){var T=A&~y;T!==0?p=br(T):(v&=A,v!==0&&(p=br(v)))}else A=u&~y,A!==0?p=br(A):v!==0&&(p=br(v));if(p===0)return 0;if(o!==0&&o!==p&&(o&y)===0&&(y=p&-p,v=o&-o,y>=v||y===16&&(v&4194240)!==0))return o;if((p&4)!==0&&(p|=u&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=p;0<o;)u=31-wn(o),y=1<<u,p|=s[u],o&=~y;return p}function Eb(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cb(s,o){for(var u=s.suspendedLanes,p=s.pingedLanes,y=s.expirationTimes,v=s.pendingLanes;0<v;){var A=31-wn(v),T=1<<A,M=y[A];M===-1?((T&u)===0||(T&p)!==0)&&(y[A]=Eb(T,o)):M<=o&&(s.expiredLanes|=T),v&=~T}}function sc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function xf(){var s=ta;return ta<<=1,(ta&4194240)===0&&(ta=64),s}function rc(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function xr(s,o,u){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-wn(o),s[o]=u}function _b(s,o){var u=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var p=s.eventTimes;for(s=s.expirationTimes;0<u;){var y=31-wn(u),v=1<<y;o[y]=0,p[y]=-1,s[y]=-1,u&=~v}}function oc(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var p=31-wn(u),y=1<<p;y&o|s[p]&o&&(s[p]|=o),u&=~y}}var Ft=0;function Af(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Sf,ac,Ef,Cf,_f,lc=!1,ia=[],hi=null,di=null,fi=null,Ar=new Map,Sr=new Map,pi=[],Tb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tf(s,o){switch(s){case"focusin":case"focusout":hi=null;break;case"dragenter":case"dragleave":di=null;break;case"mouseover":case"mouseout":fi=null;break;case"pointerover":case"pointerout":Ar.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sr.delete(o.pointerId)}}function Er(s,o,u,p,y,v){return s===null||s.nativeEvent!==v?(s={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:v,targetContainers:[y]},o!==null&&(o=jr(o),o!==null&&ac(o)),s):(s.eventSystemFlags|=p,o=s.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),s)}function kb(s,o,u,p,y){switch(o){case"focusin":return hi=Er(hi,s,o,u,p,y),!0;case"dragenter":return di=Er(di,s,o,u,p,y),!0;case"mouseover":return fi=Er(fi,s,o,u,p,y),!0;case"pointerover":var v=y.pointerId;return Ar.set(v,Er(Ar.get(v)||null,s,o,u,p,y)),!0;case"gotpointercapture":return v=y.pointerId,Sr.set(v,Er(Sr.get(v)||null,s,o,u,p,y)),!0}return!1}function kf(s){var o=Hi(s.target);if(o!==null){var u=zi(o);if(u!==null){if(o=u.tag,o===13){if(o=ff(u),o!==null){s.blockedOn=o,_f(s.priority,function(){Ef(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function sa(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=uc(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var p=new u.constructor(u.type,u);Ql=p,u.target.dispatchEvent(p),Ql=null}else return o=jr(u),o!==null&&ac(o),s.blockedOn=u,!1;o.shift()}return!0}function Pf(s,o,u){sa(s)&&u.delete(o)}function Pb(){lc=!1,hi!==null&&sa(hi)&&(hi=null),di!==null&&sa(di)&&(di=null),fi!==null&&sa(fi)&&(fi=null),Ar.forEach(Pf),Sr.forEach(Pf)}function Cr(s,o){s.blockedOn===o&&(s.blockedOn=null,lc||(lc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Pb)))}function _r(s){function o(y){return Cr(y,s)}if(0<ia.length){Cr(ia[0],s);for(var u=1;u<ia.length;u++){var p=ia[u];p.blockedOn===s&&(p.blockedOn=null)}}for(hi!==null&&Cr(hi,s),di!==null&&Cr(di,s),fi!==null&&Cr(fi,s),Ar.forEach(o),Sr.forEach(o),u=0;u<pi.length;u++)p=pi[u],p.blockedOn===s&&(p.blockedOn=null);for(;0<pi.length&&(u=pi[0],u.blockedOn===null);)kf(u),u.blockedOn===null&&pi.shift()}var ws=R.ReactCurrentBatchConfig,ra=!0;function Rb(s,o,u,p){var y=Ft,v=ws.transition;ws.transition=null;try{Ft=1,cc(s,o,u,p)}finally{Ft=y,ws.transition=v}}function Mb(s,o,u,p){var y=Ft,v=ws.transition;ws.transition=null;try{Ft=4,cc(s,o,u,p)}finally{Ft=y,ws.transition=v}}function cc(s,o,u,p){if(ra){var y=uc(s,o,u,p);if(y===null)Tc(s,o,p,oa,u),Tf(s,p);else if(kb(y,s,o,u,p))p.stopPropagation();else if(Tf(s,p),o&4&&-1<Tb.indexOf(s)){for(;y!==null;){var v=jr(y);if(v!==null&&Sf(v),v=uc(s,o,u,p),v===null&&Tc(s,o,p,oa,u),v===y)break;y=v}y!==null&&p.stopPropagation()}else Tc(s,o,p,null,u)}}var oa=null;function uc(s,o,u,p){if(oa=null,s=Jl(p),s=Hi(s),s!==null)if(o=zi(s),o===null)s=null;else if(u=o.tag,u===13){if(s=ff(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return oa=s,null}function Rf(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vb()){case ic:return 1;case wf:return 4;case Jo:case wb:return 16;case bf:return 536870912;default:return 16}default:return 16}}var mi=null,hc=null,aa=null;function Mf(){if(aa)return aa;var s,o=hc,u=o.length,p,y="value"in mi?mi.value:mi.textContent,v=y.length;for(s=0;s<u&&o[s]===y[s];s++);var A=u-s;for(p=1;p<=A&&o[u-p]===y[v-p];p++);return aa=y.slice(s,1<p?1-p:void 0)}function la(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function ca(){return!0}function Lf(){return!1}function qe(s){function o(u,p,y,v,A){this._reactName=u,this._targetInst=y,this.type=p,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var T in s)s.hasOwnProperty(T)&&(u=s[T],this[T]=u?u(v):v[T]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ca:Lf,this.isPropagationStopped=Lf,this}return Q(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ca)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ca)},persist:function(){},isPersistent:ca}),o}var bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dc=qe(bs),Tr=Q({},bs,{view:0,detail:0}),Lb=qe(Tr),fc,pc,kr,ua=Q({},Tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gc,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==kr&&(kr&&s.type==="mousemove"?(fc=s.screenX-kr.screenX,pc=s.screenY-kr.screenY):pc=fc=0,kr=s),fc)},movementY:function(s){return"movementY"in s?s.movementY:pc}}),If=qe(ua),Ib=Q({},ua,{dataTransfer:0}),Db=qe(Ib),Nb=Q({},Tr,{relatedTarget:0}),mc=qe(Nb),Fb=Q({},bs,{animationName:0,elapsedTime:0,pseudoElement:0}),Ob=qe(Fb),jb=Q({},bs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Bb=qe(jb),Vb=Q({},bs,{data:0}),Df=qe(Vb),zb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$b={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ub(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=$b[s])?!!o[s]:!1}function gc(){return Ub}var Wb=Q({},Tr,{key:function(s){if(s.key){var o=zb[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=la(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Hb[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gc,charCode:function(s){return s.type==="keypress"?la(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?la(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Gb=qe(Wb),Xb=Q({},ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nf=qe(Xb),Kb=Q({},Tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gc}),qb=qe(Kb),Yb=Q({},bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qb=qe(Yb),Jb=Q({},ua,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Zb=qe(Jb),tx=[9,13,27,32],yc=c&&"CompositionEvent"in window,Pr=null;c&&"documentMode"in document&&(Pr=document.documentMode);var ex=c&&"TextEvent"in window&&!Pr,Ff=c&&(!yc||Pr&&8<Pr&&11>=Pr),Of=" ",jf=!1;function Bf(s,o){switch(s){case"keyup":return tx.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vf(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var xs=!1;function nx(s,o){switch(s){case"compositionend":return Vf(o);case"keypress":return o.which!==32?null:(jf=!0,Of);case"textInput":return s=o.data,s===Of&&jf?null:s;default:return null}}function ix(s,o){if(xs)return s==="compositionend"||!yc&&Bf(s,o)?(s=Mf(),aa=hc=mi=null,xs=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ff&&o.locale!=="ko"?null:o.data;default:return null}}var sx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zf(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!sx[s.type]:o==="textarea"}function Hf(s,o,u,p){lf(p),o=ma(o,"onChange"),0<o.length&&(u=new dc("onChange","change",null,u,p),s.push({event:u,listeners:o}))}var Rr=null,Mr=null;function rx(s){op(s,0)}function ha(s){var o=_s(s);if(Se(o))return s}function ox(s,o){if(s==="change")return o}var $f=!1;if(c){var vc;if(c){var wc="oninput"in document;if(!wc){var Uf=document.createElement("div");Uf.setAttribute("oninput","return;"),wc=typeof Uf.oninput=="function"}vc=wc}else vc=!1;$f=vc&&(!document.documentMode||9<document.documentMode)}function Wf(){Rr&&(Rr.detachEvent("onpropertychange",Gf),Mr=Rr=null)}function Gf(s){if(s.propertyName==="value"&&ha(Mr)){var o=[];Hf(o,Mr,s,Jl(s)),df(rx,o)}}function ax(s,o,u){s==="focusin"?(Wf(),Rr=o,Mr=u,Rr.attachEvent("onpropertychange",Gf)):s==="focusout"&&Wf()}function lx(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ha(Mr)}function cx(s,o){if(s==="click")return ha(o)}function ux(s,o){if(s==="input"||s==="change")return ha(o)}function hx(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var bn=typeof Object.is=="function"?Object.is:hx;function Lr(s,o){if(bn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var y=u[p];if(!h.call(o,y)||!bn(s[y],o[y]))return!1}return!0}function Xf(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Kf(s,o){var u=Xf(s);s=0;for(var p;u;){if(u.nodeType===3){if(p=s+u.textContent.length,s<=o&&p>=o)return{node:u,offset:o-s};s=p}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=Xf(u)}}function qf(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?qf(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Yf(){for(var s=window,o=Lt();o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=Lt(s.document)}return o}function bc(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function dx(s){var o=Yf(),u=s.focusedElem,p=s.selectionRange;if(o!==u&&u&&u.ownerDocument&&qf(u.ownerDocument.documentElement,u)){if(p!==null&&bc(u)){if(o=p.start,s=p.end,s===void 0&&(s=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(s,u.value.length);else if(s=(o=u.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var y=u.textContent.length,v=Math.min(p.start,y);p=p.end===void 0?v:Math.min(p.end,y),!s.extend&&v>p&&(y=p,p=v,v=y),y=Kf(u,v);var A=Kf(u,p);y&&A&&(s.rangeCount!==1||s.anchorNode!==y.node||s.anchorOffset!==y.offset||s.focusNode!==A.node||s.focusOffset!==A.offset)&&(o=o.createRange(),o.setStart(y.node,y.offset),s.removeAllRanges(),v>p?(s.addRange(o),s.extend(A.node,A.offset)):(o.setEnd(A.node,A.offset),s.addRange(o)))}}for(o=[],s=u;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)s=o[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var fx=c&&"documentMode"in document&&11>=document.documentMode,As=null,xc=null,Ir=null,Ac=!1;function Qf(s,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ac||As==null||As!==Lt(p)||(p=As,"selectionStart"in p&&bc(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Ir&&Lr(Ir,p)||(Ir=p,p=ma(xc,"onSelect"),0<p.length&&(o=new dc("onSelect","select",null,o,u),s.push({event:o,listeners:p}),o.target=As)))}function da(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var Ss={animationend:da("Animation","AnimationEnd"),animationiteration:da("Animation","AnimationIteration"),animationstart:da("Animation","AnimationStart"),transitionend:da("Transition","TransitionEnd")},Sc={},Jf={};c&&(Jf=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function fa(s){if(Sc[s])return Sc[s];if(!Ss[s])return s;var o=Ss[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in Jf)return Sc[s]=o[u];return s}var Zf=fa("animationend"),tp=fa("animationiteration"),ep=fa("animationstart"),np=fa("transitionend"),ip=new Map,sp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gi(s,o){ip.set(s,o),a(o,[s])}for(var Ec=0;Ec<sp.length;Ec++){var Cc=sp[Ec],px=Cc.toLowerCase(),mx=Cc[0].toUpperCase()+Cc.slice(1);gi(px,"on"+mx)}gi(Zf,"onAnimationEnd"),gi(tp,"onAnimationIteration"),gi(ep,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(np,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function rp(s,o,u){var p=s.type||"unknown-event";s.currentTarget=u,pb(p,o,void 0,s),s.currentTarget=null}function op(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var p=s[u],y=p.event;p=p.listeners;t:{var v=void 0;if(o)for(var A=p.length-1;0<=A;A--){var T=p[A],M=T.instance,z=T.currentTarget;if(T=T.listener,M!==v&&y.isPropagationStopped())break t;rp(y,T,z),v=M}else for(A=0;A<p.length;A++){if(T=p[A],M=T.instance,z=T.currentTarget,T=T.listener,M!==v&&y.isPropagationStopped())break t;rp(y,T,z),v=M}}}if(Qo)throw s=nc,Qo=!1,nc=null,s}function Ht(s,o){var u=o[Ic];u===void 0&&(u=o[Ic]=new Set);var p=s+"__bubble";u.has(p)||(ap(o,s,2,!1),u.add(p))}function _c(s,o,u){var p=0;o&&(p|=4),ap(u,s,p,o)}var pa="_reactListening"+Math.random().toString(36).slice(2);function Nr(s){if(!s[pa]){s[pa]=!0,n.forEach(function(u){u!=="selectionchange"&&(gx.has(u)||_c(u,!1,s),_c(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[pa]||(o[pa]=!0,_c("selectionchange",!1,o))}}function ap(s,o,u,p){switch(Rf(o)){case 1:var y=Rb;break;case 4:y=Mb;break;default:y=cc}u=y.bind(null,o,u,s),y=void 0,!ec||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),p?y!==void 0?s.addEventListener(o,u,{capture:!0,passive:y}):s.addEventListener(o,u,!0):y!==void 0?s.addEventListener(o,u,{passive:y}):s.addEventListener(o,u,!1)}function Tc(s,o,u,p,y){var v=p;if((o&1)===0&&(o&2)===0&&p!==null)t:for(;;){if(p===null)return;var A=p.tag;if(A===3||A===4){var T=p.stateNode.containerInfo;if(T===y||T.nodeType===8&&T.parentNode===y)break;if(A===4)for(A=p.return;A!==null;){var M=A.tag;if((M===3||M===4)&&(M=A.stateNode.containerInfo,M===y||M.nodeType===8&&M.parentNode===y))return;A=A.return}for(;T!==null;){if(A=Hi(T),A===null)return;if(M=A.tag,M===5||M===6){p=v=A;continue t}T=T.parentNode}}p=p.return}df(function(){var z=v,K=Jl(u),q=[];t:{var X=ip.get(s);if(X!==void 0){var it=dc,at=s;switch(s){case"keypress":if(la(u)===0)break t;case"keydown":case"keyup":it=Gb;break;case"focusin":at="focus",it=mc;break;case"focusout":at="blur",it=mc;break;case"beforeblur":case"afterblur":it=mc;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=If;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=Db;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=qb;break;case Zf:case tp:case ep:it=Ob;break;case np:it=Qb;break;case"scroll":it=Lb;break;case"wheel":it=Zb;break;case"copy":case"cut":case"paste":it=Bb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=Nf}var ut=(o&4)!==0,ne=!ut&&s==="scroll",j=ut?X!==null?X+"Capture":null:X;ut=[];for(var I=z,V;I!==null;){V=I;var J=V.stateNode;if(V.tag===5&&J!==null&&(V=J,j!==null&&(J=yr(I,j),J!=null&&ut.push(Fr(I,J,V)))),ne)break;I=I.return}0<ut.length&&(X=new it(X,at,null,u,K),q.push({event:X,listeners:ut}))}}if((o&7)===0){t:{if(X=s==="mouseover"||s==="pointerover",it=s==="mouseout"||s==="pointerout",X&&u!==Ql&&(at=u.relatedTarget||u.fromElement)&&(Hi(at)||at[Xn]))break t;if((it||X)&&(X=K.window===K?K:(X=K.ownerDocument)?X.defaultView||X.parentWindow:window,it?(at=u.relatedTarget||u.toElement,it=z,at=at?Hi(at):null,at!==null&&(ne=zi(at),at!==ne||at.tag!==5&&at.tag!==6)&&(at=null)):(it=null,at=z),it!==at)){if(ut=If,J="onMouseLeave",j="onMouseEnter",I="mouse",(s==="pointerout"||s==="pointerover")&&(ut=Nf,J="onPointerLeave",j="onPointerEnter",I="pointer"),ne=it==null?X:_s(it),V=at==null?X:_s(at),X=new ut(J,I+"leave",it,u,K),X.target=ne,X.relatedTarget=V,J=null,Hi(K)===z&&(ut=new ut(j,I+"enter",at,u,K),ut.target=V,ut.relatedTarget=ne,J=ut),ne=J,it&&at)e:{for(ut=it,j=at,I=0,V=ut;V;V=Es(V))I++;for(V=0,J=j;J;J=Es(J))V++;for(;0<I-V;)ut=Es(ut),I--;for(;0<V-I;)j=Es(j),V--;for(;I--;){if(ut===j||j!==null&&ut===j.alternate)break e;ut=Es(ut),j=Es(j)}ut=null}else ut=null;it!==null&&lp(q,X,it,ut,!1),at!==null&&ne!==null&&lp(q,ne,at,ut,!0)}}t:{if(X=z?_s(z):window,it=X.nodeName&&X.nodeName.toLowerCase(),it==="select"||it==="input"&&X.type==="file")var ht=ox;else if(zf(X))if($f)ht=ux;else{ht=lx;var gt=ax}else(it=X.nodeName)&&it.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(ht=cx);if(ht&&(ht=ht(s,z))){Hf(q,ht,u,K);break t}gt&&gt(s,X,z),s==="focusout"&&(gt=X._wrapperState)&&gt.controlled&&X.type==="number"&&Bi(X,"number",X.value)}switch(gt=z?_s(z):window,s){case"focusin":(zf(gt)||gt.contentEditable==="true")&&(As=gt,xc=z,Ir=null);break;case"focusout":Ir=xc=As=null;break;case"mousedown":Ac=!0;break;case"contextmenu":case"mouseup":case"dragend":Ac=!1,Qf(q,u,K);break;case"selectionchange":if(fx)break;case"keydown":case"keyup":Qf(q,u,K)}var yt;if(yc)t:{switch(s){case"compositionstart":var St="onCompositionStart";break t;case"compositionend":St="onCompositionEnd";break t;case"compositionupdate":St="onCompositionUpdate";break t}St=void 0}else xs?Bf(s,u)&&(St="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(St="onCompositionStart");St&&(Ff&&u.locale!=="ko"&&(xs||St!=="onCompositionStart"?St==="onCompositionEnd"&&xs&&(yt=Mf()):(mi=K,hc="value"in mi?mi.value:mi.textContent,xs=!0)),gt=ma(z,St),0<gt.length&&(St=new Df(St,s,null,u,K),q.push({event:St,listeners:gt}),yt?St.data=yt:(yt=Vf(u),yt!==null&&(St.data=yt)))),(yt=ex?nx(s,u):ix(s,u))&&(z=ma(z,"onBeforeInput"),0<z.length&&(K=new Df("onBeforeInput","beforeinput",null,u,K),q.push({event:K,listeners:z}),K.data=yt))}op(q,o)})}function Fr(s,o,u){return{instance:s,listener:o,currentTarget:u}}function ma(s,o){for(var u=o+"Capture",p=[];s!==null;){var y=s,v=y.stateNode;y.tag===5&&v!==null&&(y=v,v=yr(s,u),v!=null&&p.unshift(Fr(s,v,y)),v=yr(s,o),v!=null&&p.push(Fr(s,v,y))),s=s.return}return p}function Es(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function lp(s,o,u,p,y){for(var v=o._reactName,A=[];u!==null&&u!==p;){var T=u,M=T.alternate,z=T.stateNode;if(M!==null&&M===p)break;T.tag===5&&z!==null&&(T=z,y?(M=yr(u,v),M!=null&&A.unshift(Fr(u,M,T))):y||(M=yr(u,v),M!=null&&A.push(Fr(u,M,T)))),u=u.return}A.length!==0&&s.push({event:o,listeners:A})}var yx=/\r\n?/g,vx=/\u0000|\uFFFD/g;function cp(s){return(typeof s=="string"?s:""+s).replace(yx,`
`).replace(vx,"")}function ga(s,o,u){if(o=cp(o),cp(s)!==o&&u)throw Error(e(425))}function ya(){}var kc=null,Pc=null;function Rc(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Mc=typeof setTimeout=="function"?setTimeout:void 0,wx=typeof clearTimeout=="function"?clearTimeout:void 0,up=typeof Promise=="function"?Promise:void 0,bx=typeof queueMicrotask=="function"?queueMicrotask:typeof up<"u"?function(s){return up.resolve(null).then(s).catch(xx)}:Mc;function xx(s){setTimeout(function(){throw s})}function Lc(s,o){var u=o,p=0;do{var y=u.nextSibling;if(s.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"){if(p===0){s.removeChild(y),_r(o);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=y}while(u);_r(o)}function yi(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function hp(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return s;o--}else u==="/$"&&o++}s=s.previousSibling}return null}var Cs=Math.random().toString(36).slice(2),Mn="__reactFiber$"+Cs,Or="__reactProps$"+Cs,Xn="__reactContainer$"+Cs,Ic="__reactEvents$"+Cs,Ax="__reactListeners$"+Cs,Sx="__reactHandles$"+Cs;function Hi(s){var o=s[Mn];if(o)return o;for(var u=s.parentNode;u;){if(o=u[Xn]||u[Mn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=hp(s);s!==null;){if(u=s[Mn])return u;s=hp(s)}return o}s=u,u=s.parentNode}return null}function jr(s){return s=s[Mn]||s[Xn],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function _s(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(e(33))}function va(s){return s[Or]||null}var Dc=[],Ts=-1;function vi(s){return{current:s}}function $t(s){0>Ts||(s.current=Dc[Ts],Dc[Ts]=null,Ts--)}function zt(s,o){Ts++,Dc[Ts]=s.current,s.current=o}var wi={},ke=vi(wi),Ve=vi(!1),$i=wi;function ks(s,o){var u=s.type.contextTypes;if(!u)return wi;var p=s.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var y={},v;for(v in u)y[v]=o[v];return p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=y),y}function ze(s){return s=s.childContextTypes,s!=null}function wa(){$t(Ve),$t(ke)}function dp(s,o,u){if(ke.current!==wi)throw Error(e(168));zt(ke,o),zt(Ve,u)}function fp(s,o,u){var p=s.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var y in p)if(!(y in o))throw Error(e(108,et(s)||"Unknown",y));return Q({},u,p)}function ba(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||wi,$i=ke.current,zt(ke,s),zt(Ve,Ve.current),!0}function pp(s,o,u){var p=s.stateNode;if(!p)throw Error(e(169));u?(s=fp(s,o,$i),p.__reactInternalMemoizedMergedChildContext=s,$t(Ve),$t(ke),zt(ke,s)):$t(Ve),zt(Ve,u)}var Kn=null,xa=!1,Nc=!1;function mp(s){Kn===null?Kn=[s]:Kn.push(s)}function Ex(s){xa=!0,mp(s)}function bi(){if(!Nc&&Kn!==null){Nc=!0;var s=0,o=Ft;try{var u=Kn;for(Ft=1;s<u.length;s++){var p=u[s];do p=p(!0);while(p!==null)}Kn=null,xa=!1}catch(y){throw Kn!==null&&(Kn=Kn.slice(s+1)),yf(ic,bi),y}finally{Ft=o,Nc=!1}}return null}var Ps=[],Rs=0,Aa=null,Sa=0,sn=[],rn=0,Ui=null,qn=1,Yn="";function Wi(s,o){Ps[Rs++]=Sa,Ps[Rs++]=Aa,Aa=s,Sa=o}function gp(s,o,u){sn[rn++]=qn,sn[rn++]=Yn,sn[rn++]=Ui,Ui=s;var p=qn;s=Yn;var y=32-wn(p)-1;p&=~(1<<y),u+=1;var v=32-wn(o)+y;if(30<v){var A=y-y%5;v=(p&(1<<A)-1).toString(32),p>>=A,y-=A,qn=1<<32-wn(o)+y|u<<y|p,Yn=v+s}else qn=1<<v|u<<y|p,Yn=s}function Fc(s){s.return!==null&&(Wi(s,1),gp(s,1,0))}function Oc(s){for(;s===Aa;)Aa=Ps[--Rs],Ps[Rs]=null,Sa=Ps[--Rs],Ps[Rs]=null;for(;s===Ui;)Ui=sn[--rn],sn[rn]=null,Yn=sn[--rn],sn[rn]=null,qn=sn[--rn],sn[rn]=null}var Ye=null,Qe=null,Ut=!1,xn=null;function yp(s,o){var u=cn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=s,o=s.deletions,o===null?(s.deletions=[u],s.flags|=16):o.push(u)}function vp(s,o){switch(s.tag){case 5:var u=s.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,Ye=s,Qe=yi(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,Ye=s,Qe=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=Ui!==null?{id:qn,overflow:Yn}:null,s.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=cn(18,null,null,0),u.stateNode=o,u.return=s,s.child=u,Ye=s,Qe=null,!0):!1;default:return!1}}function jc(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Bc(s){if(Ut){var o=Qe;if(o){var u=o;if(!vp(s,o)){if(jc(s))throw Error(e(418));o=yi(u.nextSibling);var p=Ye;o&&vp(s,o)?yp(p,u):(s.flags=s.flags&-4097|2,Ut=!1,Ye=s)}}else{if(jc(s))throw Error(e(418));s.flags=s.flags&-4097|2,Ut=!1,Ye=s}}}function wp(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Ye=s}function Ea(s){if(s!==Ye)return!1;if(!Ut)return wp(s),Ut=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!Rc(s.type,s.memoizedProps)),o&&(o=Qe)){if(jc(s))throw bp(),Error(e(418));for(;o;)yp(s,o),o=yi(o.nextSibling)}if(wp(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(e(317));t:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(o===0){Qe=yi(s.nextSibling);break t}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}s=s.nextSibling}Qe=null}}else Qe=Ye?yi(s.stateNode.nextSibling):null;return!0}function bp(){for(var s=Qe;s;)s=yi(s.nextSibling)}function Ms(){Qe=Ye=null,Ut=!1}function Vc(s){xn===null?xn=[s]:xn.push(s)}var Cx=R.ReactCurrentBatchConfig;function Br(s,o,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(e(309));var p=u.stateNode}if(!p)throw Error(e(147,s));var y=p,v=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===v?o.ref:(o=function(A){var T=y.refs;A===null?delete T[v]:T[v]=A},o._stringRef=v,o)}if(typeof s!="string")throw Error(e(284));if(!u._owner)throw Error(e(290,s))}return s}function Ca(s,o){throw s=Object.prototype.toString.call(o),Error(e(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function xp(s){var o=s._init;return o(s._payload)}function Ap(s){function o(j,I){if(s){var V=j.deletions;V===null?(j.deletions=[I],j.flags|=16):V.push(I)}}function u(j,I){if(!s)return null;for(;I!==null;)o(j,I),I=I.sibling;return null}function p(j,I){for(j=new Map;I!==null;)I.key!==null?j.set(I.key,I):j.set(I.index,I),I=I.sibling;return j}function y(j,I){return j=ki(j,I),j.index=0,j.sibling=null,j}function v(j,I,V){return j.index=V,s?(V=j.alternate,V!==null?(V=V.index,V<I?(j.flags|=2,I):V):(j.flags|=2,I)):(j.flags|=1048576,I)}function A(j){return s&&j.alternate===null&&(j.flags|=2),j}function T(j,I,V,J){return I===null||I.tag!==6?(I=Mu(V,j.mode,J),I.return=j,I):(I=y(I,V),I.return=j,I)}function M(j,I,V,J){var ht=V.type;return ht===O?K(j,I,V.props.children,J,V.key):I!==null&&(I.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===G&&xp(ht)===I.type)?(J=y(I,V.props),J.ref=Br(j,I,V),J.return=j,J):(J=qa(V.type,V.key,V.props,null,j.mode,J),J.ref=Br(j,I,V),J.return=j,J)}function z(j,I,V,J){return I===null||I.tag!==4||I.stateNode.containerInfo!==V.containerInfo||I.stateNode.implementation!==V.implementation?(I=Lu(V,j.mode,J),I.return=j,I):(I=y(I,V.children||[]),I.return=j,I)}function K(j,I,V,J,ht){return I===null||I.tag!==7?(I=Zi(V,j.mode,J,ht),I.return=j,I):(I=y(I,V),I.return=j,I)}function q(j,I,V){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Mu(""+I,j.mode,V),I.return=j,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case k:return V=qa(I.type,I.key,I.props,null,j.mode,V),V.ref=Br(j,null,I),V.return=j,V;case N:return I=Lu(I,j.mode,V),I.return=j,I;case G:var J=I._init;return q(j,J(I._payload),V)}if(Vi(I)||tt(I))return I=Zi(I,j.mode,V,null),I.return=j,I;Ca(j,I)}return null}function X(j,I,V,J){var ht=I!==null?I.key:null;if(typeof V=="string"&&V!==""||typeof V=="number")return ht!==null?null:T(j,I,""+V,J);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case k:return V.key===ht?M(j,I,V,J):null;case N:return V.key===ht?z(j,I,V,J):null;case G:return ht=V._init,X(j,I,ht(V._payload),J)}if(Vi(V)||tt(V))return ht!==null?null:K(j,I,V,J,null);Ca(j,V)}return null}function it(j,I,V,J,ht){if(typeof J=="string"&&J!==""||typeof J=="number")return j=j.get(V)||null,T(I,j,""+J,ht);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case k:return j=j.get(J.key===null?V:J.key)||null,M(I,j,J,ht);case N:return j=j.get(J.key===null?V:J.key)||null,z(I,j,J,ht);case G:var gt=J._init;return it(j,I,V,gt(J._payload),ht)}if(Vi(J)||tt(J))return j=j.get(V)||null,K(I,j,J,ht,null);Ca(I,J)}return null}function at(j,I,V,J){for(var ht=null,gt=null,yt=I,St=I=0,we=null;yt!==null&&St<V.length;St++){yt.index>St?(we=yt,yt=null):we=yt.sibling;var Nt=X(j,yt,V[St],J);if(Nt===null){yt===null&&(yt=we);break}s&&yt&&Nt.alternate===null&&o(j,yt),I=v(Nt,I,St),gt===null?ht=Nt:gt.sibling=Nt,gt=Nt,yt=we}if(St===V.length)return u(j,yt),Ut&&Wi(j,St),ht;if(yt===null){for(;St<V.length;St++)yt=q(j,V[St],J),yt!==null&&(I=v(yt,I,St),gt===null?ht=yt:gt.sibling=yt,gt=yt);return Ut&&Wi(j,St),ht}for(yt=p(j,yt);St<V.length;St++)we=it(yt,j,St,V[St],J),we!==null&&(s&&we.alternate!==null&&yt.delete(we.key===null?St:we.key),I=v(we,I,St),gt===null?ht=we:gt.sibling=we,gt=we);return s&&yt.forEach(function(Pi){return o(j,Pi)}),Ut&&Wi(j,St),ht}function ut(j,I,V,J){var ht=tt(V);if(typeof ht!="function")throw Error(e(150));if(V=ht.call(V),V==null)throw Error(e(151));for(var gt=ht=null,yt=I,St=I=0,we=null,Nt=V.next();yt!==null&&!Nt.done;St++,Nt=V.next()){yt.index>St?(we=yt,yt=null):we=yt.sibling;var Pi=X(j,yt,Nt.value,J);if(Pi===null){yt===null&&(yt=we);break}s&&yt&&Pi.alternate===null&&o(j,yt),I=v(Pi,I,St),gt===null?ht=Pi:gt.sibling=Pi,gt=Pi,yt=we}if(Nt.done)return u(j,yt),Ut&&Wi(j,St),ht;if(yt===null){for(;!Nt.done;St++,Nt=V.next())Nt=q(j,Nt.value,J),Nt!==null&&(I=v(Nt,I,St),gt===null?ht=Nt:gt.sibling=Nt,gt=Nt);return Ut&&Wi(j,St),ht}for(yt=p(j,yt);!Nt.done;St++,Nt=V.next())Nt=it(yt,j,St,Nt.value,J),Nt!==null&&(s&&Nt.alternate!==null&&yt.delete(Nt.key===null?St:Nt.key),I=v(Nt,I,St),gt===null?ht=Nt:gt.sibling=Nt,gt=Nt);return s&&yt.forEach(function(sA){return o(j,sA)}),Ut&&Wi(j,St),ht}function ne(j,I,V,J){if(typeof V=="object"&&V!==null&&V.type===O&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case k:t:{for(var ht=V.key,gt=I;gt!==null;){if(gt.key===ht){if(ht=V.type,ht===O){if(gt.tag===7){u(j,gt.sibling),I=y(gt,V.props.children),I.return=j,j=I;break t}}else if(gt.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===G&&xp(ht)===gt.type){u(j,gt.sibling),I=y(gt,V.props),I.ref=Br(j,gt,V),I.return=j,j=I;break t}u(j,gt);break}else o(j,gt);gt=gt.sibling}V.type===O?(I=Zi(V.props.children,j.mode,J,V.key),I.return=j,j=I):(J=qa(V.type,V.key,V.props,null,j.mode,J),J.ref=Br(j,I,V),J.return=j,j=J)}return A(j);case N:t:{for(gt=V.key;I!==null;){if(I.key===gt)if(I.tag===4&&I.stateNode.containerInfo===V.containerInfo&&I.stateNode.implementation===V.implementation){u(j,I.sibling),I=y(I,V.children||[]),I.return=j,j=I;break t}else{u(j,I);break}else o(j,I);I=I.sibling}I=Lu(V,j.mode,J),I.return=j,j=I}return A(j);case G:return gt=V._init,ne(j,I,gt(V._payload),J)}if(Vi(V))return at(j,I,V,J);if(tt(V))return ut(j,I,V,J);Ca(j,V)}return typeof V=="string"&&V!==""||typeof V=="number"?(V=""+V,I!==null&&I.tag===6?(u(j,I.sibling),I=y(I,V),I.return=j,j=I):(u(j,I),I=Mu(V,j.mode,J),I.return=j,j=I),A(j)):u(j,I)}return ne}var Ls=Ap(!0),Sp=Ap(!1),_a=vi(null),Ta=null,Is=null,zc=null;function Hc(){zc=Is=Ta=null}function $c(s){var o=_a.current;$t(_a),s._currentValue=o}function Uc(s,o,u){for(;s!==null;){var p=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),s===u)break;s=s.return}}function Ds(s,o){Ta=s,zc=Is=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(He=!0),s.firstContext=null)}function on(s){var o=s._currentValue;if(zc!==s)if(s={context:s,memoizedValue:o,next:null},Is===null){if(Ta===null)throw Error(e(308));Is=s,Ta.dependencies={lanes:0,firstContext:s}}else Is=Is.next=s;return o}var Gi=null;function Wc(s){Gi===null?Gi=[s]:Gi.push(s)}function Ep(s,o,u,p){var y=o.interleaved;return y===null?(u.next=u,Wc(o)):(u.next=y.next,y.next=u),o.interleaved=u,Qn(s,p)}function Qn(s,o){s.lanes|=o;var u=s.alternate;for(u!==null&&(u.lanes|=o),u=s,s=s.return;s!==null;)s.childLanes|=o,u=s.alternate,u!==null&&(u.childLanes|=o),u=s,s=s.return;return u.tag===3?u.stateNode:null}var xi=!1;function Gc(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cp(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Jn(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function Ai(s,o,u){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(Dt&2)!==0){var y=p.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),p.pending=o,Qn(s,u)}return y=p.interleaved,y===null?(o.next=o,Wc(p)):(o.next=y.next,y.next=o),p.interleaved=o,Qn(s,u)}function ka(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var p=o.lanes;p&=s.pendingLanes,u|=p,o.lanes=u,oc(s,u)}}function _p(s,o){var u=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var y=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var A={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?y=v=A:v=v.next=A,u=u.next}while(u!==null);v===null?y=v=o:v=v.next=o}else y=v=o;u={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:p.shared,effects:p.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}function Pa(s,o,u,p){var y=s.updateQueue;xi=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,T=y.shared.pending;if(T!==null){y.shared.pending=null;var M=T,z=M.next;M.next=null,A===null?v=z:A.next=z,A=M;var K=s.alternate;K!==null&&(K=K.updateQueue,T=K.lastBaseUpdate,T!==A&&(T===null?K.firstBaseUpdate=z:T.next=z,K.lastBaseUpdate=M))}if(v!==null){var q=y.baseState;A=0,K=z=M=null,T=v;do{var X=T.lane,it=T.eventTime;if((p&X)===X){K!==null&&(K=K.next={eventTime:it,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});t:{var at=s,ut=T;switch(X=o,it=u,ut.tag){case 1:if(at=ut.payload,typeof at=="function"){q=at.call(it,q,X);break t}q=at;break t;case 3:at.flags=at.flags&-65537|128;case 0:if(at=ut.payload,X=typeof at=="function"?at.call(it,q,X):at,X==null)break t;q=Q({},q,X);break t;case 2:xi=!0}}T.callback!==null&&T.lane!==0&&(s.flags|=64,X=y.effects,X===null?y.effects=[T]:X.push(T))}else it={eventTime:it,lane:X,tag:T.tag,payload:T.payload,callback:T.callback,next:null},K===null?(z=K=it,M=q):K=K.next=it,A|=X;if(T=T.next,T===null){if(T=y.shared.pending,T===null)break;X=T,T=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);if(K===null&&(M=q),y.baseState=M,y.firstBaseUpdate=z,y.lastBaseUpdate=K,o=y.shared.interleaved,o!==null){y=o;do A|=y.lane,y=y.next;while(y!==o)}else v===null&&(y.shared.lanes=0);qi|=A,s.lanes=A,s.memoizedState=q}}function Tp(s,o,u){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var p=s[o],y=p.callback;if(y!==null){if(p.callback=null,p=u,typeof y!="function")throw Error(e(191,y));y.call(p)}}}var Vr={},Ln=vi(Vr),zr=vi(Vr),Hr=vi(Vr);function Xi(s){if(s===Vr)throw Error(e(174));return s}function Xc(s,o){switch(zt(Hr,o),zt(zr,s),zt(Ln,Vr),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:nn(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=nn(o,s)}$t(Ln),zt(Ln,o)}function Ns(){$t(Ln),$t(zr),$t(Hr)}function kp(s){Xi(Hr.current);var o=Xi(Ln.current),u=nn(o,s.type);o!==u&&(zt(zr,s),zt(Ln,u))}function Kc(s){zr.current===s&&($t(Ln),$t(zr))}var Gt=vi(0);function Ra(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var qc=[];function Yc(){for(var s=0;s<qc.length;s++)qc[s]._workInProgressVersionPrimary=null;qc.length=0}var Ma=R.ReactCurrentDispatcher,Qc=R.ReactCurrentBatchConfig,Ki=0,Xt=null,de=null,ye=null,La=!1,$r=!1,Ur=0,_x=0;function Pe(){throw Error(e(321))}function Jc(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!bn(s[u],o[u]))return!1;return!0}function Zc(s,o,u,p,y,v){if(Ki=v,Xt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ma.current=s===null||s.memoizedState===null?Rx:Mx,s=u(p,y),$r){v=0;do{if($r=!1,Ur=0,25<=v)throw Error(e(301));v+=1,ye=de=null,o.updateQueue=null,Ma.current=Lx,s=u(p,y)}while($r)}if(Ma.current=Na,o=de!==null&&de.next!==null,Ki=0,ye=de=Xt=null,La=!1,o)throw Error(e(300));return s}function tu(){var s=Ur!==0;return Ur=0,s}function In(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ye===null?Xt.memoizedState=ye=s:ye=ye.next=s,ye}function an(){if(de===null){var s=Xt.alternate;s=s!==null?s.memoizedState:null}else s=de.next;var o=ye===null?Xt.memoizedState:ye.next;if(o!==null)ye=o,de=s;else{if(s===null)throw Error(e(310));de=s,s={memoizedState:de.memoizedState,baseState:de.baseState,baseQueue:de.baseQueue,queue:de.queue,next:null},ye===null?Xt.memoizedState=ye=s:ye=ye.next=s}return ye}function Wr(s,o){return typeof o=="function"?o(s):o}function eu(s){var o=an(),u=o.queue;if(u===null)throw Error(e(311));u.lastRenderedReducer=s;var p=de,y=p.baseQueue,v=u.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}p.baseQueue=y=v,u.pending=null}if(y!==null){v=y.next,p=p.baseState;var T=A=null,M=null,z=v;do{var K=z.lane;if((Ki&K)===K)M!==null&&(M=M.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),p=z.hasEagerState?z.eagerState:s(p,z.action);else{var q={lane:K,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};M===null?(T=M=q,A=p):M=M.next=q,Xt.lanes|=K,qi|=K}z=z.next}while(z!==null&&z!==v);M===null?A=p:M.next=T,bn(p,o.memoizedState)||(He=!0),o.memoizedState=p,o.baseState=A,o.baseQueue=M,u.lastRenderedState=p}if(s=u.interleaved,s!==null){y=s;do v=y.lane,Xt.lanes|=v,qi|=v,y=y.next;while(y!==s)}else y===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function nu(s){var o=an(),u=o.queue;if(u===null)throw Error(e(311));u.lastRenderedReducer=s;var p=u.dispatch,y=u.pending,v=o.memoizedState;if(y!==null){u.pending=null;var A=y=y.next;do v=s(v,A.action),A=A.next;while(A!==y);bn(v,o.memoizedState)||(He=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),u.lastRenderedState=v}return[v,p]}function Pp(){}function Rp(s,o){var u=Xt,p=an(),y=o(),v=!bn(p.memoizedState,y);if(v&&(p.memoizedState=y,He=!0),p=p.queue,iu(Ip.bind(null,u,p,s),[s]),p.getSnapshot!==o||v||ye!==null&&ye.memoizedState.tag&1){if(u.flags|=2048,Gr(9,Lp.bind(null,u,p,y,o),void 0,null),ve===null)throw Error(e(349));(Ki&30)!==0||Mp(u,o,y)}return y}function Mp(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=Xt.updateQueue,o===null?(o={lastEffect:null,stores:null},Xt.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function Lp(s,o,u,p){o.value=u,o.getSnapshot=p,Dp(o)&&Np(s)}function Ip(s,o,u){return u(function(){Dp(o)&&Np(s)})}function Dp(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!bn(s,u)}catch{return!0}}function Np(s){var o=Qn(s,1);o!==null&&Cn(o,s,1,-1)}function Fp(s){var o=In();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:s},o.queue=s,s=s.dispatch=Px.bind(null,Xt,s),[o.memoizedState,s]}function Gr(s,o,u,p){return s={tag:s,create:o,destroy:u,deps:p,next:null},o=Xt.updateQueue,o===null?(o={lastEffect:null,stores:null},Xt.updateQueue=o,o.lastEffect=s.next=s):(u=o.lastEffect,u===null?o.lastEffect=s.next=s:(p=u.next,u.next=s,s.next=p,o.lastEffect=s)),s}function Op(){return an().memoizedState}function Ia(s,o,u,p){var y=In();Xt.flags|=s,y.memoizedState=Gr(1|o,u,void 0,p===void 0?null:p)}function Da(s,o,u,p){var y=an();p=p===void 0?null:p;var v=void 0;if(de!==null){var A=de.memoizedState;if(v=A.destroy,p!==null&&Jc(p,A.deps)){y.memoizedState=Gr(o,u,v,p);return}}Xt.flags|=s,y.memoizedState=Gr(1|o,u,v,p)}function jp(s,o){return Ia(8390656,8,s,o)}function iu(s,o){return Da(2048,8,s,o)}function Bp(s,o){return Da(4,2,s,o)}function Vp(s,o){return Da(4,4,s,o)}function zp(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Hp(s,o,u){return u=u!=null?u.concat([s]):null,Da(4,4,zp.bind(null,o,s),u)}function su(){}function $p(s,o){var u=an();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&Jc(o,p[1])?p[0]:(u.memoizedState=[s,o],s)}function Up(s,o){var u=an();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&Jc(o,p[1])?p[0]:(s=s(),u.memoizedState=[s,o],s)}function Wp(s,o,u){return(Ki&21)===0?(s.baseState&&(s.baseState=!1,He=!0),s.memoizedState=u):(bn(u,o)||(u=xf(),Xt.lanes|=u,qi|=u,s.baseState=!0),o)}function Tx(s,o){var u=Ft;Ft=u!==0&&4>u?u:4,s(!0);var p=Qc.transition;Qc.transition={};try{s(!1),o()}finally{Ft=u,Qc.transition=p}}function Gp(){return an().memoizedState}function kx(s,o,u){var p=_i(s);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},Xp(s))Kp(o,u);else if(u=Ep(s,o,u,p),u!==null){var y=Oe();Cn(u,s,p,y),qp(u,o,p)}}function Px(s,o,u){var p=_i(s),y={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(Xp(s))Kp(o,y);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var A=o.lastRenderedState,T=v(A,u);if(y.hasEagerState=!0,y.eagerState=T,bn(T,A)){var M=o.interleaved;M===null?(y.next=y,Wc(o)):(y.next=M.next,M.next=y),o.interleaved=y;return}}catch{}finally{}u=Ep(s,o,y,p),u!==null&&(y=Oe(),Cn(u,s,p,y),qp(u,o,p))}}function Xp(s){var o=s.alternate;return s===Xt||o!==null&&o===Xt}function Kp(s,o){$r=La=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function qp(s,o,u){if((u&4194240)!==0){var p=o.lanes;p&=s.pendingLanes,u|=p,o.lanes=u,oc(s,u)}}var Na={readContext:on,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useInsertionEffect:Pe,useLayoutEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useDeferredValue:Pe,useTransition:Pe,useMutableSource:Pe,useSyncExternalStore:Pe,useId:Pe,unstable_isNewReconciler:!1},Rx={readContext:on,useCallback:function(s,o){return In().memoizedState=[s,o===void 0?null:o],s},useContext:on,useEffect:jp,useImperativeHandle:function(s,o,u){return u=u!=null?u.concat([s]):null,Ia(4194308,4,zp.bind(null,o,s),u)},useLayoutEffect:function(s,o){return Ia(4194308,4,s,o)},useInsertionEffect:function(s,o){return Ia(4,2,s,o)},useMemo:function(s,o){var u=In();return o=o===void 0?null:o,s=s(),u.memoizedState=[s,o],s},useReducer:function(s,o,u){var p=In();return o=u!==void 0?u(o):o,p.memoizedState=p.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},p.queue=s,s=s.dispatch=kx.bind(null,Xt,s),[p.memoizedState,s]},useRef:function(s){var o=In();return s={current:s},o.memoizedState=s},useState:Fp,useDebugValue:su,useDeferredValue:function(s){return In().memoizedState=s},useTransition:function(){var s=Fp(!1),o=s[0];return s=Tx.bind(null,s[1]),In().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,u){var p=Xt,y=In();if(Ut){if(u===void 0)throw Error(e(407));u=u()}else{if(u=o(),ve===null)throw Error(e(349));(Ki&30)!==0||Mp(p,o,u)}y.memoizedState=u;var v={value:u,getSnapshot:o};return y.queue=v,jp(Ip.bind(null,p,v,s),[s]),p.flags|=2048,Gr(9,Lp.bind(null,p,v,u,o),void 0,null),u},useId:function(){var s=In(),o=ve.identifierPrefix;if(Ut){var u=Yn,p=qn;u=(p&~(1<<32-wn(p)-1)).toString(32)+u,o=":"+o+"R"+u,u=Ur++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=_x++,o=":"+o+"r"+u.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},Mx={readContext:on,useCallback:$p,useContext:on,useEffect:iu,useImperativeHandle:Hp,useInsertionEffect:Bp,useLayoutEffect:Vp,useMemo:Up,useReducer:eu,useRef:Op,useState:function(){return eu(Wr)},useDebugValue:su,useDeferredValue:function(s){var o=an();return Wp(o,de.memoizedState,s)},useTransition:function(){var s=eu(Wr)[0],o=an().memoizedState;return[s,o]},useMutableSource:Pp,useSyncExternalStore:Rp,useId:Gp,unstable_isNewReconciler:!1},Lx={readContext:on,useCallback:$p,useContext:on,useEffect:iu,useImperativeHandle:Hp,useInsertionEffect:Bp,useLayoutEffect:Vp,useMemo:Up,useReducer:nu,useRef:Op,useState:function(){return nu(Wr)},useDebugValue:su,useDeferredValue:function(s){var o=an();return de===null?o.memoizedState=s:Wp(o,de.memoizedState,s)},useTransition:function(){var s=nu(Wr)[0],o=an().memoizedState;return[s,o]},useMutableSource:Pp,useSyncExternalStore:Rp,useId:Gp,unstable_isNewReconciler:!1};function An(s,o){if(s&&s.defaultProps){o=Q({},o),s=s.defaultProps;for(var u in s)o[u]===void 0&&(o[u]=s[u]);return o}return o}function ru(s,o,u,p){o=s.memoizedState,u=u(p,o),u=u==null?o:Q({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Fa={isMounted:function(s){return(s=s._reactInternals)?zi(s)===s:!1},enqueueSetState:function(s,o,u){s=s._reactInternals;var p=Oe(),y=_i(s),v=Jn(p,y);v.payload=o,u!=null&&(v.callback=u),o=Ai(s,v,y),o!==null&&(Cn(o,s,y,p),ka(o,s,y))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var p=Oe(),y=_i(s),v=Jn(p,y);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=Ai(s,v,y),o!==null&&(Cn(o,s,y,p),ka(o,s,y))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=Oe(),p=_i(s),y=Jn(u,p);y.tag=2,o!=null&&(y.callback=o),o=Ai(s,y,p),o!==null&&(Cn(o,s,p,u),ka(o,s,p))}};function Yp(s,o,u,p,y,v,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,v,A):o.prototype&&o.prototype.isPureReactComponent?!Lr(u,p)||!Lr(y,v):!0}function Qp(s,o,u){var p=!1,y=wi,v=o.contextType;return typeof v=="object"&&v!==null?v=on(v):(y=ze(o)?$i:ke.current,p=o.contextTypes,v=(p=p!=null)?ks(s,y):wi),o=new o(u,v),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Fa,s.stateNode=o,o._reactInternals=s,p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=y,s.__reactInternalMemoizedMaskedChildContext=v),o}function Jp(s,o,u,p){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==s&&Fa.enqueueReplaceState(o,o.state,null)}function ou(s,o,u,p){var y=s.stateNode;y.props=u,y.state=s.memoizedState,y.refs={},Gc(s);var v=o.contextType;typeof v=="object"&&v!==null?y.context=on(v):(v=ze(o)?$i:ke.current,y.context=ks(s,v)),y.state=s.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(ru(s,o,v,u),y.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(o=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),o!==y.state&&Fa.enqueueReplaceState(y,y.state,null),Pa(s,u,y,p),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308)}function Fs(s,o){try{var u="",p=o;do u+=mt(p),p=p.return;while(p);var y=u}catch(v){y=`
Error generating stack: `+v.message+`
`+v.stack}return{value:s,source:o,stack:y,digest:null}}function au(s,o,u){return{value:s,source:null,stack:u??null,digest:o??null}}function lu(s,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var Ix=typeof WeakMap=="function"?WeakMap:Map;function Zp(s,o,u){u=Jn(-1,u),u.tag=3,u.payload={element:null};var p=o.value;return u.callback=function(){$a||($a=!0,Su=p),lu(s,o)},u}function tm(s,o,u){u=Jn(-1,u),u.tag=3;var p=s.type.getDerivedStateFromError;if(typeof p=="function"){var y=o.value;u.payload=function(){return p(y)},u.callback=function(){lu(s,o)}}var v=s.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){lu(s,o),typeof p!="function"&&(Ei===null?Ei=new Set([this]):Ei.add(this));var A=o.stack;this.componentDidCatch(o.value,{componentStack:A!==null?A:""})}),u}function em(s,o,u){var p=s.pingCache;if(p===null){p=s.pingCache=new Ix;var y=new Set;p.set(o,y)}else y=p.get(o),y===void 0&&(y=new Set,p.set(o,y));y.has(u)||(y.add(u),s=Xx.bind(null,s,o,u),o.then(s,s))}function nm(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function im(s,o,u,p,y){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Jn(-1,1),o.tag=2,Ai(u,o,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=y,s)}var Dx=R.ReactCurrentOwner,He=!1;function Fe(s,o,u,p){o.child=s===null?Sp(o,null,u,p):Ls(o,s.child,u,p)}function sm(s,o,u,p,y){u=u.render;var v=o.ref;return Ds(o,y),p=Zc(s,o,u,p,v,y),u=tu(),s!==null&&!He?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~y,Zn(s,o,y)):(Ut&&u&&Fc(o),o.flags|=1,Fe(s,o,p,y),o.child)}function rm(s,o,u,p,y){if(s===null){var v=u.type;return typeof v=="function"&&!Ru(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=v,om(s,o,v,p,y)):(s=qa(u.type,null,p,o,o.mode,y),s.ref=o.ref,s.return=o,o.child=s)}if(v=s.child,(s.lanes&y)===0){var A=v.memoizedProps;if(u=u.compare,u=u!==null?u:Lr,u(A,p)&&s.ref===o.ref)return Zn(s,o,y)}return o.flags|=1,s=ki(v,p),s.ref=o.ref,s.return=o,o.child=s}function om(s,o,u,p,y){if(s!==null){var v=s.memoizedProps;if(Lr(v,p)&&s.ref===o.ref)if(He=!1,o.pendingProps=p=v,(s.lanes&y)!==0)(s.flags&131072)!==0&&(He=!0);else return o.lanes=s.lanes,Zn(s,o,y)}return cu(s,o,u,p,y)}function am(s,o,u){var p=o.pendingProps,y=p.children,v=s!==null?s.memoizedState:null;if(p.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},zt(js,Je),Je|=u;else{if((u&1073741824)===0)return s=v!==null?v.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,zt(js,Je),Je|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=v!==null?v.baseLanes:u,zt(js,Je),Je|=p}else v!==null?(p=v.baseLanes|u,o.memoizedState=null):p=u,zt(js,Je),Je|=p;return Fe(s,o,y,u),o.child}function lm(s,o){var u=o.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function cu(s,o,u,p,y){var v=ze(u)?$i:ke.current;return v=ks(o,v),Ds(o,y),u=Zc(s,o,u,p,v,y),p=tu(),s!==null&&!He?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~y,Zn(s,o,y)):(Ut&&p&&Fc(o),o.flags|=1,Fe(s,o,u,y),o.child)}function cm(s,o,u,p,y){if(ze(u)){var v=!0;ba(o)}else v=!1;if(Ds(o,y),o.stateNode===null)ja(s,o),Qp(o,u,p),ou(o,u,p,y),p=!0;else if(s===null){var A=o.stateNode,T=o.memoizedProps;A.props=T;var M=A.context,z=u.contextType;typeof z=="object"&&z!==null?z=on(z):(z=ze(u)?$i:ke.current,z=ks(o,z));var K=u.getDerivedStateFromProps,q=typeof K=="function"||typeof A.getSnapshotBeforeUpdate=="function";q||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(T!==p||M!==z)&&Jp(o,A,p,z),xi=!1;var X=o.memoizedState;A.state=X,Pa(o,p,A,y),M=o.memoizedState,T!==p||X!==M||Ve.current||xi?(typeof K=="function"&&(ru(o,u,K,p),M=o.memoizedState),(T=xi||Yp(o,u,T,p,X,M,z))?(q||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(o.flags|=4194308)):(typeof A.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=M),A.props=p,A.state=M,A.context=z,p=T):(typeof A.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{A=o.stateNode,Cp(s,o),T=o.memoizedProps,z=o.type===o.elementType?T:An(o.type,T),A.props=z,q=o.pendingProps,X=A.context,M=u.contextType,typeof M=="object"&&M!==null?M=on(M):(M=ze(u)?$i:ke.current,M=ks(o,M));var it=u.getDerivedStateFromProps;(K=typeof it=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(T!==q||X!==M)&&Jp(o,A,p,M),xi=!1,X=o.memoizedState,A.state=X,Pa(o,p,A,y);var at=o.memoizedState;T!==q||X!==at||Ve.current||xi?(typeof it=="function"&&(ru(o,u,it,p),at=o.memoizedState),(z=xi||Yp(o,u,z,p,X,at,M)||!1)?(K||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(p,at,M),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(p,at,M)),typeof A.componentDidUpdate=="function"&&(o.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof A.componentDidUpdate!="function"||T===s.memoizedProps&&X===s.memoizedState||(o.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&X===s.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=at),A.props=p,A.state=at,A.context=M,p=z):(typeof A.componentDidUpdate!="function"||T===s.memoizedProps&&X===s.memoizedState||(o.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&X===s.memoizedState||(o.flags|=1024),p=!1)}return uu(s,o,u,p,v,y)}function uu(s,o,u,p,y,v){lm(s,o);var A=(o.flags&128)!==0;if(!p&&!A)return y&&pp(o,u,!1),Zn(s,o,v);p=o.stateNode,Dx.current=o;var T=A&&typeof u.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,s!==null&&A?(o.child=Ls(o,s.child,null,v),o.child=Ls(o,null,T,v)):Fe(s,o,T,v),o.memoizedState=p.state,y&&pp(o,u,!0),o.child}function um(s){var o=s.stateNode;o.pendingContext?dp(s,o.pendingContext,o.pendingContext!==o.context):o.context&&dp(s,o.context,!1),Xc(s,o.containerInfo)}function hm(s,o,u,p,y){return Ms(),Vc(y),o.flags|=256,Fe(s,o,u,p),o.child}var hu={dehydrated:null,treeContext:null,retryLane:0};function du(s){return{baseLanes:s,cachePool:null,transitions:null}}function dm(s,o,u){var p=o.pendingProps,y=Gt.current,v=!1,A=(o.flags&128)!==0,T;if((T=A)||(T=s!==null&&s.memoizedState===null?!1:(y&2)!==0),T?(v=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(y|=1),zt(Gt,y&1),s===null)return Bc(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(A=p.children,s=p.fallback,v?(p=o.mode,v=o.child,A={mode:"hidden",children:A},(p&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=A):v=Ya(A,p,0,null),s=Zi(s,p,u,null),v.return=o,s.return=o,v.sibling=s,o.child=v,o.child.memoizedState=du(u),o.memoizedState=hu,s):fu(o,A));if(y=s.memoizedState,y!==null&&(T=y.dehydrated,T!==null))return Nx(s,o,A,p,T,y,u);if(v){v=p.fallback,A=o.mode,y=s.child,T=y.sibling;var M={mode:"hidden",children:p.children};return(A&1)===0&&o.child!==y?(p=o.child,p.childLanes=0,p.pendingProps=M,o.deletions=null):(p=ki(y,M),p.subtreeFlags=y.subtreeFlags&14680064),T!==null?v=ki(T,v):(v=Zi(v,A,u,null),v.flags|=2),v.return=o,p.return=o,p.sibling=v,o.child=p,p=v,v=o.child,A=s.child.memoizedState,A=A===null?du(u):{baseLanes:A.baseLanes|u,cachePool:null,transitions:A.transitions},v.memoizedState=A,v.childLanes=s.childLanes&~u,o.memoizedState=hu,p}return v=s.child,s=v.sibling,p=ki(v,{mode:"visible",children:p.children}),(o.mode&1)===0&&(p.lanes=u),p.return=o,p.sibling=null,s!==null&&(u=o.deletions,u===null?(o.deletions=[s],o.flags|=16):u.push(s)),o.child=p,o.memoizedState=null,p}function fu(s,o){return o=Ya({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function Oa(s,o,u,p){return p!==null&&Vc(p),Ls(o,s.child,null,u),s=fu(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function Nx(s,o,u,p,y,v,A){if(u)return o.flags&256?(o.flags&=-257,p=au(Error(e(422))),Oa(s,o,A,p)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(v=p.fallback,y=o.mode,p=Ya({mode:"visible",children:p.children},y,0,null),v=Zi(v,y,A,null),v.flags|=2,p.return=o,v.return=o,p.sibling=v,o.child=p,(o.mode&1)!==0&&Ls(o,s.child,null,A),o.child.memoizedState=du(A),o.memoizedState=hu,v);if((o.mode&1)===0)return Oa(s,o,A,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var T=p.dgst;return p=T,v=Error(e(419)),p=au(v,p,void 0),Oa(s,o,A,p)}if(T=(A&s.childLanes)!==0,He||T){if(p=ve,p!==null){switch(A&-A){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|A))!==0?0:y,y!==0&&y!==v.retryLane&&(v.retryLane=y,Qn(s,y),Cn(p,s,y,-1))}return Pu(),p=au(Error(e(421))),Oa(s,o,A,p)}return y.data==="$?"?(o.flags|=128,o.child=s.child,o=Kx.bind(null,s),y._reactRetry=o,null):(s=v.treeContext,Qe=yi(y.nextSibling),Ye=o,Ut=!0,xn=null,s!==null&&(sn[rn++]=qn,sn[rn++]=Yn,sn[rn++]=Ui,qn=s.id,Yn=s.overflow,Ui=o),o=fu(o,p.children),o.flags|=4096,o)}function fm(s,o,u){s.lanes|=o;var p=s.alternate;p!==null&&(p.lanes|=o),Uc(s.return,o,u)}function pu(s,o,u,p,y){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:y}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=p,v.tail=u,v.tailMode=y)}function pm(s,o,u){var p=o.pendingProps,y=p.revealOrder,v=p.tail;if(Fe(s,o,p.children,u),p=Gt.current,(p&2)!==0)p=p&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&fm(s,u,o);else if(s.tag===19)fm(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break t;for(;s.sibling===null;){if(s.return===null||s.return===o)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}if(zt(Gt,p),(o.mode&1)===0)o.memoizedState=null;else switch(y){case"forwards":for(u=o.child,y=null;u!==null;)s=u.alternate,s!==null&&Ra(s)===null&&(y=u),u=u.sibling;u=y,u===null?(y=o.child,o.child=null):(y=u.sibling,u.sibling=null),pu(o,!1,y,u,v);break;case"backwards":for(u=null,y=o.child,o.child=null;y!==null;){if(s=y.alternate,s!==null&&Ra(s)===null){o.child=y;break}s=y.sibling,y.sibling=u,u=y,y=s}pu(o,!0,u,null,v);break;case"together":pu(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ja(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function Zn(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),qi|=o.lanes,(u&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(e(153));if(o.child!==null){for(s=o.child,u=ki(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=ki(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function Fx(s,o,u){switch(o.tag){case 3:um(o),Ms();break;case 5:kp(o);break;case 1:ze(o.type)&&ba(o);break;case 4:Xc(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,y=o.memoizedProps.value;zt(_a,p._currentValue),p._currentValue=y;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(zt(Gt,Gt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?dm(s,o,u):(zt(Gt,Gt.current&1),s=Zn(s,o,u),s!==null?s.sibling:null);zt(Gt,Gt.current&1);break;case 19:if(p=(u&o.childLanes)!==0,(s.flags&128)!==0){if(p)return pm(s,o,u);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),zt(Gt,Gt.current),p)break;return null;case 22:case 23:return o.lanes=0,am(s,o,u)}return Zn(s,o,u)}var mm,mu,gm,ym;mm=function(s,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},mu=function(){},gm=function(s,o,u,p){var y=s.memoizedProps;if(y!==p){s=o.stateNode,Xi(Ln.current);var v=null;switch(u){case"input":y=jt(s,y),p=jt(s,p),v=[];break;case"select":y=Q({},y,{value:void 0}),p=Q({},p,{value:void 0}),v=[];break;case"textarea":y=mr(s,y),p=mr(s,p),v=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(s.onclick=ya)}ql(u,p);var A;u=null;for(z in y)if(!p.hasOwnProperty(z)&&y.hasOwnProperty(z)&&y[z]!=null)if(z==="style"){var T=y[z];for(A in T)T.hasOwnProperty(A)&&(u||(u={}),u[A]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(r.hasOwnProperty(z)?v||(v=[]):(v=v||[]).push(z,null));for(z in p){var M=p[z];if(T=y?.[z],p.hasOwnProperty(z)&&M!==T&&(M!=null||T!=null))if(z==="style")if(T){for(A in T)!T.hasOwnProperty(A)||M&&M.hasOwnProperty(A)||(u||(u={}),u[A]="");for(A in M)M.hasOwnProperty(A)&&T[A]!==M[A]&&(u||(u={}),u[A]=M[A])}else u||(v||(v=[]),v.push(z,u)),u=M;else z==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,T=T?T.__html:void 0,M!=null&&T!==M&&(v=v||[]).push(z,M)):z==="children"?typeof M!="string"&&typeof M!="number"||(v=v||[]).push(z,""+M):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(r.hasOwnProperty(z)?(M!=null&&z==="onScroll"&&Ht("scroll",s),v||T===M||(v=[])):(v=v||[]).push(z,M))}u&&(v=v||[]).push("style",u);var z=v;(o.updateQueue=z)&&(o.flags|=4)}},ym=function(s,o,u,p){u!==p&&(o.flags|=4)};function Xr(s,o){if(!Ut)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function Re(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,p=0;if(o)for(var y=s.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=p,s.childLanes=u,o}function Ox(s,o,u){var p=o.pendingProps;switch(Oc(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(o),null;case 1:return ze(o.type)&&wa(),Re(o),null;case 3:return p=o.stateNode,Ns(),$t(Ve),$t(ke),Yc(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(Ea(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,xn!==null&&(_u(xn),xn=null))),mu(s,o),Re(o),null;case 5:Kc(o);var y=Xi(Hr.current);if(u=o.type,s!==null&&o.stateNode!=null)gm(s,o,u,p,y),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(e(166));return Re(o),null}if(s=Xi(Ln.current),Ea(o)){p=o.stateNode,u=o.type;var v=o.memoizedProps;switch(p[Mn]=o,p[Or]=v,s=(o.mode&1)!==0,u){case"dialog":Ht("cancel",p),Ht("close",p);break;case"iframe":case"object":case"embed":Ht("load",p);break;case"video":case"audio":for(y=0;y<Dr.length;y++)Ht(Dr[y],p);break;case"source":Ht("error",p);break;case"img":case"image":case"link":Ht("error",p),Ht("load",p);break;case"details":Ht("toggle",p);break;case"input":Qt(p,v),Ht("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!v.multiple},Ht("invalid",p);break;case"textarea":Go(p,v),Ht("invalid",p)}ql(u,v),y=null;for(var A in v)if(v.hasOwnProperty(A)){var T=v[A];A==="children"?typeof T=="string"?p.textContent!==T&&(v.suppressHydrationWarning!==!0&&ga(p.textContent,T,s),y=["children",T]):typeof T=="number"&&p.textContent!==""+T&&(v.suppressHydrationWarning!==!0&&ga(p.textContent,T,s),y=["children",""+T]):r.hasOwnProperty(A)&&T!=null&&A==="onScroll"&&Ht("scroll",p)}switch(u){case"input":ge(p),ui(p,v,!0);break;case"textarea":ge(p),Ko(p);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(p.onclick=ya)}p=y,o.updateQueue=p,p!==null&&(o.flags|=4)}else{A=y.nodeType===9?y:y.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=qo(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=A.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof p.is=="string"?s=A.createElement(u,{is:p.is}):(s=A.createElement(u),u==="select"&&(A=s,p.multiple?A.multiple=!0:p.size&&(A.size=p.size))):s=A.createElementNS(s,u),s[Mn]=o,s[Or]=p,mm(s,o,!1,!1),o.stateNode=s;t:{switch(A=Yl(u,p),u){case"dialog":Ht("cancel",s),Ht("close",s),y=p;break;case"iframe":case"object":case"embed":Ht("load",s),y=p;break;case"video":case"audio":for(y=0;y<Dr.length;y++)Ht(Dr[y],s);y=p;break;case"source":Ht("error",s),y=p;break;case"img":case"image":case"link":Ht("error",s),Ht("load",s),y=p;break;case"details":Ht("toggle",s),y=p;break;case"input":Qt(s,p),y=jt(s,p),Ht("invalid",s);break;case"option":y=p;break;case"select":s._wrapperState={wasMultiple:!!p.multiple},y=Q({},p,{value:void 0}),Ht("invalid",s);break;case"textarea":Go(s,p),y=mr(s,p),Ht("invalid",s);break;default:y=p}ql(u,y),T=y;for(v in T)if(T.hasOwnProperty(v)){var M=T[v];v==="style"?of(s,M):v==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&vn(s,M)):v==="children"?typeof M=="string"?(u!=="textarea"||M!=="")&&Gn(s,M):typeof M=="number"&&Gn(s,""+M):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(r.hasOwnProperty(v)?M!=null&&v==="onScroll"&&Ht("scroll",s):M!=null&&C(s,v,M,A))}switch(u){case"input":ge(s),ui(s,p,!1);break;case"textarea":ge(s),Ko(s);break;case"option":p.value!=null&&s.setAttribute("value",""+_t(p.value));break;case"select":s.multiple=!!p.multiple,v=p.value,v!=null?gn(s,!!p.multiple,v,!1):p.defaultValue!=null&&gn(s,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(s.onclick=ya)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break t;case"img":p=!0;break t;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Re(o),null;case 6:if(s&&o.stateNode!=null)ym(s,o,s.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(e(166));if(u=Xi(Hr.current),Xi(Ln.current),Ea(o)){if(p=o.stateNode,u=o.memoizedProps,p[Mn]=o,(v=p.nodeValue!==u)&&(s=Ye,s!==null))switch(s.tag){case 3:ga(p.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&ga(p.nodeValue,u,(s.mode&1)!==0)}v&&(o.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[Mn]=o,o.stateNode=p}return Re(o),null;case 13:if($t(Gt),p=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Ut&&Qe!==null&&(o.mode&1)!==0&&(o.flags&128)===0)bp(),Ms(),o.flags|=98560,v=!1;else if(v=Ea(o),p!==null&&p.dehydrated!==null){if(s===null){if(!v)throw Error(e(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(e(317));v[Mn]=o}else Ms(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Re(o),v=!1}else xn!==null&&(_u(xn),xn=null),v=!0;if(!v)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(p=p!==null,p!==(s!==null&&s.memoizedState!==null)&&p&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(Gt.current&1)!==0?fe===0&&(fe=3):Pu())),o.updateQueue!==null&&(o.flags|=4),Re(o),null);case 4:return Ns(),mu(s,o),s===null&&Nr(o.stateNode.containerInfo),Re(o),null;case 10:return $c(o.type._context),Re(o),null;case 17:return ze(o.type)&&wa(),Re(o),null;case 19:if($t(Gt),v=o.memoizedState,v===null)return Re(o),null;if(p=(o.flags&128)!==0,A=v.rendering,A===null)if(p)Xr(v,!1);else{if(fe!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(A=Ra(s),A!==null){for(o.flags|=128,Xr(v,!1),p=A.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=u,u=o.child;u!==null;)v=u,s=p,v.flags&=14680066,A=v.alternate,A===null?(v.childLanes=0,v.lanes=s,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=A.childLanes,v.lanes=A.lanes,v.child=A.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=A.memoizedProps,v.memoizedState=A.memoizedState,v.updateQueue=A.updateQueue,v.type=A.type,s=A.dependencies,v.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return zt(Gt,Gt.current&1|2),o.child}s=s.sibling}v.tail!==null&&ee()>Bs&&(o.flags|=128,p=!0,Xr(v,!1),o.lanes=4194304)}else{if(!p)if(s=Ra(A),s!==null){if(o.flags|=128,p=!0,u=s.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),Xr(v,!0),v.tail===null&&v.tailMode==="hidden"&&!A.alternate&&!Ut)return Re(o),null}else 2*ee()-v.renderingStartTime>Bs&&u!==1073741824&&(o.flags|=128,p=!0,Xr(v,!1),o.lanes=4194304);v.isBackwards?(A.sibling=o.child,o.child=A):(u=v.last,u!==null?u.sibling=A:o.child=A,v.last=A)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=ee(),o.sibling=null,u=Gt.current,zt(Gt,p?u&1|2:u&1),o):(Re(o),null);case 22:case 23:return ku(),p=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==p&&(o.flags|=8192),p&&(o.mode&1)!==0?(Je&1073741824)!==0&&(Re(o),o.subtreeFlags&6&&(o.flags|=8192)):Re(o),null;case 24:return null;case 25:return null}throw Error(e(156,o.tag))}function jx(s,o){switch(Oc(o),o.tag){case 1:return ze(o.type)&&wa(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Ns(),$t(Ve),$t(ke),Yc(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return Kc(o),null;case 13:if($t(Gt),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(e(340));Ms()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return $t(Gt),null;case 4:return Ns(),null;case 10:return $c(o.type._context),null;case 22:case 23:return ku(),null;case 24:return null;default:return null}}var Ba=!1,Me=!1,Bx=typeof WeakSet=="function"?WeakSet:Set,rt=null;function Os(s,o){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){Jt(s,o,p)}else u.current=null}function gu(s,o,u){try{u()}catch(p){Jt(s,o,p)}}var vm=!1;function Vx(s,o){if(kc=ra,s=Yf(),bc(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else t:{u=(u=s.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var y=p.anchorOffset,v=p.focusNode;p=p.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break t}var A=0,T=-1,M=-1,z=0,K=0,q=s,X=null;e:for(;;){for(var it;q!==u||y!==0&&q.nodeType!==3||(T=A+y),q!==v||p!==0&&q.nodeType!==3||(M=A+p),q.nodeType===3&&(A+=q.nodeValue.length),(it=q.firstChild)!==null;)X=q,q=it;for(;;){if(q===s)break e;if(X===u&&++z===y&&(T=A),X===v&&++K===p&&(M=A),(it=q.nextSibling)!==null)break;q=X,X=q.parentNode}q=it}u=T===-1||M===-1?null:{start:T,end:M}}else u=null}u=u||{start:0,end:0}}else u=null;for(Pc={focusedElem:s,selectionRange:u},ra=!1,rt=o;rt!==null;)if(o=rt,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,rt=s;else for(;rt!==null;){o=rt;try{var at=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(at!==null){var ut=at.memoizedProps,ne=at.memoizedState,j=o.stateNode,I=j.getSnapshotBeforeUpdate(o.elementType===o.type?ut:An(o.type,ut),ne);j.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var V=o.stateNode.containerInfo;V.nodeType===1?V.textContent="":V.nodeType===9&&V.documentElement&&V.removeChild(V.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(J){Jt(o,o.return,J)}if(s=o.sibling,s!==null){s.return=o.return,rt=s;break}rt=o.return}return at=vm,vm=!1,at}function Kr(s,o,u){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&s)===s){var v=y.destroy;y.destroy=void 0,v!==void 0&&gu(o,u,v)}y=y.next}while(y!==p)}}function Va(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&s)===s){var p=u.create;u.destroy=p()}u=u.next}while(u!==o)}}function yu(s){var o=s.ref;if(o!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof o=="function"?o(s):o.current=s}}function wm(s){var o=s.alternate;o!==null&&(s.alternate=null,wm(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[Mn],delete o[Or],delete o[Ic],delete o[Ax],delete o[Sx])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function bm(s){return s.tag===5||s.tag===3||s.tag===4}function xm(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||bm(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function vu(s,o,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(s,o):u.insertBefore(s,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(s,u)):(o=u,o.appendChild(s)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=ya));else if(p!==4&&(s=s.child,s!==null))for(vu(s,o,u),s=s.sibling;s!==null;)vu(s,o,u),s=s.sibling}function wu(s,o,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(p!==4&&(s=s.child,s!==null))for(wu(s,o,u),s=s.sibling;s!==null;)wu(s,o,u),s=s.sibling}var Ee=null,Sn=!1;function Si(s,o,u){for(u=u.child;u!==null;)Am(s,o,u),u=u.sibling}function Am(s,o,u){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(Zo,u)}catch{}switch(u.tag){case 5:Me||Os(u,o);case 6:var p=Ee,y=Sn;Ee=null,Si(s,o,u),Ee=p,Sn=y,Ee!==null&&(Sn?(s=Ee,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Ee.removeChild(u.stateNode));break;case 18:Ee!==null&&(Sn?(s=Ee,u=u.stateNode,s.nodeType===8?Lc(s.parentNode,u):s.nodeType===1&&Lc(s,u),_r(s)):Lc(Ee,u.stateNode));break;case 4:p=Ee,y=Sn,Ee=u.stateNode.containerInfo,Sn=!0,Si(s,o,u),Ee=p,Sn=y;break;case 0:case 11:case 14:case 15:if(!Me&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var v=y,A=v.destroy;v=v.tag,A!==void 0&&((v&2)!==0||(v&4)!==0)&&gu(u,o,A),y=y.next}while(y!==p)}Si(s,o,u);break;case 1:if(!Me&&(Os(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(T){Jt(u,o,T)}Si(s,o,u);break;case 21:Si(s,o,u);break;case 22:u.mode&1?(Me=(p=Me)||u.memoizedState!==null,Si(s,o,u),Me=p):Si(s,o,u);break;default:Si(s,o,u)}}function Sm(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new Bx),o.forEach(function(p){var y=qx.bind(null,s,p);u.has(p)||(u.add(p),p.then(y,y))})}}function En(s,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];try{var v=s,A=o,T=A;t:for(;T!==null;){switch(T.tag){case 5:Ee=T.stateNode,Sn=!1;break t;case 3:Ee=T.stateNode.containerInfo,Sn=!0;break t;case 4:Ee=T.stateNode.containerInfo,Sn=!0;break t}T=T.return}if(Ee===null)throw Error(e(160));Am(v,A,y),Ee=null,Sn=!1;var M=y.alternate;M!==null&&(M.return=null),y.return=null}catch(z){Jt(y,o,z)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Em(o,s),o=o.sibling}function Em(s,o){var u=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(En(o,s),Dn(s),p&4){try{Kr(3,s,s.return),Va(3,s)}catch(ut){Jt(s,s.return,ut)}try{Kr(5,s,s.return)}catch(ut){Jt(s,s.return,ut)}}break;case 1:En(o,s),Dn(s),p&512&&u!==null&&Os(u,u.return);break;case 5:if(En(o,s),Dn(s),p&512&&u!==null&&Os(u,u.return),s.flags&32){var y=s.stateNode;try{Gn(y,"")}catch(ut){Jt(s,s.return,ut)}}if(p&4&&(y=s.stateNode,y!=null)){var v=s.memoizedProps,A=u!==null?u.memoizedProps:v,T=s.type,M=s.updateQueue;if(s.updateQueue=null,M!==null)try{T==="input"&&v.type==="radio"&&v.name!=null&&te(y,v),Yl(T,A);var z=Yl(T,v);for(A=0;A<M.length;A+=2){var K=M[A],q=M[A+1];K==="style"?of(y,q):K==="dangerouslySetInnerHTML"?vn(y,q):K==="children"?Gn(y,q):C(y,K,q,z)}switch(T){case"input":Pn(y,v);break;case"textarea":Xo(y,v);break;case"select":var X=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!v.multiple;var it=v.value;it!=null?gn(y,!!v.multiple,it,!1):X!==!!v.multiple&&(v.defaultValue!=null?gn(y,!!v.multiple,v.defaultValue,!0):gn(y,!!v.multiple,v.multiple?[]:"",!1))}y[Or]=v}catch(ut){Jt(s,s.return,ut)}}break;case 6:if(En(o,s),Dn(s),p&4){if(s.stateNode===null)throw Error(e(162));y=s.stateNode,v=s.memoizedProps;try{y.nodeValue=v}catch(ut){Jt(s,s.return,ut)}}break;case 3:if(En(o,s),Dn(s),p&4&&u!==null&&u.memoizedState.isDehydrated)try{_r(o.containerInfo)}catch(ut){Jt(s,s.return,ut)}break;case 4:En(o,s),Dn(s);break;case 13:En(o,s),Dn(s),y=s.child,y.flags&8192&&(v=y.memoizedState!==null,y.stateNode.isHidden=v,!v||y.alternate!==null&&y.alternate.memoizedState!==null||(Au=ee())),p&4&&Sm(s);break;case 22:if(K=u!==null&&u.memoizedState!==null,s.mode&1?(Me=(z=Me)||K,En(o,s),Me=z):En(o,s),Dn(s),p&8192){if(z=s.memoizedState!==null,(s.stateNode.isHidden=z)&&!K&&(s.mode&1)!==0)for(rt=s,K=s.child;K!==null;){for(q=rt=K;rt!==null;){switch(X=rt,it=X.child,X.tag){case 0:case 11:case 14:case 15:Kr(4,X,X.return);break;case 1:Os(X,X.return);var at=X.stateNode;if(typeof at.componentWillUnmount=="function"){p=X,u=X.return;try{o=p,at.props=o.memoizedProps,at.state=o.memoizedState,at.componentWillUnmount()}catch(ut){Jt(p,u,ut)}}break;case 5:Os(X,X.return);break;case 22:if(X.memoizedState!==null){Tm(q);continue}}it!==null?(it.return=X,rt=it):Tm(q)}K=K.sibling}t:for(K=null,q=s;;){if(q.tag===5){if(K===null){K=q;try{y=q.stateNode,z?(v=y.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(T=q.stateNode,M=q.memoizedProps.style,A=M!=null&&M.hasOwnProperty("display")?M.display:null,T.style.display=rf("display",A))}catch(ut){Jt(s,s.return,ut)}}}else if(q.tag===6){if(K===null)try{q.stateNode.nodeValue=z?"":q.memoizedProps}catch(ut){Jt(s,s.return,ut)}}else if((q.tag!==22&&q.tag!==23||q.memoizedState===null||q===s)&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===s)break t;for(;q.sibling===null;){if(q.return===null||q.return===s)break t;K===q&&(K=null),q=q.return}K===q&&(K=null),q.sibling.return=q.return,q=q.sibling}}break;case 19:En(o,s),Dn(s),p&4&&Sm(s);break;case 21:break;default:En(o,s),Dn(s)}}function Dn(s){var o=s.flags;if(o&2){try{t:{for(var u=s.return;u!==null;){if(bm(u)){var p=u;break t}u=u.return}throw Error(e(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(Gn(y,""),p.flags&=-33);var v=xm(s);wu(s,v,y);break;case 3:case 4:var A=p.stateNode.containerInfo,T=xm(s);vu(s,T,A);break;default:throw Error(e(161))}}catch(M){Jt(s,s.return,M)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function zx(s,o,u){rt=s,Cm(s)}function Cm(s,o,u){for(var p=(s.mode&1)!==0;rt!==null;){var y=rt,v=y.child;if(y.tag===22&&p){var A=y.memoizedState!==null||Ba;if(!A){var T=y.alternate,M=T!==null&&T.memoizedState!==null||Me;T=Ba;var z=Me;if(Ba=A,(Me=M)&&!z)for(rt=y;rt!==null;)A=rt,M=A.child,A.tag===22&&A.memoizedState!==null?km(y):M!==null?(M.return=A,rt=M):km(y);for(;v!==null;)rt=v,Cm(v),v=v.sibling;rt=y,Ba=T,Me=z}_m(s)}else(y.subtreeFlags&8772)!==0&&v!==null?(v.return=y,rt=v):_m(s)}}function _m(s){for(;rt!==null;){var o=rt;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Me||Va(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!Me)if(u===null)p.componentDidMount();else{var y=o.elementType===o.type?u.memoizedProps:An(o.type,u.memoizedProps);p.componentDidUpdate(y,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var v=o.updateQueue;v!==null&&Tp(o,v,p);break;case 3:var A=o.updateQueue;if(A!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}Tp(o,A,u)}break;case 5:var T=o.stateNode;if(u===null&&o.flags&4){u=T;var M=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&u.focus();break;case"img":M.src&&(u.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var z=o.alternate;if(z!==null){var K=z.memoizedState;if(K!==null){var q=K.dehydrated;q!==null&&_r(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}Me||o.flags&512&&yu(o)}catch(X){Jt(o,o.return,X)}}if(o===s){rt=null;break}if(u=o.sibling,u!==null){u.return=o.return,rt=u;break}rt=o.return}}function Tm(s){for(;rt!==null;){var o=rt;if(o===s){rt=null;break}var u=o.sibling;if(u!==null){u.return=o.return,rt=u;break}rt=o.return}}function km(s){for(;rt!==null;){var o=rt;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Va(4,o)}catch(M){Jt(o,u,M)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var y=o.return;try{p.componentDidMount()}catch(M){Jt(o,y,M)}}var v=o.return;try{yu(o)}catch(M){Jt(o,v,M)}break;case 5:var A=o.return;try{yu(o)}catch(M){Jt(o,A,M)}}}catch(M){Jt(o,o.return,M)}if(o===s){rt=null;break}var T=o.sibling;if(T!==null){T.return=o.return,rt=T;break}rt=o.return}}var Hx=Math.ceil,za=R.ReactCurrentDispatcher,bu=R.ReactCurrentOwner,ln=R.ReactCurrentBatchConfig,Dt=0,ve=null,le=null,Ce=0,Je=0,js=vi(0),fe=0,qr=null,qi=0,Ha=0,xu=0,Yr=null,$e=null,Au=0,Bs=1/0,ti=null,$a=!1,Su=null,Ei=null,Ua=!1,Ci=null,Wa=0,Qr=0,Eu=null,Ga=-1,Xa=0;function Oe(){return(Dt&6)!==0?ee():Ga!==-1?Ga:Ga=ee()}function _i(s){return(s.mode&1)===0?1:(Dt&2)!==0&&Ce!==0?Ce&-Ce:Cx.transition!==null?(Xa===0&&(Xa=xf()),Xa):(s=Ft,s!==0||(s=window.event,s=s===void 0?16:Rf(s.type)),s)}function Cn(s,o,u,p){if(50<Qr)throw Qr=0,Eu=null,Error(e(185));xr(s,u,p),((Dt&2)===0||s!==ve)&&(s===ve&&((Dt&2)===0&&(Ha|=u),fe===4&&Ti(s,Ce)),Ue(s,p),u===1&&Dt===0&&(o.mode&1)===0&&(Bs=ee()+500,xa&&bi()))}function Ue(s,o){var u=s.callbackNode;Cb(s,o);var p=na(s,s===ve?Ce:0);if(p===0)u!==null&&vf(u),s.callbackNode=null,s.callbackPriority=0;else if(o=p&-p,s.callbackPriority!==o){if(u!=null&&vf(u),o===1)s.tag===0?Ex(Rm.bind(null,s)):mp(Rm.bind(null,s)),bx(function(){(Dt&6)===0&&bi()}),u=null;else{switch(Af(p)){case 1:u=ic;break;case 4:u=wf;break;case 16:u=Jo;break;case 536870912:u=bf;break;default:u=Jo}u=jm(u,Pm.bind(null,s))}s.callbackPriority=o,s.callbackNode=u}}function Pm(s,o){if(Ga=-1,Xa=0,(Dt&6)!==0)throw Error(e(327));var u=s.callbackNode;if(Vs()&&s.callbackNode!==u)return null;var p=na(s,s===ve?Ce:0);if(p===0)return null;if((p&30)!==0||(p&s.expiredLanes)!==0||o)o=Ka(s,p);else{o=p;var y=Dt;Dt|=2;var v=Lm();(ve!==s||Ce!==o)&&(ti=null,Bs=ee()+500,Qi(s,o));do try{Wx();break}catch(T){Mm(s,T)}while(!0);Hc(),za.current=v,Dt=y,le!==null?o=0:(ve=null,Ce=0,o=fe)}if(o!==0){if(o===2&&(y=sc(s),y!==0&&(p=y,o=Cu(s,y))),o===1)throw u=qr,Qi(s,0),Ti(s,p),Ue(s,ee()),u;if(o===6)Ti(s,p);else{if(y=s.current.alternate,(p&30)===0&&!$x(y)&&(o=Ka(s,p),o===2&&(v=sc(s),v!==0&&(p=v,o=Cu(s,v))),o===1))throw u=qr,Qi(s,0),Ti(s,p),Ue(s,ee()),u;switch(s.finishedWork=y,s.finishedLanes=p,o){case 0:case 1:throw Error(e(345));case 2:Ji(s,$e,ti);break;case 3:if(Ti(s,p),(p&130023424)===p&&(o=Au+500-ee(),10<o)){if(na(s,0)!==0)break;if(y=s.suspendedLanes,(y&p)!==p){Oe(),s.pingedLanes|=s.suspendedLanes&y;break}s.timeoutHandle=Mc(Ji.bind(null,s,$e,ti),o);break}Ji(s,$e,ti);break;case 4:if(Ti(s,p),(p&4194240)===p)break;for(o=s.eventTimes,y=-1;0<p;){var A=31-wn(p);v=1<<A,A=o[A],A>y&&(y=A),p&=~v}if(p=y,p=ee()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*Hx(p/1960))-p,10<p){s.timeoutHandle=Mc(Ji.bind(null,s,$e,ti),p);break}Ji(s,$e,ti);break;case 5:Ji(s,$e,ti);break;default:throw Error(e(329))}}}return Ue(s,ee()),s.callbackNode===u?Pm.bind(null,s):null}function Cu(s,o){var u=Yr;return s.current.memoizedState.isDehydrated&&(Qi(s,o).flags|=256),s=Ka(s,o),s!==2&&(o=$e,$e=u,o!==null&&_u(o)),s}function _u(s){$e===null?$e=s:$e.push.apply($e,s)}function $x(s){for(var o=s;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var y=u[p],v=y.getSnapshot;y=y.value;try{if(!bn(v(),y))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ti(s,o){for(o&=~xu,o&=~Ha,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var u=31-wn(o),p=1<<u;s[u]=-1,o&=~p}}function Rm(s){if((Dt&6)!==0)throw Error(e(327));Vs();var o=na(s,0);if((o&1)===0)return Ue(s,ee()),null;var u=Ka(s,o);if(s.tag!==0&&u===2){var p=sc(s);p!==0&&(o=p,u=Cu(s,p))}if(u===1)throw u=qr,Qi(s,0),Ti(s,o),Ue(s,ee()),u;if(u===6)throw Error(e(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,Ji(s,$e,ti),Ue(s,ee()),null}function Tu(s,o){var u=Dt;Dt|=1;try{return s(o)}finally{Dt=u,Dt===0&&(Bs=ee()+500,xa&&bi())}}function Yi(s){Ci!==null&&Ci.tag===0&&(Dt&6)===0&&Vs();var o=Dt;Dt|=1;var u=ln.transition,p=Ft;try{if(ln.transition=null,Ft=1,s)return s()}finally{Ft=p,ln.transition=u,Dt=o,(Dt&6)===0&&bi()}}function ku(){Je=js.current,$t(js)}function Qi(s,o){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,wx(u)),le!==null)for(u=le.return;u!==null;){var p=u;switch(Oc(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&wa();break;case 3:Ns(),$t(Ve),$t(ke),Yc();break;case 5:Kc(p);break;case 4:Ns();break;case 13:$t(Gt);break;case 19:$t(Gt);break;case 10:$c(p.type._context);break;case 22:case 23:ku()}u=u.return}if(ve=s,le=s=ki(s.current,null),Ce=Je=o,fe=0,qr=null,xu=Ha=qi=0,$e=Yr=null,Gi!==null){for(o=0;o<Gi.length;o++)if(u=Gi[o],p=u.interleaved,p!==null){u.interleaved=null;var y=p.next,v=u.pending;if(v!==null){var A=v.next;v.next=y,p.next=A}u.pending=p}Gi=null}return s}function Mm(s,o){do{var u=le;try{if(Hc(),Ma.current=Na,La){for(var p=Xt.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}La=!1}if(Ki=0,ye=de=Xt=null,$r=!1,Ur=0,bu.current=null,u===null||u.return===null){fe=1,qr=o,le=null;break}t:{var v=s,A=u.return,T=u,M=o;if(o=Ce,T.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var z=M,K=T,q=K.tag;if((K.mode&1)===0&&(q===0||q===11||q===15)){var X=K.alternate;X?(K.updateQueue=X.updateQueue,K.memoizedState=X.memoizedState,K.lanes=X.lanes):(K.updateQueue=null,K.memoizedState=null)}var it=nm(A);if(it!==null){it.flags&=-257,im(it,A,T,v,o),it.mode&1&&em(v,z,o),o=it,M=z;var at=o.updateQueue;if(at===null){var ut=new Set;ut.add(M),o.updateQueue=ut}else at.add(M);break t}else{if((o&1)===0){em(v,z,o),Pu();break t}M=Error(e(426))}}else if(Ut&&T.mode&1){var ne=nm(A);if(ne!==null){(ne.flags&65536)===0&&(ne.flags|=256),im(ne,A,T,v,o),Vc(Fs(M,T));break t}}v=M=Fs(M,T),fe!==4&&(fe=2),Yr===null?Yr=[v]:Yr.push(v),v=A;do{switch(v.tag){case 3:v.flags|=65536,o&=-o,v.lanes|=o;var j=Zp(v,M,o);_p(v,j);break t;case 1:T=M;var I=v.type,V=v.stateNode;if((v.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(Ei===null||!Ei.has(V)))){v.flags|=65536,o&=-o,v.lanes|=o;var J=tm(v,T,o);_p(v,J);break t}}v=v.return}while(v!==null)}Dm(u)}catch(ht){o=ht,le===u&&u!==null&&(le=u=u.return);continue}break}while(!0)}function Lm(){var s=za.current;return za.current=Na,s===null?Na:s}function Pu(){(fe===0||fe===3||fe===2)&&(fe=4),ve===null||(qi&268435455)===0&&(Ha&268435455)===0||Ti(ve,Ce)}function Ka(s,o){var u=Dt;Dt|=2;var p=Lm();(ve!==s||Ce!==o)&&(ti=null,Qi(s,o));do try{Ux();break}catch(y){Mm(s,y)}while(!0);if(Hc(),Dt=u,za.current=p,le!==null)throw Error(e(261));return ve=null,Ce=0,fe}function Ux(){for(;le!==null;)Im(le)}function Wx(){for(;le!==null&&!gb();)Im(le)}function Im(s){var o=Om(s.alternate,s,Je);s.memoizedProps=s.pendingProps,o===null?Dm(s):le=o,bu.current=null}function Dm(s){var o=s;do{var u=o.alternate;if(s=o.return,(o.flags&32768)===0){if(u=Ox(u,o,Je),u!==null){le=u;return}}else{if(u=jx(u,o),u!==null){u.flags&=32767,le=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{fe=6,le=null;return}}if(o=o.sibling,o!==null){le=o;return}le=o=s}while(o!==null);fe===0&&(fe=5)}function Ji(s,o,u){var p=Ft,y=ln.transition;try{ln.transition=null,Ft=1,Gx(s,o,u,p)}finally{ln.transition=y,Ft=p}return null}function Gx(s,o,u,p){do Vs();while(Ci!==null);if((Dt&6)!==0)throw Error(e(327));u=s.finishedWork;var y=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(e(177));s.callbackNode=null,s.callbackPriority=0;var v=u.lanes|u.childLanes;if(_b(s,v),s===ve&&(le=ve=null,Ce=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Ua||(Ua=!0,jm(Jo,function(){return Vs(),null})),v=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||v){v=ln.transition,ln.transition=null;var A=Ft;Ft=1;var T=Dt;Dt|=4,bu.current=null,Vx(s,u),Em(u,s),dx(Pc),ra=!!kc,Pc=kc=null,s.current=u,zx(u),yb(),Dt=T,Ft=A,ln.transition=v}else s.current=u;if(Ua&&(Ua=!1,Ci=s,Wa=y),v=s.pendingLanes,v===0&&(Ei=null),bb(u.stateNode),Ue(s,ee()),o!==null)for(p=s.onRecoverableError,u=0;u<o.length;u++)y=o[u],p(y.value,{componentStack:y.stack,digest:y.digest});if($a)throw $a=!1,s=Su,Su=null,s;return(Wa&1)!==0&&s.tag!==0&&Vs(),v=s.pendingLanes,(v&1)!==0?s===Eu?Qr++:(Qr=0,Eu=s):Qr=0,bi(),null}function Vs(){if(Ci!==null){var s=Af(Wa),o=ln.transition,u=Ft;try{if(ln.transition=null,Ft=16>s?16:s,Ci===null)var p=!1;else{if(s=Ci,Ci=null,Wa=0,(Dt&6)!==0)throw Error(e(331));var y=Dt;for(Dt|=4,rt=s.current;rt!==null;){var v=rt,A=v.child;if((rt.flags&16)!==0){var T=v.deletions;if(T!==null){for(var M=0;M<T.length;M++){var z=T[M];for(rt=z;rt!==null;){var K=rt;switch(K.tag){case 0:case 11:case 15:Kr(8,K,v)}var q=K.child;if(q!==null)q.return=K,rt=q;else for(;rt!==null;){K=rt;var X=K.sibling,it=K.return;if(wm(K),K===z){rt=null;break}if(X!==null){X.return=it,rt=X;break}rt=it}}}var at=v.alternate;if(at!==null){var ut=at.child;if(ut!==null){at.child=null;do{var ne=ut.sibling;ut.sibling=null,ut=ne}while(ut!==null)}}rt=v}}if((v.subtreeFlags&2064)!==0&&A!==null)A.return=v,rt=A;else t:for(;rt!==null;){if(v=rt,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Kr(9,v,v.return)}var j=v.sibling;if(j!==null){j.return=v.return,rt=j;break t}rt=v.return}}var I=s.current;for(rt=I;rt!==null;){A=rt;var V=A.child;if((A.subtreeFlags&2064)!==0&&V!==null)V.return=A,rt=V;else t:for(A=I;rt!==null;){if(T=rt,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:Va(9,T)}}catch(ht){Jt(T,T.return,ht)}if(T===A){rt=null;break t}var J=T.sibling;if(J!==null){J.return=T.return,rt=J;break t}rt=T.return}}if(Dt=y,bi(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(Zo,s)}catch{}p=!0}return p}finally{Ft=u,ln.transition=o}}return!1}function Nm(s,o,u){o=Fs(u,o),o=Zp(s,o,1),s=Ai(s,o,1),o=Oe(),s!==null&&(xr(s,1,o),Ue(s,o))}function Jt(s,o,u){if(s.tag===3)Nm(s,s,u);else for(;o!==null;){if(o.tag===3){Nm(o,s,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Ei===null||!Ei.has(p))){s=Fs(u,s),s=tm(o,s,1),o=Ai(o,s,1),s=Oe(),o!==null&&(xr(o,1,s),Ue(o,s));break}}o=o.return}}function Xx(s,o,u){var p=s.pingCache;p!==null&&p.delete(o),o=Oe(),s.pingedLanes|=s.suspendedLanes&u,ve===s&&(Ce&u)===u&&(fe===4||fe===3&&(Ce&130023424)===Ce&&500>ee()-Au?Qi(s,0):xu|=u),Ue(s,o)}function Fm(s,o){o===0&&((s.mode&1)===0?o=1:(o=ea,ea<<=1,(ea&130023424)===0&&(ea=4194304)));var u=Oe();s=Qn(s,o),s!==null&&(xr(s,o,u),Ue(s,u))}function Kx(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),Fm(s,u)}function qx(s,o){var u=0;switch(s.tag){case 13:var p=s.stateNode,y=s.memoizedState;y!==null&&(u=y.retryLane);break;case 19:p=s.stateNode;break;default:throw Error(e(314))}p!==null&&p.delete(o),Fm(s,u)}var Om;Om=function(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps||Ve.current)He=!0;else{if((s.lanes&u)===0&&(o.flags&128)===0)return He=!1,Fx(s,o,u);He=(s.flags&131072)!==0}else He=!1,Ut&&(o.flags&1048576)!==0&&gp(o,Sa,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;ja(s,o),s=o.pendingProps;var y=ks(o,ke.current);Ds(o,u),y=Zc(null,o,p,s,y,u);var v=tu();return o.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,ze(p)?(v=!0,ba(o)):v=!1,o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Gc(o),y.updater=Fa,o.stateNode=y,y._reactInternals=o,ou(o,p,s,u),o=uu(null,o,p,!0,v,u)):(o.tag=0,Ut&&v&&Fc(o),Fe(null,o,y,u),o=o.child),o;case 16:p=o.elementType;t:{switch(ja(s,o),s=o.pendingProps,y=p._init,p=y(p._payload),o.type=p,y=o.tag=Qx(p),s=An(p,s),y){case 0:o=cu(null,o,p,s,u);break t;case 1:o=cm(null,o,p,s,u);break t;case 11:o=sm(null,o,p,s,u);break t;case 14:o=rm(null,o,p,An(p.type,s),u);break t}throw Error(e(306,p,""))}return o;case 0:return p=o.type,y=o.pendingProps,y=o.elementType===p?y:An(p,y),cu(s,o,p,y,u);case 1:return p=o.type,y=o.pendingProps,y=o.elementType===p?y:An(p,y),cm(s,o,p,y,u);case 3:t:{if(um(o),s===null)throw Error(e(387));p=o.pendingProps,v=o.memoizedState,y=v.element,Cp(s,o),Pa(o,p,null,u);var A=o.memoizedState;if(p=A.element,v.isDehydrated)if(v={element:p,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){y=Fs(Error(e(423)),o),o=hm(s,o,p,u,y);break t}else if(p!==y){y=Fs(Error(e(424)),o),o=hm(s,o,p,u,y);break t}else for(Qe=yi(o.stateNode.containerInfo.firstChild),Ye=o,Ut=!0,xn=null,u=Sp(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Ms(),p===y){o=Zn(s,o,u);break t}Fe(s,o,p,u)}o=o.child}return o;case 5:return kp(o),s===null&&Bc(o),p=o.type,y=o.pendingProps,v=s!==null?s.memoizedProps:null,A=y.children,Rc(p,y)?A=null:v!==null&&Rc(p,v)&&(o.flags|=32),lm(s,o),Fe(s,o,A,u),o.child;case 6:return s===null&&Bc(o),null;case 13:return dm(s,o,u);case 4:return Xc(o,o.stateNode.containerInfo),p=o.pendingProps,s===null?o.child=Ls(o,null,p,u):Fe(s,o,p,u),o.child;case 11:return p=o.type,y=o.pendingProps,y=o.elementType===p?y:An(p,y),sm(s,o,p,y,u);case 7:return Fe(s,o,o.pendingProps,u),o.child;case 8:return Fe(s,o,o.pendingProps.children,u),o.child;case 12:return Fe(s,o,o.pendingProps.children,u),o.child;case 10:t:{if(p=o.type._context,y=o.pendingProps,v=o.memoizedProps,A=y.value,zt(_a,p._currentValue),p._currentValue=A,v!==null)if(bn(v.value,A)){if(v.children===y.children&&!Ve.current){o=Zn(s,o,u);break t}}else for(v=o.child,v!==null&&(v.return=o);v!==null;){var T=v.dependencies;if(T!==null){A=v.child;for(var M=T.firstContext;M!==null;){if(M.context===p){if(v.tag===1){M=Jn(-1,u&-u),M.tag=2;var z=v.updateQueue;if(z!==null){z=z.shared;var K=z.pending;K===null?M.next=M:(M.next=K.next,K.next=M),z.pending=M}}v.lanes|=u,M=v.alternate,M!==null&&(M.lanes|=u),Uc(v.return,u,o),T.lanes|=u;break}M=M.next}}else if(v.tag===10)A=v.type===o.type?null:v.child;else if(v.tag===18){if(A=v.return,A===null)throw Error(e(341));A.lanes|=u,T=A.alternate,T!==null&&(T.lanes|=u),Uc(A,u,o),A=v.sibling}else A=v.child;if(A!==null)A.return=v;else for(A=v;A!==null;){if(A===o){A=null;break}if(v=A.sibling,v!==null){v.return=A.return,A=v;break}A=A.return}v=A}Fe(s,o,y.children,u),o=o.child}return o;case 9:return y=o.type,p=o.pendingProps.children,Ds(o,u),y=on(y),p=p(y),o.flags|=1,Fe(s,o,p,u),o.child;case 14:return p=o.type,y=An(p,o.pendingProps),y=An(p.type,y),rm(s,o,p,y,u);case 15:return om(s,o,o.type,o.pendingProps,u);case 17:return p=o.type,y=o.pendingProps,y=o.elementType===p?y:An(p,y),ja(s,o),o.tag=1,ze(p)?(s=!0,ba(o)):s=!1,Ds(o,u),Qp(o,p,y),ou(o,p,y,u),uu(null,o,p,!0,s,u);case 19:return pm(s,o,u);case 22:return am(s,o,u)}throw Error(e(156,o.tag))};function jm(s,o){return yf(s,o)}function Yx(s,o,u,p){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(s,o,u,p){return new Yx(s,o,u,p)}function Ru(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Qx(s){if(typeof s=="function")return Ru(s)?1:0;if(s!=null){if(s=s.$$typeof,s===ft)return 11;if(s===xt)return 14}return 2}function ki(s,o){var u=s.alternate;return u===null?(u=cn(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function qa(s,o,u,p,y,v){var A=2;if(p=s,typeof s=="function")Ru(s)&&(A=1);else if(typeof s=="string")A=5;else t:switch(s){case O:return Zi(u.children,y,v,o);case L:A=8,y|=8;break;case H:return s=cn(12,u,o,y|2),s.elementType=H,s.lanes=v,s;case dt:return s=cn(13,u,o,y),s.elementType=dt,s.lanes=v,s;case nt:return s=cn(19,u,o,y),s.elementType=nt,s.lanes=v,s;case U:return Ya(u,y,v,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case W:A=10;break t;case Y:A=9;break t;case ft:A=11;break t;case xt:A=14;break t;case G:A=16,p=null;break t}throw Error(e(130,s==null?s:typeof s,""))}return o=cn(A,u,o,y),o.elementType=s,o.type=p,o.lanes=v,o}function Zi(s,o,u,p){return s=cn(7,s,p,o),s.lanes=u,s}function Ya(s,o,u,p){return s=cn(22,s,p,o),s.elementType=U,s.lanes=u,s.stateNode={isHidden:!1},s}function Mu(s,o,u){return s=cn(6,s,null,o),s.lanes=u,s}function Lu(s,o,u){return o=cn(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function Jx(s,o,u,p,y){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rc(0),this.expirationTimes=rc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rc(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Iu(s,o,u,p,y,v,A,T,M){return s=new Jx(s,o,u,T,M),o===1?(o=1,v===!0&&(o|=8)):o=0,v=cn(3,null,null,o),s.current=v,v.stateNode=s,v.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gc(v),s}function Zx(s,o,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:p==null?null:""+p,children:s,containerInfo:o,implementation:u}}function Bm(s){if(!s)return wi;s=s._reactInternals;t:{if(zi(s)!==s||s.tag!==1)throw Error(e(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break t;case 1:if(ze(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break t}}o=o.return}while(o!==null);throw Error(e(171))}if(s.tag===1){var u=s.type;if(ze(u))return fp(s,u,o)}return o}function Vm(s,o,u,p,y,v,A,T,M){return s=Iu(u,p,!0,s,y,v,A,T,M),s.context=Bm(null),u=s.current,p=Oe(),y=_i(u),v=Jn(p,y),v.callback=o??null,Ai(u,v,y),s.current.lanes=y,xr(s,y,p),Ue(s,p),s}function Qa(s,o,u,p){var y=o.current,v=Oe(),A=_i(y);return u=Bm(u),o.context===null?o.context=u:o.pendingContext=u,o=Jn(v,A),o.payload={element:s},p=p===void 0?null:p,p!==null&&(o.callback=p),s=Ai(y,o,A),s!==null&&(Cn(s,y,A,v),ka(s,y,A)),A}function Ja(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function zm(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function Du(s,o){zm(s,o),(s=s.alternate)&&zm(s,o)}function tA(){return null}var Hm=typeof reportError=="function"?reportError:function(s){console.error(s)};function Nu(s){this._internalRoot=s}Za.prototype.render=Nu.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(e(409));Qa(s,o,null,null)},Za.prototype.unmount=Nu.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Yi(function(){Qa(null,s,null,null)}),o[Xn]=null}};function Za(s){this._internalRoot=s}Za.prototype.unstable_scheduleHydration=function(s){if(s){var o=Cf();s={blockedOn:null,target:s,priority:o};for(var u=0;u<pi.length&&o!==0&&o<pi[u].priority;u++);pi.splice(u,0,s),u===0&&kf(s)}};function Fu(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function tl(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function $m(){}function eA(s,o,u,p,y){if(y){if(typeof p=="function"){var v=p;p=function(){var z=Ja(A);v.call(z)}}var A=Vm(o,p,s,0,null,!1,!1,"",$m);return s._reactRootContainer=A,s[Xn]=A.current,Nr(s.nodeType===8?s.parentNode:s),Yi(),A}for(;y=s.lastChild;)s.removeChild(y);if(typeof p=="function"){var T=p;p=function(){var z=Ja(M);T.call(z)}}var M=Iu(s,0,!1,null,null,!1,!1,"",$m);return s._reactRootContainer=M,s[Xn]=M.current,Nr(s.nodeType===8?s.parentNode:s),Yi(function(){Qa(o,M,u,p)}),M}function el(s,o,u,p,y){var v=u._reactRootContainer;if(v){var A=v;if(typeof y=="function"){var T=y;y=function(){var M=Ja(A);T.call(M)}}Qa(o,A,s,y)}else A=eA(u,o,s,y,p);return Ja(A)}Sf=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var u=br(o.pendingLanes);u!==0&&(oc(o,u|1),Ue(o,ee()),(Dt&6)===0&&(Bs=ee()+500,bi()))}break;case 13:Yi(function(){var p=Qn(s,1);if(p!==null){var y=Oe();Cn(p,s,1,y)}}),Du(s,1)}},ac=function(s){if(s.tag===13){var o=Qn(s,134217728);if(o!==null){var u=Oe();Cn(o,s,134217728,u)}Du(s,134217728)}},Ef=function(s){if(s.tag===13){var o=_i(s),u=Qn(s,o);if(u!==null){var p=Oe();Cn(u,s,o,p)}Du(s,o)}},Cf=function(){return Ft},_f=function(s,o){var u=Ft;try{return Ft=s,o()}finally{Ft=u}},Zl=function(s,o,u){switch(o){case"input":if(Pn(s,u),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==s&&p.form===s.form){var y=va(p);if(!y)throw Error(e(90));Se(p),Pn(p,y)}}}break;case"textarea":Xo(s,u);break;case"select":o=u.value,o!=null&&gn(s,!!u.multiple,o,!1)}},uf=Tu,hf=Yi;var nA={usingClientEntryPoint:!1,Events:[jr,_s,va,lf,cf,Tu]},Jr={findFiberByHostInstance:Hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iA={bundleType:Jr.bundleType,version:Jr.version,rendererPackageName:Jr.rendererPackageName,rendererConfig:Jr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=mf(s),s===null?null:s.stateNode},findFiberByHostInstance:Jr.findFiberByHostInstance||tA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nl.isDisabled&&nl.supportsFiber)try{Zo=nl.inject(iA),Rn=nl}catch{}}return We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nA,We.createPortal=function(s,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fu(o))throw Error(e(200));return Zx(s,o,null,u)},We.createRoot=function(s,o){if(!Fu(s))throw Error(e(299));var u=!1,p="",y=Hm;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(y=o.onRecoverableError)),o=Iu(s,1,!1,null,null,u,!1,p,y),s[Xn]=o.current,Nr(s.nodeType===8?s.parentNode:s),new Nu(o)},We.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(e(188)):(s=Object.keys(s).join(","),Error(e(268,s)));return s=mf(o),s=s===null?null:s.stateNode,s},We.flushSync=function(s){return Yi(s)},We.hydrate=function(s,o,u){if(!tl(o))throw Error(e(200));return el(null,s,o,!0,u)},We.hydrateRoot=function(s,o,u){if(!Fu(s))throw Error(e(405));var p=u!=null&&u.hydratedSources||null,y=!1,v="",A=Hm;if(u!=null&&(u.unstable_strictMode===!0&&(y=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(A=u.onRecoverableError)),o=Vm(o,null,s,1,u??null,y,!1,v,A),s[Xn]=o.current,Nr(s),p)for(s=0;s<p.length;s++)u=p[s],y=u._getVersion,y=y(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,y]:o.mutableSourceEagerHydrationData.push(u,y);return new Za(o)},We.render=function(s,o,u){if(!tl(o))throw Error(e(200));return el(null,s,o,!1,u)},We.unmountComponentAtNode=function(s){if(!tl(s))throw Error(e(40));return s._reactRootContainer?(Yi(function(){el(null,null,s,!1,function(){s._reactRootContainer=null,s[Xn]=null})}),!0):!1},We.unstable_batchedUpdates=Tu,We.unstable_renderSubtreeIntoContainer=function(s,o,u,p){if(!tl(u))throw Error(e(200));if(s==null||s._reactInternals===void 0)throw Error(e(38));return el(s,o,u,!1,p)},We.version="18.3.1-next-f1338f8080-20240426",We}var Qm;function hA(){if(Qm)return Bu.exports;Qm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Bu.exports=uA(),Bu.exports}var Jm;function dA(){if(Jm)return il;Jm=1;var i=hA();return il.createRoot=i.createRoot,il.hydrateRoot=i.hydrateRoot,il}var fA=dA(),P=Jh();const ls=iv(P);/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Zm="popstate";function pA(i={}){function t(n,r){let{pathname:a,search:l,hash:c}=n.location;return gh("",{pathname:a,search:l,hash:c},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function e(n,r){return typeof r=="string"?r:vo(r)}return gA(t,e,null,i)}function Yt(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function Un(i,t){if(!i){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function mA(){return Math.random().toString(36).substring(2,10)}function tg(i,t){return{usr:i.state,key:i.key,idx:t}}function gh(i,t,e=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof t=="string"?or(t):t,state:e,key:t&&t.key||n||mA()}}function vo({pathname:i="/",search:t="",hash:e=""}){return t&&t!=="?"&&(i+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(i+=e.charAt(0)==="#"?e:"#"+e),i}function or(i){let t={};if(i){let e=i.indexOf("#");e>=0&&(t.hash=i.substring(e),i=i.substring(0,e));let n=i.indexOf("?");n>=0&&(t.search=i.substring(n),i=i.substring(0,n)),i&&(t.pathname=i)}return t}function gA(i,t,e,n={}){let{window:r=document.defaultView,v5Compat:a=!1}=n,l=r.history,c="POP",h=null,d=f();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function f(){return(l.state||{idx:null}).idx}function m(){c="POP";let S=f(),E=S==null?null:S-d;d=S,h&&h({action:c,location:x.location,delta:E})}function g(S,E){c="PUSH";let _=gh(x.location,S,E);d=f()+1;let C=tg(_,d),R=x.createHref(_);try{l.pushState(C,"",R)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(R)}a&&h&&h({action:c,location:x.location,delta:1})}function w(S,E){c="REPLACE";let _=gh(x.location,S,E);d=f();let C=tg(_,d),R=x.createHref(_);l.replaceState(C,"",R),a&&h&&h({action:c,location:x.location,delta:0})}function b(S){return yA(S)}let x={get action(){return c},get location(){return i(r,l)},listen(S){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(Zm,m),h=S,()=>{r.removeEventListener(Zm,m),h=null}},createHref(S){return t(r,S)},createURL:b,encodeLocation(S){let E=b(S);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:w,go(S){return l.go(S)}};return x}function yA(i,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Yt(e,"No window.location.(origin|href) available to create URL");let n=typeof i=="string"?i:vo(i);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function sv(i,t,e="/"){return vA(i,t,e,!1)}function vA(i,t,e,n){let r=typeof t=="string"?or(t):t,a=si(r.pathname||"/",e);if(a==null)return null;let l=rv(i);wA(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let d=RA(a);c=kA(l[h],d,n)}return c}function rv(i,t=[],e=[],n="",r=!1){let a=(l,c,h=r,d)=>{let f={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&h)return;Yt(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let m=ii([n,f.relativePath]),g=e.concat(f);l.children&&l.children.length>0&&(Yt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),rv(l.children,t,g,m,h)),!(l.path==null&&!l.index)&&t.push({path:m,score:_A(m,l.index),routesMeta:g})};return i.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))a(l,c);else for(let h of ov(l.path))a(l,c,!0,h)}),t}function ov(i){let t=i.split("/");if(t.length===0)return[];let[e,...n]=t,r=e.endsWith("?"),a=e.replace(/\?$/,"");if(n.length===0)return r?[a,""]:[a];let l=ov(n.join("/")),c=[];return c.push(...l.map(h=>h===""?a:[a,h].join("/"))),r&&c.push(...l),c.map(h=>i.startsWith("/")&&h===""?"/":h)}function wA(i){i.sort((t,e)=>t.score!==e.score?e.score-t.score:TA(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var bA=/^:[\w-]+$/,xA=3,AA=2,SA=1,EA=10,CA=-2,eg=i=>i==="*";function _A(i,t){let e=i.split("/"),n=e.length;return e.some(eg)&&(n+=CA),t&&(n+=AA),e.filter(r=>!eg(r)).reduce((r,a)=>r+(bA.test(a)?xA:a===""?SA:EA),n)}function TA(i,t){return i.length===t.length&&i.slice(0,-1).every((n,r)=>n===t[r])?i[i.length-1]-t[t.length-1]:0}function kA(i,t,e=!1){let{routesMeta:n}=i,r={},a="/",l=[];for(let c=0;c<n.length;++c){let h=n[c],d=c===n.length-1,f=a==="/"?t:t.slice(a.length)||"/",m=Sl({path:h.relativePath,caseSensitive:h.caseSensitive,end:d},f),g=h.route;if(!m&&d&&e&&!n[n.length-1].route.index&&(m=Sl({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},f)),!m)return null;Object.assign(r,m.params),l.push({params:r,pathname:ii([a,m.pathname]),pathnameBase:DA(ii([a,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(a=ii([a,m.pathnameBase]))}return l}function Sl(i,t){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[e,n]=PA(i.path,i.caseSensitive,i.end),r=t.match(e);if(!r)return null;let a=r[0],l=a.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:n.reduce((d,{paramName:f,isOptional:m},g)=>{if(f==="*"){let b=c[g]||"";l=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const w=c[g];return m&&!w?d[f]=void 0:d[f]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:l,pattern:i}}function PA(i,t=!1,e=!0){Un(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],r="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(n.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(n.push({paramName:"*"}),r+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?r+="\\/*$":i!==""&&i!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),n]}function RA(i){try{return i.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Un(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),i}}function si(i,t){if(t==="/")return i;if(!i.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=i.charAt(e);return n&&n!=="/"?null:i.slice(e)||"/"}function MA(i,t="/"){let{pathname:e,search:n="",hash:r=""}=typeof i=="string"?or(i):i;return{pathname:e?e.startsWith("/")?e:LA(e,t):t,search:NA(n),hash:FA(r)}}function LA(i,t){let e=t.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?e.length>1&&e.pop():r!=="."&&e.push(r)}),e.length>1?e.join("/"):"/"}function Hu(i,t,e,n){return`Cannot include a '${i}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IA(i){return i.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function av(i){let t=IA(i);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function lv(i,t,e,n=!1){let r;typeof i=="string"?r=or(i):(r={...i},Yt(!r.pathname||!r.pathname.includes("?"),Hu("?","pathname","search",r)),Yt(!r.pathname||!r.pathname.includes("#"),Hu("#","pathname","hash",r)),Yt(!r.search||!r.search.includes("#"),Hu("#","search","hash",r)));let a=i===""||r.pathname==="",l=a?"/":r.pathname,c;if(l==null)c=e;else{let m=t.length-1;if(!n&&l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),m-=1;r.pathname=g.join("/")}c=m>=0?t[m]:"/"}let h=MA(r,c),d=l&&l!=="/"&&l.endsWith("/"),f=(a||l===".")&&e.endsWith("/");return!h.pathname.endsWith("/")&&(d||f)&&(h.pathname+="/"),h}var ii=i=>i.join("/").replace(/\/\/+/g,"/"),DA=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),NA=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,FA=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function OA(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var cv=["POST","PUT","PATCH","DELETE"];new Set(cv);var jA=["GET",...cv];new Set(jA);var ar=P.createContext(null);ar.displayName="DataRouter";var Nl=P.createContext(null);Nl.displayName="DataRouterState";P.createContext(!1);var uv=P.createContext({isTransitioning:!1});uv.displayName="ViewTransition";var BA=P.createContext(new Map);BA.displayName="Fetchers";var VA=P.createContext(null);VA.displayName="Await";var Wn=P.createContext(null);Wn.displayName="Navigation";var Ro=P.createContext(null);Ro.displayName="Location";var ci=P.createContext({outlet:null,matches:[],isDataRoute:!1});ci.displayName="Route";var Zh=P.createContext(null);Zh.displayName="RouteError";function zA(i,{relative:t}={}){Yt(Mo(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=P.useContext(Wn),{hash:r,pathname:a,search:l}=Lo(i,{relative:t}),c=a;return e!=="/"&&(c=a==="/"?e:ii([e,a])),n.createHref({pathname:c,search:l,hash:r})}function Mo(){return P.useContext(Ro)!=null}function Oi(){return Yt(Mo(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Ro).location}var hv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function dv(i){P.useContext(Wn).static||P.useLayoutEffect(i)}function HA(){let{isDataRoute:i}=P.useContext(ci);return i?eS():$A()}function $A(){Yt(Mo(),"useNavigate() may be used only in the context of a <Router> component.");let i=P.useContext(ar),{basename:t,navigator:e}=P.useContext(Wn),{matches:n}=P.useContext(ci),{pathname:r}=Oi(),a=JSON.stringify(av(n)),l=P.useRef(!1);return dv(()=>{l.current=!0}),P.useCallback((h,d={})=>{if(Un(l.current,hv),!l.current)return;if(typeof h=="number"){e.go(h);return}let f=lv(h,JSON.parse(a),r,d.relative==="path");i==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:ii([t,f.pathname])),(d.replace?e.replace:e.push)(f,d.state,d)},[t,e,a,r,i])}P.createContext(null);function Lo(i,{relative:t}={}){let{matches:e}=P.useContext(ci),{pathname:n}=Oi(),r=JSON.stringify(av(e));return P.useMemo(()=>lv(i,JSON.parse(r),n,t==="path"),[i,r,n,t])}function UA(i,t){return fv(i,t)}function fv(i,t,e,n,r){Yt(Mo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=P.useContext(Wn),{matches:l}=P.useContext(ci),c=l[l.length-1],h=c?c.params:{},d=c?c.pathname:"/",f=c?c.pathnameBase:"/",m=c&&c.route;{let _=m&&m.path||"";pv(d,!m||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let g=Oi(),w;if(t){let _=typeof t=="string"?or(t):t;Yt(f==="/"||_.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${_.pathname}" was given in the \`location\` prop.`),w=_}else w=g;let b=w.pathname||"/",x=b;if(f!=="/"){let _=f.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(_.length).join("/")}let S=sv(i,{pathname:x});Un(m||S!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Un(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=qA(S&&S.map(_=>Object.assign({},_,{params:Object.assign({},h,_.params),pathname:ii([f,a.encodeLocation?a.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?f:ii([f,a.encodeLocation?a.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),l,e,n,r);return t&&E?P.createElement(Ro.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},E):E}function WA(){let i=tS(),t=OA(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),e=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",i),l=P.createElement(P.Fragment,null,P.createElement("p",null,"💿 Hey developer 👋"),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:a},"ErrorBoundary")," or"," ",P.createElement("code",{style:a},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),e?P.createElement("pre",{style:r},e):null,l)}var GA=P.createElement(WA,null),XA=class extends P.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,t){return t.location!==i.location||t.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:t.error,location:t.location,revalidation:i.revalidation||t.revalidation}}componentDidCatch(i,t){this.props.unstable_onError?this.props.unstable_onError(i,t):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?P.createElement(ci.Provider,{value:this.props.routeContext},P.createElement(Zh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function KA({routeContext:i,match:t,children:e}){let n=P.useContext(ar);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),P.createElement(ci.Provider,{value:i},e)}function qA(i,t=[],e=null,n=null,r=null){if(i==null){if(!e)return null;if(e.errors)i=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)i=e.matches;else return null}let a=i,l=e?.errors;if(l!=null){let d=a.findIndex(f=>f.route.id&&l?.[f.route.id]!==void 0);Yt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,h=-1;if(e)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(h=d),f.route.id){let{loaderData:m,errors:g}=e,w=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!g||g[f.route.id]===void 0);if(f.route.lazy||w){c=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((d,f,m)=>{let g,w=!1,b=null,x=null;e&&(g=l&&f.route.id?l[f.route.id]:void 0,b=f.route.errorElement||GA,c&&(h<0&&m===0?(pv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,x=null):h===m&&(w=!0,x=f.route.hydrateFallbackElement||null)));let S=t.concat(a.slice(0,m+1)),E=()=>{let _;return g?_=b:w?_=x:f.route.Component?_=P.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=d,P.createElement(KA,{match:f,routeContext:{outlet:d,matches:S,isDataRoute:e!=null},children:_})};return e&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?P.createElement(XA,{location:e.location,revalidation:e.revalidation,component:b,error:g,children:E(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:n}):E()},null)}function td(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YA(i){let t=P.useContext(ar);return Yt(t,td(i)),t}function QA(i){let t=P.useContext(Nl);return Yt(t,td(i)),t}function JA(i){let t=P.useContext(ci);return Yt(t,td(i)),t}function ed(i){let t=JA(i),e=t.matches[t.matches.length-1];return Yt(e.route.id,`${i} can only be used on routes that contain a unique "id"`),e.route.id}function ZA(){return ed("useRouteId")}function tS(){let i=P.useContext(Zh),t=QA("useRouteError"),e=ed("useRouteError");return i!==void 0?i:t.errors?.[e]}function eS(){let{router:i}=YA("useNavigate"),t=ed("useNavigate"),e=P.useRef(!1);return dv(()=>{e.current=!0}),P.useCallback(async(r,a={})=>{Un(e.current,hv),e.current&&(typeof r=="number"?i.navigate(r):await i.navigate(r,{fromRouteId:t,...a}))},[i,t])}var ng={};function pv(i,t,e){!t&&!ng[i]&&(ng[i]=!0,Un(!1,e))}P.memo(nS);function nS({routes:i,future:t,state:e,unstable_onError:n}){return fv(i,void 0,e,n,t)}function Hs(i){Yt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iS({basename:i="/",children:t=null,location:e,navigationType:n="POP",navigator:r,static:a=!1}){Yt(!Mo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=i.replace(/^\/*/,"/"),c=P.useMemo(()=>({basename:l,navigator:r,static:a,future:{}}),[l,r,a]);typeof e=="string"&&(e=or(e));let{pathname:h="/",search:d="",hash:f="",state:m=null,key:g="default"}=e,w=P.useMemo(()=>{let b=si(h,l);return b==null?null:{location:{pathname:b,search:d,hash:f,state:m,key:g},navigationType:n}},[l,h,d,f,m,g,n]);return Un(w!=null,`<Router basename="${l}"> is not able to match the URL "${h}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:P.createElement(Wn.Provider,{value:c},P.createElement(Ro.Provider,{children:t,value:w}))}function sS({children:i,location:t}){return UA(yh(i),t)}function yh(i,t=[]){let e=[];return P.Children.forEach(i,(n,r)=>{if(!P.isValidElement(n))return;let a=[...t,r];if(n.type===P.Fragment){e.push.apply(e,yh(n.props.children,a));return}Yt(n.type===Hs,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Yt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=yh(n.props.children,a)),e.push(l)}),e}var yl="get",vl="application/x-www-form-urlencoded";function Fl(i){return i!=null&&typeof i.tagName=="string"}function rS(i){return Fl(i)&&i.tagName.toLowerCase()==="button"}function oS(i){return Fl(i)&&i.tagName.toLowerCase()==="form"}function aS(i){return Fl(i)&&i.tagName.toLowerCase()==="input"}function lS(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function cS(i,t){return i.button===0&&(!t||t==="_self")&&!lS(i)}var sl=null;function uS(){if(sl===null)try{new FormData(document.createElement("form"),0),sl=!1}catch{sl=!0}return sl}var hS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $u(i){return i!=null&&!hS.has(i)?(Un(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vl}"`),null):i}function dS(i,t){let e,n,r,a,l;if(oS(i)){let c=i.getAttribute("action");n=c?si(c,t):null,e=i.getAttribute("method")||yl,r=$u(i.getAttribute("enctype"))||vl,a=new FormData(i)}else if(rS(i)||aS(i)&&(i.type==="submit"||i.type==="image")){let c=i.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=i.getAttribute("formaction")||c.getAttribute("action");if(n=h?si(h,t):null,e=i.getAttribute("formmethod")||c.getAttribute("method")||yl,r=$u(i.getAttribute("formenctype"))||$u(c.getAttribute("enctype"))||vl,a=new FormData(c,i),!uS()){let{name:d,type:f,value:m}=i;if(f==="image"){let g=d?`${d}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else d&&a.append(d,m)}}else{if(Fl(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=yl,n=null,r=vl,l=i}return a&&r==="text/plain"&&(l=a,a=void 0),{action:n,method:e.toLowerCase(),encType:r,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function nd(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function fS(i,t,e){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname=`_root.${e}`:t&&si(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${e}`,n}async function pS(i,t){if(i.id in t)return t[i.id];try{let e=await import(i.module);return t[i.id]=e,e}catch(e){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function mS(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function gS(i,t,e){let n=await Promise.all(i.map(async r=>{let a=t.routes[r.route.id];if(a){let l=await pS(a,e);return l.links?l.links():[]}return[]}));return bS(n.flat(1).filter(mS).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function ig(i,t,e,n,r,a){let l=(h,d)=>e[d]?h.route.id!==e[d].route.id:!0,c=(h,d)=>e[d].pathname!==h.pathname||e[d].route.path?.endsWith("*")&&e[d].params["*"]!==h.params["*"];return a==="assets"?t.filter((h,d)=>l(h,d)||c(h,d)):a==="data"?t.filter((h,d)=>{let f=n.routes[h.route.id];if(!f||!f.hasLoader)return!1;if(l(h,d)||c(h,d))return!0;if(h.route.shouldRevalidate){let m=h.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function yS(i,t,{includeHydrateFallback:e}={}){return vS(i.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),e&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function vS(i){return[...new Set(i)]}function wS(i){let t={},e=Object.keys(i).sort();for(let n of e)t[n]=i[n];return t}function bS(i,t){let e=new Set;return new Set(t),i.reduce((n,r)=>{let a=JSON.stringify(wS(r));return e.has(a)||(e.add(a),n.push({key:a,link:r})),n},[])}function mv(){let i=P.useContext(ar);return nd(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function xS(){let i=P.useContext(Nl);return nd(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var id=P.createContext(void 0);id.displayName="FrameworkContext";function gv(){let i=P.useContext(id);return nd(i,"You must render this element inside a <HydratedRouter> element"),i}function AS(i,t){let e=P.useContext(id),[n,r]=P.useState(!1),[a,l]=P.useState(!1),{onFocus:c,onBlur:h,onMouseEnter:d,onMouseLeave:f,onTouchStart:m}=t,g=P.useRef(null);P.useEffect(()=>{if(i==="render"&&l(!0),i==="viewport"){let x=E=>{E.forEach(_=>{l(_.isIntersecting)})},S=new IntersectionObserver(x,{threshold:.5});return g.current&&S.observe(g.current),()=>{S.disconnect()}}},[i]),P.useEffect(()=>{if(n){let x=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(x)}}},[n]);let w=()=>{r(!0)},b=()=>{r(!1),l(!1)};return e?i!=="intent"?[a,g,{}]:[a,g,{onFocus:to(c,w),onBlur:to(h,b),onMouseEnter:to(d,w),onMouseLeave:to(f,b),onTouchStart:to(m,w)}]:[!1,g,{}]}function to(i,t){return e=>{i&&i(e),e.defaultPrevented||t(e)}}function SS({page:i,...t}){let{router:e}=mv(),n=P.useMemo(()=>sv(e.routes,i,e.basename),[e.routes,i,e.basename]);return n?P.createElement(CS,{page:i,matches:n,...t}):null}function ES(i){let{manifest:t,routeModules:e}=gv(),[n,r]=P.useState([]);return P.useEffect(()=>{let a=!1;return gS(i,t,e).then(l=>{a||r(l)}),()=>{a=!0}},[i,t,e]),n}function CS({page:i,matches:t,...e}){let n=Oi(),{manifest:r,routeModules:a}=gv(),{basename:l}=mv(),{loaderData:c,matches:h}=xS(),d=P.useMemo(()=>ig(i,t,h,r,n,"data"),[i,t,h,r,n]),f=P.useMemo(()=>ig(i,t,h,r,n,"assets"),[i,t,h,r,n]),m=P.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let b=new Set,x=!1;if(t.forEach(E=>{let _=r.routes[E.route.id];!_||!_.hasLoader||(!d.some(C=>C.route.id===E.route.id)&&E.route.id in c&&a[E.route.id]?.shouldRevalidate||_.hasClientLoader?x=!0:b.add(E.route.id))}),b.size===0)return[];let S=fS(i,l,"data");return x&&b.size>0&&S.searchParams.set("_routes",t.filter(E=>b.has(E.route.id)).map(E=>E.route.id).join(",")),[S.pathname+S.search]},[l,c,n,r,d,t,i,a]),g=P.useMemo(()=>yS(f,r),[f,r]),w=ES(f);return P.createElement(P.Fragment,null,m.map(b=>P.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...e})),g.map(b=>P.createElement("link",{key:b,rel:"modulepreload",href:b,...e})),w.map(({key:b,link:x})=>P.createElement("link",{key:b,nonce:e.nonce,...x})))}function _S(...i){return t=>{i.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var yv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yv&&(window.__reactRouterVersion="7.9.1")}catch{}function TS({basename:i,children:t,window:e}){let n=P.useRef();n.current==null&&(n.current=pA({window:e,v5Compat:!0}));let r=n.current,[a,l]=P.useState({action:r.action,location:r.location}),c=P.useCallback(h=>{P.startTransition(()=>l(h))},[l]);return P.useLayoutEffect(()=>r.listen(c),[r,c]),P.createElement(iS,{basename:i,children:t,location:a.location,navigationType:a.action,navigator:r})}var vv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,El=P.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:r,reloadDocument:a,replace:l,state:c,target:h,to:d,preventScrollReset:f,viewTransition:m,...g},w){let{basename:b}=P.useContext(Wn),x=typeof d=="string"&&vv.test(d),S,E=!1;if(typeof d=="string"&&x&&(S=d,yv))try{let H=new URL(window.location.href),W=d.startsWith("//")?new URL(H.protocol+d):new URL(d),Y=si(W.pathname,b);W.origin===H.origin&&Y!=null?d=Y+W.search+W.hash:E=!0}catch{Un(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=zA(d,{relative:r}),[C,R,k]=AS(n,g),N=MS(d,{replace:l,state:c,target:h,preventScrollReset:f,relative:r,viewTransition:m});function O(H){t&&t(H),H.defaultPrevented||N(H)}let L=P.createElement("a",{...g,...k,href:S||_,onClick:E||a?t:O,ref:_S(w,R),target:h,"data-discover":!x&&e==="render"?"true":void 0});return C&&!x?P.createElement(P.Fragment,null,L,P.createElement(SS,{page:_})):L});El.displayName="Link";var kS=P.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:r=!1,style:a,to:l,viewTransition:c,children:h,...d},f){let m=Lo(l,{relative:d.relative}),g=Oi(),w=P.useContext(Nl),{navigator:b,basename:x}=P.useContext(Wn),S=w!=null&&FS(m)&&c===!0,E=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,_=g.pathname,C=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;e||(_=_.toLowerCase(),C=C?C.toLowerCase():null,E=E.toLowerCase()),C&&x&&(C=si(C,x)||C);const R=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let k=_===E||!r&&_.startsWith(E)&&_.charAt(R)==="/",N=C!=null&&(C===E||!r&&C.startsWith(E)&&C.charAt(E.length)==="/"),O={isActive:k,isPending:N,isTransitioning:S},L=k?t:void 0,H;typeof n=="function"?H=n(O):H=[n,k?"active":null,N?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let W=typeof a=="function"?a(O):a;return P.createElement(El,{...d,"aria-current":L,className:H,ref:f,style:W,to:l,viewTransition:c},typeof h=="function"?h(O):h)});kS.displayName="NavLink";var PS=P.forwardRef(({discover:i="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:r,state:a,method:l=yl,action:c,onSubmit:h,relative:d,preventScrollReset:f,viewTransition:m,...g},w)=>{let b=DS(),x=NS(c,{relative:d}),S=l.toLowerCase()==="get"?"get":"post",E=typeof c=="string"&&vv.test(c),_=C=>{if(h&&h(C),C.defaultPrevented)return;C.preventDefault();let R=C.nativeEvent.submitter,k=R?.getAttribute("formmethod")||l;b(R||C.currentTarget,{fetcherKey:t,method:k,navigate:e,replace:r,state:a,relative:d,preventScrollReset:f,viewTransition:m})};return P.createElement("form",{ref:w,method:S,action:x,onSubmit:n?h:_,...g,"data-discover":!E&&i==="render"?"true":void 0})});PS.displayName="Form";function RS(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wv(i){let t=P.useContext(ar);return Yt(t,RS(i)),t}function MS(i,{target:t,replace:e,state:n,preventScrollReset:r,relative:a,viewTransition:l}={}){let c=HA(),h=Oi(),d=Lo(i,{relative:a});return P.useCallback(f=>{if(cS(f,t)){f.preventDefault();let m=e!==void 0?e:vo(h)===vo(d);c(i,{replace:m,state:n,preventScrollReset:r,relative:a,viewTransition:l})}},[h,c,d,e,n,t,i,r,a,l])}var LS=0,IS=()=>`__${String(++LS)}__`;function DS(){let{router:i}=wv("useSubmit"),{basename:t}=P.useContext(Wn),e=ZA();return P.useCallback(async(n,r={})=>{let{action:a,method:l,encType:c,formData:h,body:d}=dS(n,t);if(r.navigate===!1){let f=r.fetcherKey||IS();await i.fetch(f,e,r.action||a,{preventScrollReset:r.preventScrollReset,formData:h,body:d,formMethod:r.method||l,formEncType:r.encType||c,flushSync:r.flushSync})}else await i.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:h,body:d,formMethod:r.method||l,formEncType:r.encType||c,replace:r.replace,state:r.state,fromRouteId:e,flushSync:r.flushSync,viewTransition:r.viewTransition})},[i,t,e])}function NS(i,{relative:t}={}){let{basename:e}=P.useContext(Wn),n=P.useContext(ci);Yt(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),a={...Lo(i||".",{relative:t})},l=Oi();if(i==null){a.search=l.search;let c=new URLSearchParams(a.search),h=c.getAll("index");if(h.some(f=>f==="")){c.delete("index"),h.filter(m=>m).forEach(m=>c.append("index",m));let f=c.toString();a.search=f?`?${f}`:""}}return(!i||i===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(a.pathname=a.pathname==="/"?e:ii([e,a.pathname])),vo(a)}function FS(i,{relative:t}={}){let e=P.useContext(uv);Yt(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=wv("useViewTransitionState"),r=Lo(i,{relative:t});if(!e.isTransitioning)return!1;let a=si(e.currentLocation.pathname,n)||e.currentLocation.pathname,l=si(e.nextLocation.pathname,n)||e.nextLocation.pathname;return Sl(r.pathname,l)!=null||Sl(r.pathname,a)!=null}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jS=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),sg=i=>{const t=jS(i);return t.charAt(0).toUpperCase()+t.slice(1)},bv=(...i)=>i.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=P.forwardRef(({color:i="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:r="",children:a,iconNode:l,...c},h)=>P.createElement("svg",{ref:h,...BS,width:t,height:t,stroke:i,strokeWidth:n?Number(e)*24/Number(t):e,className:bv("lucide",r),...c},[...l.map(([d,f])=>P.createElement(d,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=(i,t)=>{const e=P.forwardRef(({className:n,...r},a)=>P.createElement(VS,{ref:a,iconNode:t,className:bv(`lucide-${OS(sg(i))}`,`lucide-${i}`,n),...r}));return e.displayName=sg(i),e};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],HS=kn("briefcase",zS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],US=kn("external-link",$S);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],GS=kn("file-text",WS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],Cl=kn("github",XS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],qS=kn("house",KS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],xv=kn("linkedin",YS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],JS=kn("mail",QS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],t1=kn("moon",ZS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],n1=kn("send",e1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],s1=kn("sun",i1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],o1=kn("user",r1);function rg(i,t){if(typeof i=="function")return i(t);i!=null&&(i.current=t)}function a1(...i){return t=>{let e=!1;const n=i.map(r=>{const a=rg(r,t);return!e&&typeof a=="function"&&(e=!0),a});if(e)return()=>{for(let r=0;r<n.length;r++){const a=n[r];typeof a=="function"?a():rg(i[r],null)}}}}function l1(i){const t=c1(i),e=P.forwardRef((n,r)=>{const{children:a,...l}=n,c=P.Children.toArray(a),h=c.find(h1);if(h){const d=h.props.children,f=c.map(m=>m===h?P.Children.count(d)>1?P.Children.only(null):P.isValidElement(d)?d.props.children:null:m);return F.jsx(t,{...l,ref:r,children:P.isValidElement(d)?P.cloneElement(d,void 0,f):null})}return F.jsx(t,{...l,ref:r,children:a})});return e.displayName=`${i}.Slot`,e}var Av=l1("Slot");function c1(i){const t=P.forwardRef((e,n)=>{const{children:r,...a}=e;if(P.isValidElement(r)){const l=f1(r),c=d1(a,r.props);return r.type!==P.Fragment&&(c.ref=n?a1(n,l):l),P.cloneElement(r,c)}return P.Children.count(r)>1?P.Children.only(null):null});return t.displayName=`${i}.SlotClone`,t}var u1=Symbol("radix.slottable");function h1(i){return P.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===u1}function d1(i,t){const e={...t};for(const n in t){const r=i[n],a=t[n];/^on[A-Z]/.test(n)?r&&a?e[n]=(...c)=>{const h=a(...c);return r(...c),h}:r&&(e[n]=r):n==="style"?e[n]={...r,...a}:n==="className"&&(e[n]=[r,a].filter(Boolean).join(" "))}return{...i,...e}}function f1(i){let t=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?i.ref:(t=Object.getOwnPropertyDescriptor(i,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?i.props.ref:i.props.ref||i.ref)}function Sv(i){var t,e,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var r=i.length;for(t=0;t<r;t++)i[t]&&(e=Sv(i[t]))&&(n&&(n+=" "),n+=e)}else for(e in i)i[e]&&(n&&(n+=" "),n+=e);return n}function lr(){for(var i,t,e=0,n="",r=arguments.length;e<r;e++)(i=arguments[e])&&(t=Sv(i))&&(n&&(n+=" "),n+=t);return n}const og=i=>typeof i=="boolean"?`${i}`:i===0?"0":i,ag=lr,Ev=(i,t)=>e=>{var n;if(t?.variants==null)return ag(i,e?.class,e?.className);const{variants:r,defaultVariants:a}=t,l=Object.keys(r).map(d=>{const f=e?.[d],m=a?.[d];if(f===null)return null;const g=og(f)||og(m);return r[d][g]}),c=e&&Object.entries(e).reduce((d,f)=>{let[m,g]=f;return g===void 0||(d[m]=g),d},{}),h=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,f)=>{let{class:m,className:g,...w}=f;return Object.entries(w).every(b=>{let[x,S]=b;return Array.isArray(S)?S.includes({...a,...c}[x]):{...a,...c}[x]===S})?[...d,m,g]:d},[]);return ag(i,l,h,e?.class,e?.className)},sd="-",p1=i=>{const t=g1(i),{conflictingClassGroups:e,conflictingClassGroupModifiers:n}=i;return{getClassGroupId:l=>{const c=l.split(sd);return c[0]===""&&c.length!==1&&c.shift(),Cv(c,t)||m1(l)},getConflictingClassGroupIds:(l,c)=>{const h=e[l]||[];return c&&n[l]?[...h,...n[l]]:h}}},Cv=(i,t)=>{if(i.length===0)return t.classGroupId;const e=i[0],n=t.nextPart.get(e),r=n?Cv(i.slice(1),n):void 0;if(r)return r;if(t.validators.length===0)return;const a=i.join(sd);return t.validators.find(({validator:l})=>l(a))?.classGroupId},lg=/^\[(.+)\]$/,m1=i=>{if(lg.test(i)){const t=lg.exec(i)[1],e=t?.substring(0,t.indexOf(":"));if(e)return"arbitrary.."+e}},g1=i=>{const{theme:t,classGroups:e}=i,n={nextPart:new Map,validators:[]};for(const r in e)vh(e[r],n,r,t);return n},vh=(i,t,e,n)=>{i.forEach(r=>{if(typeof r=="string"){const a=r===""?t:cg(t,r);a.classGroupId=e;return}if(typeof r=="function"){if(y1(r)){vh(r(n),t,e,n);return}t.validators.push({validator:r,classGroupId:e});return}Object.entries(r).forEach(([a,l])=>{vh(l,cg(t,a),e,n)})})},cg=(i,t)=>{let e=i;return t.split(sd).forEach(n=>{e.nextPart.has(n)||e.nextPart.set(n,{nextPart:new Map,validators:[]}),e=e.nextPart.get(n)}),e},y1=i=>i.isThemeGetter,v1=i=>{if(i<1)return{get:()=>{},set:()=>{}};let t=0,e=new Map,n=new Map;const r=(a,l)=>{e.set(a,l),t++,t>i&&(t=0,n=e,e=new Map)};return{get(a){let l=e.get(a);if(l!==void 0)return l;if((l=n.get(a))!==void 0)return r(a,l),l},set(a,l){e.has(a)?e.set(a,l):r(a,l)}}},wh="!",bh=":",w1=bh.length,b1=i=>{const{prefix:t,experimentalParseClassName:e}=i;let n=r=>{const a=[];let l=0,c=0,h=0,d;for(let b=0;b<r.length;b++){let x=r[b];if(l===0&&c===0){if(x===bh){a.push(r.slice(h,b)),h=b+w1;continue}if(x==="/"){d=b;continue}}x==="["?l++:x==="]"?l--:x==="("?c++:x===")"&&c--}const f=a.length===0?r:r.substring(h),m=x1(f),g=m!==f,w=d&&d>h?d-h:void 0;return{modifiers:a,hasImportantModifier:g,baseClassName:m,maybePostfixModifierPosition:w}};if(t){const r=t+bh,a=n;n=l=>l.startsWith(r)?a(l.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(e){const r=n;n=a=>e({className:a,parseClassName:r})}return n},x1=i=>i.endsWith(wh)?i.substring(0,i.length-1):i.startsWith(wh)?i.substring(1):i,A1=i=>{const t=Object.fromEntries(i.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const r=[];let a=[];return n.forEach(l=>{l[0]==="["||t[l]?(r.push(...a.sort(),l),a=[]):a.push(l)}),r.push(...a.sort()),r}},S1=i=>({cache:v1(i.cacheSize),parseClassName:b1(i),sortModifiers:A1(i),...p1(i)}),E1=/\s+/,C1=(i,t)=>{const{parseClassName:e,getClassGroupId:n,getConflictingClassGroupIds:r,sortModifiers:a}=t,l=[],c=i.trim().split(E1);let h="";for(let d=c.length-1;d>=0;d-=1){const f=c[d],{isExternal:m,modifiers:g,hasImportantModifier:w,baseClassName:b,maybePostfixModifierPosition:x}=e(f);if(m){h=f+(h.length>0?" "+h:h);continue}let S=!!x,E=n(S?b.substring(0,x):b);if(!E){if(!S){h=f+(h.length>0?" "+h:h);continue}if(E=n(b),!E){h=f+(h.length>0?" "+h:h);continue}S=!1}const _=a(g).join(":"),C=w?_+wh:_,R=C+E;if(l.includes(R))continue;l.push(R);const k=r(E,S);for(let N=0;N<k.length;++N){const O=k[N];l.push(C+O)}h=f+(h.length>0?" "+h:h)}return h};function _1(){let i=0,t,e,n="";for(;i<arguments.length;)(t=arguments[i++])&&(e=_v(t))&&(n&&(n+=" "),n+=e);return n}const _v=i=>{if(typeof i=="string")return i;let t,e="";for(let n=0;n<i.length;n++)i[n]&&(t=_v(i[n]))&&(e&&(e+=" "),e+=t);return e};function T1(i,...t){let e,n,r,a=l;function l(h){const d=t.reduce((f,m)=>m(f),i());return e=S1(d),n=e.cache.get,r=e.cache.set,a=c,c(h)}function c(h){const d=n(h);if(d)return d;const f=C1(h,e);return r(h,f),f}return function(){return a(_1.apply(null,arguments))}}const pe=i=>{const t=e=>e[i]||[];return t.isThemeGetter=!0,t},Tv=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,kv=/^\((?:(\w[\w-]*):)?(.+)\)$/i,k1=/^\d+\/\d+$/,P1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,R1=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,M1=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,L1=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,I1=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,zs=i=>k1.test(i),Pt=i=>!!i&&!Number.isNaN(Number(i)),Ri=i=>!!i&&Number.isInteger(Number(i)),Uu=i=>i.endsWith("%")&&Pt(i.slice(0,-1)),ei=i=>P1.test(i),D1=()=>!0,N1=i=>R1.test(i)&&!M1.test(i),Pv=()=>!1,F1=i=>L1.test(i),O1=i=>I1.test(i),j1=i=>!lt(i)&&!ct(i),B1=i=>cr(i,Lv,Pv),lt=i=>Tv.test(i),ts=i=>cr(i,Iv,N1),Wu=i=>cr(i,U1,Pt),ug=i=>cr(i,Rv,Pv),V1=i=>cr(i,Mv,O1),rl=i=>cr(i,Dv,F1),ct=i=>kv.test(i),eo=i=>ur(i,Iv),z1=i=>ur(i,W1),hg=i=>ur(i,Rv),H1=i=>ur(i,Lv),$1=i=>ur(i,Mv),ol=i=>ur(i,Dv,!0),cr=(i,t,e)=>{const n=Tv.exec(i);return n?n[1]?t(n[1]):e(n[2]):!1},ur=(i,t,e=!1)=>{const n=kv.exec(i);return n?n[1]?t(n[1]):e:!1},Rv=i=>i==="position"||i==="percentage",Mv=i=>i==="image"||i==="url",Lv=i=>i==="length"||i==="size"||i==="bg-size",Iv=i=>i==="length",U1=i=>i==="number",W1=i=>i==="family-name",Dv=i=>i==="shadow",G1=()=>{const i=pe("color"),t=pe("font"),e=pe("text"),n=pe("font-weight"),r=pe("tracking"),a=pe("leading"),l=pe("breakpoint"),c=pe("container"),h=pe("spacing"),d=pe("radius"),f=pe("shadow"),m=pe("inset-shadow"),g=pe("text-shadow"),w=pe("drop-shadow"),b=pe("blur"),x=pe("perspective"),S=pe("aspect"),E=pe("ease"),_=pe("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...R(),ct,lt],N=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],L=()=>[ct,lt,h],H=()=>[zs,"full","auto",...L()],W=()=>[Ri,"none","subgrid",ct,lt],Y=()=>["auto",{span:["full",Ri,ct,lt]},Ri,ct,lt],ft=()=>[Ri,"auto",ct,lt],dt=()=>["auto","min","max","fr",ct,lt],nt=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],xt=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...L()],U=()=>[zs,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...L()],B=()=>[i,ct,lt],tt=()=>[...R(),hg,ug,{position:[ct,lt]}],Q=()=>["no-repeat",{repeat:["","x","y","space","round"]}],D=()=>["auto","cover","contain",H1,B1,{size:[ct,lt]}],$=()=>[Uu,eo,ts],Z=()=>["","none","full",d,ct,lt],st=()=>["",Pt,eo,ts],mt=()=>["solid","dashed","dotted","double"],wt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],et=()=>[Pt,Uu,hg,ug],_t=()=>["","none",b,ct,lt],kt=()=>["none",Pt,ct,lt],Tt=()=>["none",Pt,ct,lt],ge=()=>[Pt,ct,lt],Se=()=>[zs,"full",...L()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ei],breakpoint:[ei],color:[D1],container:[ei],"drop-shadow":[ei],ease:["in","out","in-out"],font:[j1],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ei],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ei],shadow:[ei],spacing:["px",Pt],text:[ei],"text-shadow":[ei],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",zs,lt,ct,S]}],container:["container"],columns:[{columns:[Pt,lt,ct,c]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:H()}],"inset-x":[{"inset-x":H()}],"inset-y":[{"inset-y":H()}],start:[{start:H()}],end:[{end:H()}],top:[{top:H()}],right:[{right:H()}],bottom:[{bottom:H()}],left:[{left:H()}],visibility:["visible","invisible","collapse"],z:[{z:[Ri,"auto",ct,lt]}],basis:[{basis:[zs,"full","auto",c,...L()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Pt,zs,"auto","initial","none",lt]}],grow:[{grow:["",Pt,ct,lt]}],shrink:[{shrink:["",Pt,ct,lt]}],order:[{order:[Ri,"first","last","none",ct,lt]}],"grid-cols":[{"grid-cols":W()}],"col-start-end":[{col:Y()}],"col-start":[{"col-start":ft()}],"col-end":[{"col-end":ft()}],"grid-rows":[{"grid-rows":W()}],"row-start-end":[{row:Y()}],"row-start":[{"row-start":ft()}],"row-end":[{"row-end":ft()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":dt()}],"auto-rows":[{"auto-rows":dt()}],gap:[{gap:L()}],"gap-x":[{"gap-x":L()}],"gap-y":[{"gap-y":L()}],"justify-content":[{justify:[...nt(),"normal"]}],"justify-items":[{"justify-items":[...xt(),"normal"]}],"justify-self":[{"justify-self":["auto",...xt()]}],"align-content":[{content:["normal",...nt()]}],"align-items":[{items:[...xt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...xt(),{baseline:["","last"]}]}],"place-content":[{"place-content":nt()}],"place-items":[{"place-items":[...xt(),"baseline"]}],"place-self":[{"place-self":["auto",...xt()]}],p:[{p:L()}],px:[{px:L()}],py:[{py:L()}],ps:[{ps:L()}],pe:[{pe:L()}],pt:[{pt:L()}],pr:[{pr:L()}],pb:[{pb:L()}],pl:[{pl:L()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":L()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":L()}],"space-y-reverse":["space-y-reverse"],size:[{size:U()}],w:[{w:[c,"screen",...U()]}],"min-w":[{"min-w":[c,"screen","none",...U()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[l]},...U()]}],h:[{h:["screen","lh",...U()]}],"min-h":[{"min-h":["screen","lh","none",...U()]}],"max-h":[{"max-h":["screen","lh",...U()]}],"font-size":[{text:["base",e,eo,ts]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,ct,Wu]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Uu,lt]}],"font-family":[{font:[z1,lt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,ct,lt]}],"line-clamp":[{"line-clamp":[Pt,"none",ct,Wu]}],leading:[{leading:[a,...L()]}],"list-image":[{"list-image":["none",ct,lt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ct,lt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:B()}],"text-color":[{text:B()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...mt(),"wavy"]}],"text-decoration-thickness":[{decoration:[Pt,"from-font","auto",ct,ts]}],"text-decoration-color":[{decoration:B()}],"underline-offset":[{"underline-offset":[Pt,"auto",ct,lt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ct,lt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ct,lt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:tt()}],"bg-repeat":[{bg:Q()}],"bg-size":[{bg:D()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ri,ct,lt],radial:["",ct,lt],conic:[Ri,ct,lt]},$1,V1]}],"bg-color":[{bg:B()}],"gradient-from-pos":[{from:$()}],"gradient-via-pos":[{via:$()}],"gradient-to-pos":[{to:$()}],"gradient-from":[{from:B()}],"gradient-via":[{via:B()}],"gradient-to":[{to:B()}],rounded:[{rounded:Z()}],"rounded-s":[{"rounded-s":Z()}],"rounded-e":[{"rounded-e":Z()}],"rounded-t":[{"rounded-t":Z()}],"rounded-r":[{"rounded-r":Z()}],"rounded-b":[{"rounded-b":Z()}],"rounded-l":[{"rounded-l":Z()}],"rounded-ss":[{"rounded-ss":Z()}],"rounded-se":[{"rounded-se":Z()}],"rounded-ee":[{"rounded-ee":Z()}],"rounded-es":[{"rounded-es":Z()}],"rounded-tl":[{"rounded-tl":Z()}],"rounded-tr":[{"rounded-tr":Z()}],"rounded-br":[{"rounded-br":Z()}],"rounded-bl":[{"rounded-bl":Z()}],"border-w":[{border:st()}],"border-w-x":[{"border-x":st()}],"border-w-y":[{"border-y":st()}],"border-w-s":[{"border-s":st()}],"border-w-e":[{"border-e":st()}],"border-w-t":[{"border-t":st()}],"border-w-r":[{"border-r":st()}],"border-w-b":[{"border-b":st()}],"border-w-l":[{"border-l":st()}],"divide-x":[{"divide-x":st()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":st()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...mt(),"hidden","none"]}],"divide-style":[{divide:[...mt(),"hidden","none"]}],"border-color":[{border:B()}],"border-color-x":[{"border-x":B()}],"border-color-y":[{"border-y":B()}],"border-color-s":[{"border-s":B()}],"border-color-e":[{"border-e":B()}],"border-color-t":[{"border-t":B()}],"border-color-r":[{"border-r":B()}],"border-color-b":[{"border-b":B()}],"border-color-l":[{"border-l":B()}],"divide-color":[{divide:B()}],"outline-style":[{outline:[...mt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Pt,ct,lt]}],"outline-w":[{outline:["",Pt,eo,ts]}],"outline-color":[{outline:B()}],shadow:[{shadow:["","none",f,ol,rl]}],"shadow-color":[{shadow:B()}],"inset-shadow":[{"inset-shadow":["none",m,ol,rl]}],"inset-shadow-color":[{"inset-shadow":B()}],"ring-w":[{ring:st()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:B()}],"ring-offset-w":[{"ring-offset":[Pt,ts]}],"ring-offset-color":[{"ring-offset":B()}],"inset-ring-w":[{"inset-ring":st()}],"inset-ring-color":[{"inset-ring":B()}],"text-shadow":[{"text-shadow":["none",g,ol,rl]}],"text-shadow-color":[{"text-shadow":B()}],opacity:[{opacity:[Pt,ct,lt]}],"mix-blend":[{"mix-blend":[...wt(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":wt()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Pt]}],"mask-image-linear-from-pos":[{"mask-linear-from":et()}],"mask-image-linear-to-pos":[{"mask-linear-to":et()}],"mask-image-linear-from-color":[{"mask-linear-from":B()}],"mask-image-linear-to-color":[{"mask-linear-to":B()}],"mask-image-t-from-pos":[{"mask-t-from":et()}],"mask-image-t-to-pos":[{"mask-t-to":et()}],"mask-image-t-from-color":[{"mask-t-from":B()}],"mask-image-t-to-color":[{"mask-t-to":B()}],"mask-image-r-from-pos":[{"mask-r-from":et()}],"mask-image-r-to-pos":[{"mask-r-to":et()}],"mask-image-r-from-color":[{"mask-r-from":B()}],"mask-image-r-to-color":[{"mask-r-to":B()}],"mask-image-b-from-pos":[{"mask-b-from":et()}],"mask-image-b-to-pos":[{"mask-b-to":et()}],"mask-image-b-from-color":[{"mask-b-from":B()}],"mask-image-b-to-color":[{"mask-b-to":B()}],"mask-image-l-from-pos":[{"mask-l-from":et()}],"mask-image-l-to-pos":[{"mask-l-to":et()}],"mask-image-l-from-color":[{"mask-l-from":B()}],"mask-image-l-to-color":[{"mask-l-to":B()}],"mask-image-x-from-pos":[{"mask-x-from":et()}],"mask-image-x-to-pos":[{"mask-x-to":et()}],"mask-image-x-from-color":[{"mask-x-from":B()}],"mask-image-x-to-color":[{"mask-x-to":B()}],"mask-image-y-from-pos":[{"mask-y-from":et()}],"mask-image-y-to-pos":[{"mask-y-to":et()}],"mask-image-y-from-color":[{"mask-y-from":B()}],"mask-image-y-to-color":[{"mask-y-to":B()}],"mask-image-radial":[{"mask-radial":[ct,lt]}],"mask-image-radial-from-pos":[{"mask-radial-from":et()}],"mask-image-radial-to-pos":[{"mask-radial-to":et()}],"mask-image-radial-from-color":[{"mask-radial-from":B()}],"mask-image-radial-to-color":[{"mask-radial-to":B()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":R()}],"mask-image-conic-pos":[{"mask-conic":[Pt]}],"mask-image-conic-from-pos":[{"mask-conic-from":et()}],"mask-image-conic-to-pos":[{"mask-conic-to":et()}],"mask-image-conic-from-color":[{"mask-conic-from":B()}],"mask-image-conic-to-color":[{"mask-conic-to":B()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:tt()}],"mask-repeat":[{mask:Q()}],"mask-size":[{mask:D()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ct,lt]}],filter:[{filter:["","none",ct,lt]}],blur:[{blur:_t()}],brightness:[{brightness:[Pt,ct,lt]}],contrast:[{contrast:[Pt,ct,lt]}],"drop-shadow":[{"drop-shadow":["","none",w,ol,rl]}],"drop-shadow-color":[{"drop-shadow":B()}],grayscale:[{grayscale:["",Pt,ct,lt]}],"hue-rotate":[{"hue-rotate":[Pt,ct,lt]}],invert:[{invert:["",Pt,ct,lt]}],saturate:[{saturate:[Pt,ct,lt]}],sepia:[{sepia:["",Pt,ct,lt]}],"backdrop-filter":[{"backdrop-filter":["","none",ct,lt]}],"backdrop-blur":[{"backdrop-blur":_t()}],"backdrop-brightness":[{"backdrop-brightness":[Pt,ct,lt]}],"backdrop-contrast":[{"backdrop-contrast":[Pt,ct,lt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Pt,ct,lt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Pt,ct,lt]}],"backdrop-invert":[{"backdrop-invert":["",Pt,ct,lt]}],"backdrop-opacity":[{"backdrop-opacity":[Pt,ct,lt]}],"backdrop-saturate":[{"backdrop-saturate":[Pt,ct,lt]}],"backdrop-sepia":[{"backdrop-sepia":["",Pt,ct,lt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":L()}],"border-spacing-x":[{"border-spacing-x":L()}],"border-spacing-y":[{"border-spacing-y":L()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ct,lt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Pt,"initial",ct,lt]}],ease:[{ease:["linear","initial",E,ct,lt]}],delay:[{delay:[Pt,ct,lt]}],animate:[{animate:["none",_,ct,lt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,ct,lt]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:kt()}],"rotate-x":[{"rotate-x":kt()}],"rotate-y":[{"rotate-y":kt()}],"rotate-z":[{"rotate-z":kt()}],scale:[{scale:Tt()}],"scale-x":[{"scale-x":Tt()}],"scale-y":[{"scale-y":Tt()}],"scale-z":[{"scale-z":Tt()}],"scale-3d":["scale-3d"],skew:[{skew:ge()}],"skew-x":[{"skew-x":ge()}],"skew-y":[{"skew-y":ge()}],transform:[{transform:[ct,lt,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Se()}],"translate-x":[{"translate-x":Se()}],"translate-y":[{"translate-y":Se()}],"translate-z":[{"translate-z":Se()}],"translate-none":["translate-none"],accent:[{accent:B()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:B()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ct,lt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ct,lt]}],fill:[{fill:["none",...B()]}],"stroke-w":[{stroke:[Pt,eo,ts,Wu]}],stroke:[{stroke:["none",...B()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},X1=T1(G1);function ps(...i){return X1(lr(i))}const K1=Ev("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function Li({className:i,variant:t,size:e,asChild:n=!1,...r}){const a=n?Av:"button";return F.jsx(a,{"data-slot":"button",className:ps(K1({variant:t,size:e,className:i})),...r})}function q1({isDark:i,setIsDark:t}){const e=Oi(),n=[{path:"/",label:"Home",icon:qS},{path:"/about",label:"About",icon:o1},{path:"/projects",label:"Projects",icon:HS},{path:"/resume",label:"Resume",icon:GS}],r=()=>{t(!i),document.documentElement.classList.toggle("dark")},a="bg-primary text-primary-foreground rounded-md px-3 py-2 flex items-center space-x-1",l="text-foreground hover:bg-accent hover:text-accent-foreground rounded-md px-3 py-2 flex items-center space-x-1 transition-colors";return F.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:[F.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[F.jsx("h1",{className:"text-xl font-semibold",children:"Wei Ying's Portfolio"}),F.jsx("div",{className:"hidden md:flex items-center space-x-2",children:n.map(c=>{const h=c.icon,d=e.pathname===c.path;return c.label==="Resume"?F.jsxs(Li,{variant:"ghost",onClick:()=>window.open("/weiyings-portfolio/lee-wei-ying-resume.pdf","_blank"),className:l,children:[F.jsx(h,{size:16}),F.jsx("span",{children:c.label})]},c.label):F.jsxs(El,{to:c.path,className:d?a:l,children:[F.jsx(h,{size:16}),F.jsx("span",{children:c.label})]},c.path)})}),F.jsx(Li,{variant:"ghost",size:"icon",onClick:r,children:i?F.jsx(s1,{size:20}):F.jsx(t1,{size:20})})]}),F.jsx("div",{className:"md:hidden flex justify-center space-x-1 mt-3",children:n.map(c=>{const h=c.icon,d=e.pathname===c.path;return c.label==="Resume"?F.jsx(Li,{variant:"ghost",size:"sm",onClick:()=>window.open("/weiyings-portfolio/lee-wei-ying-resume.pdf","_blank"),children:F.jsx(h,{size:16})},c.label):F.jsx(El,{to:c.path,className:`flex-1 flex justify-center items-center p-2 ${d?"bg-primary text-primary-foreground rounded-md":"text-foreground hover:bg-accent hover:text-accent-foreground rounded-md transition-colors"}`,children:F.jsx(h,{size:16})},c.path)})})]})}const Nv=P.createContext({});function Y1(i){const t=P.useRef(null);return t.current===null&&(t.current=i()),t.current}const rd=typeof window<"u",Q1=rd?P.useLayoutEffect:P.useEffect,od=P.createContext(null);function ad(i,t){i.indexOf(t)===-1&&i.push(t)}function ld(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}const ri=(i,t,e)=>e>t?t:e<i?i:e;let cd=()=>{};const oi={},Fv=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i);function Ov(i){return typeof i=="object"&&i!==null}const jv=i=>/^0[^.\s]+$/u.test(i);function ud(i){let t;return()=>(t===void 0&&(t=i()),t)}const pn=i=>i,J1=(i,t)=>e=>t(i(e)),Io=(...i)=>i.reduce(J1),wo=(i,t,e)=>{const n=t-i;return n===0?1:(e-i)/n};class hd{constructor(){this.subscriptions=[]}add(t){return ad(this.subscriptions,t),()=>ld(this.subscriptions,t)}notify(t,e,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,e,n);else for(let a=0;a<r;a++){const l=this.subscriptions[a];l&&l(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const zn=i=>i*1e3,Hn=i=>i/1e3;function Bv(i,t){return t?i*(1e3/t):0}const Vv=(i,t,e)=>(((1-3*e+3*t)*i+(3*e-6*t))*i+3*t)*i,Z1=1e-7,tE=12;function eE(i,t,e,n,r){let a,l,c=0;do l=t+(e-t)/2,a=Vv(l,n,r)-i,a>0?e=l:t=l;while(Math.abs(a)>Z1&&++c<tE);return l}function Do(i,t,e,n){if(i===t&&e===n)return pn;const r=a=>eE(a,0,1,i,e);return a=>a===0||a===1?a:Vv(r(a),t,n)}const zv=i=>t=>t<=.5?i(2*t)/2:(2-i(2*(1-t)))/2,Hv=i=>t=>1-i(1-t),$v=Do(.33,1.53,.69,.99),dd=Hv($v),Uv=zv(dd),Wv=i=>(i*=2)<1?.5*dd(i):.5*(2-Math.pow(2,-10*(i-1))),fd=i=>1-Math.sin(Math.acos(i)),Gv=Hv(fd),Xv=zv(fd),nE=Do(.42,0,1,1),iE=Do(0,0,.58,1),Kv=Do(.42,0,.58,1),sE=i=>Array.isArray(i)&&typeof i[0]!="number",qv=i=>Array.isArray(i)&&typeof i[0]=="number",rE={linear:pn,easeIn:nE,easeInOut:Kv,easeOut:iE,circIn:fd,circInOut:Xv,circOut:Gv,backIn:dd,backInOut:Uv,backOut:$v,anticipate:Wv},oE=i=>typeof i=="string",dg=i=>{if(qv(i)){cd(i.length===4);const[t,e,n,r]=i;return Do(t,e,n,r)}else if(oE(i))return rE[i];return i},al=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function aE(i,t){let e=new Set,n=new Set,r=!1,a=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function h(f){l.has(f)&&(d.schedule(f),i()),f(c)}const d={schedule:(f,m=!1,g=!1)=>{const b=g&&r?e:n;return m&&l.add(f),b.has(f)||b.add(f),f},cancel:f=>{n.delete(f),l.delete(f)},process:f=>{if(c=f,r){a=!0;return}r=!0,[e,n]=[n,e],e.forEach(h),e.clear(),r=!1,a&&(a=!1,d.process(f))}};return d}const lE=40;function Yv(i,t){let e=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=()=>e=!0,l=al.reduce((C,R)=>(C[R]=aE(a),C),{}),{setup:c,read:h,resolveKeyframes:d,preUpdate:f,update:m,preRender:g,render:w,postRender:b}=l,x=()=>{const C=oi.useManualTiming?r.timestamp:performance.now();e=!1,oi.useManualTiming||(r.delta=n?1e3/60:Math.max(Math.min(C-r.timestamp,lE),1)),r.timestamp=C,r.isProcessing=!0,c.process(r),h.process(r),d.process(r),f.process(r),m.process(r),g.process(r),w.process(r),b.process(r),r.isProcessing=!1,e&&t&&(n=!1,i(x))},S=()=>{e=!0,n=!0,r.isProcessing||i(x)};return{schedule:al.reduce((C,R)=>{const k=l[R];return C[R]=(N,O=!1,L=!1)=>(e||S(),k.schedule(N,O,L)),C},{}),cancel:C=>{for(let R=0;R<al.length;R++)l[al[R]].cancel(C)},state:r,steps:l}}const{schedule:Wt,cancel:Di,state:_e,steps:Gu}=Yv(typeof requestAnimationFrame<"u"?requestAnimationFrame:pn,!0);let wl;function cE(){wl=void 0}const Ke={now:()=>(wl===void 0&&Ke.set(_e.isProcessing||oi.useManualTiming?_e.timestamp:performance.now()),wl),set:i=>{wl=i,queueMicrotask(cE)}},Qv=i=>t=>typeof t=="string"&&t.startsWith(i),pd=Qv("--"),uE=Qv("var(--"),md=i=>uE(i)?hE.test(i.split("/*")[0].trim()):!1,hE=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,hr={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},bo={...hr,transform:i=>ri(0,1,i)},ll={...hr,default:1},uo=i=>Math.round(i*1e5)/1e5,gd=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function dE(i){return i==null}const fE=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,yd=(i,t)=>e=>!!(typeof e=="string"&&fE.test(e)&&e.startsWith(i)||t&&!dE(e)&&Object.prototype.hasOwnProperty.call(e,t)),Jv=(i,t,e)=>n=>{if(typeof n!="string")return n;const[r,a,l,c]=n.match(gd);return{[i]:parseFloat(r),[t]:parseFloat(a),[e]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},pE=i=>ri(0,255,i),Xu={...hr,transform:i=>Math.round(pE(i))},rs={test:yd("rgb","red"),parse:Jv("red","green","blue"),transform:({red:i,green:t,blue:e,alpha:n=1})=>"rgba("+Xu.transform(i)+", "+Xu.transform(t)+", "+Xu.transform(e)+", "+uo(bo.transform(n))+")"};function mE(i){let t="",e="",n="",r="";return i.length>5?(t=i.substring(1,3),e=i.substring(3,5),n=i.substring(5,7),r=i.substring(7,9)):(t=i.substring(1,2),e=i.substring(2,3),n=i.substring(3,4),r=i.substring(4,5),t+=t,e+=e,n+=n,r+=r),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const xh={test:yd("#"),parse:mE,transform:rs.transform},No=i=>({test:t=>typeof t=="string"&&t.endsWith(i)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${i}`}),Mi=No("deg"),$n=No("%"),At=No("px"),gE=No("vh"),yE=No("vw"),fg={...$n,parse:i=>$n.parse(i)/100,transform:i=>$n.transform(i*100)},Ws={test:yd("hsl","hue"),parse:Jv("hue","saturation","lightness"),transform:({hue:i,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(i)+", "+$n.transform(uo(t))+", "+$n.transform(uo(e))+", "+uo(bo.transform(n))+")"},ue={test:i=>rs.test(i)||xh.test(i)||Ws.test(i),parse:i=>rs.test(i)?rs.parse(i):Ws.test(i)?Ws.parse(i):xh.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?rs.transform(i):Ws.transform(i),getAnimatableNone:i=>{const t=ue.parse(i);return t.alpha=0,ue.transform(t)}},vE=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function wE(i){return isNaN(i)&&typeof i=="string"&&(i.match(gd)?.length||0)+(i.match(vE)?.length||0)>0}const Zv="number",t0="color",bE="var",xE="var(",pg="${}",AE=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xo(i){const t=i.toString(),e=[],n={color:[],number:[],var:[]},r=[];let a=0;const c=t.replace(AE,h=>(ue.test(h)?(n.color.push(a),r.push(t0),e.push(ue.parse(h))):h.startsWith(xE)?(n.var.push(a),r.push(bE),e.push(h)):(n.number.push(a),r.push(Zv),e.push(parseFloat(h))),++a,pg)).split(pg);return{values:e,split:c,indexes:n,types:r}}function e0(i){return xo(i).values}function n0(i){const{split:t,types:e}=xo(i),n=t.length;return r=>{let a="";for(let l=0;l<n;l++)if(a+=t[l],r[l]!==void 0){const c=e[l];c===Zv?a+=uo(r[l]):c===t0?a+=ue.transform(r[l]):a+=r[l]}return a}}const SE=i=>typeof i=="number"?0:ue.test(i)?ue.getAnimatableNone(i):i;function EE(i){const t=e0(i);return n0(i)(t.map(SE))}const Ni={test:wE,parse:e0,createTransformer:n0,getAnimatableNone:EE};function Ku(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*6*e:e<1/2?t:e<2/3?i+(t-i)*(2/3-e)*6:i}function CE({hue:i,saturation:t,lightness:e,alpha:n}){i/=360,t/=100,e/=100;let r=0,a=0,l=0;if(!t)r=a=l=e;else{const c=e<.5?e*(1+t):e+t-e*t,h=2*e-c;r=Ku(h,c,i+1/3),a=Ku(h,c,i),l=Ku(h,c,i-1/3)}return{red:Math.round(r*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:n}}function _l(i,t){return e=>e>0?t:i}const qt=(i,t,e)=>i+(t-i)*e,qu=(i,t,e)=>{const n=i*i,r=e*(t*t-n)+n;return r<0?0:Math.sqrt(r)},_E=[xh,rs,Ws],TE=i=>_E.find(t=>t.test(i));function mg(i){const t=TE(i);if(!t)return!1;let e=t.parse(i);return t===Ws&&(e=CE(e)),e}const gg=(i,t)=>{const e=mg(i),n=mg(t);if(!e||!n)return _l(i,t);const r={...e};return a=>(r.red=qu(e.red,n.red,a),r.green=qu(e.green,n.green,a),r.blue=qu(e.blue,n.blue,a),r.alpha=qt(e.alpha,n.alpha,a),rs.transform(r))},Ah=new Set(["none","hidden"]);function kE(i,t){return Ah.has(i)?e=>e<=0?i:t:e=>e>=1?t:i}function PE(i,t){return e=>qt(i,t,e)}function vd(i){return typeof i=="number"?PE:typeof i=="string"?md(i)?_l:ue.test(i)?gg:LE:Array.isArray(i)?i0:typeof i=="object"?ue.test(i)?gg:RE:_l}function i0(i,t){const e=[...i],n=e.length,r=i.map((a,l)=>vd(a)(a,t[l]));return a=>{for(let l=0;l<n;l++)e[l]=r[l](a);return e}}function RE(i,t){const e={...i,...t},n={};for(const r in e)i[r]!==void 0&&t[r]!==void 0&&(n[r]=vd(i[r])(i[r],t[r]));return r=>{for(const a in n)e[a]=n[a](r);return e}}function ME(i,t){const e=[],n={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const a=t.types[r],l=i.indexes[a][n[a]],c=i.values[l]??0;e[r]=c,n[a]++}return e}const LE=(i,t)=>{const e=Ni.createTransformer(t),n=xo(i),r=xo(t);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?Ah.has(i)&&!r.values.length||Ah.has(t)&&!n.values.length?kE(i,t):Io(i0(ME(n,r),r.values),e):_l(i,t)};function s0(i,t,e){return typeof i=="number"&&typeof t=="number"&&typeof e=="number"?qt(i,t,e):vd(i)(i,t)}const IE=i=>{const t=({timestamp:e})=>i(e);return{start:(e=!0)=>Wt.update(t,e),stop:()=>Di(t),now:()=>_e.isProcessing?_e.timestamp:Ke.now()}},r0=(i,t,e=10)=>{let n="";const r=Math.max(Math.round(t/e),2);for(let a=0;a<r;a++)n+=Math.round(i(a/(r-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Tl=2e4;function wd(i){let t=0;const e=50;let n=i.next(t);for(;!n.done&&t<Tl;)t+=e,n=i.next(t);return t>=Tl?1/0:t}function DE(i,t=100,e){const n=e({...i,keyframes:[0,t]}),r=Math.min(wd(n),Tl);return{type:"keyframes",ease:a=>n.next(r*a).value/t,duration:Hn(r)}}const NE=5;function o0(i,t,e){const n=Math.max(t-NE,0);return Bv(e-i(n),t-n)}const Zt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Yu=.001;function FE({duration:i=Zt.duration,bounce:t=Zt.bounce,velocity:e=Zt.velocity,mass:n=Zt.mass}){let r,a,l=1-t;l=ri(Zt.minDamping,Zt.maxDamping,l),i=ri(Zt.minDuration,Zt.maxDuration,Hn(i)),l<1?(r=d=>{const f=d*l,m=f*i,g=f-e,w=Sh(d,l),b=Math.exp(-m);return Yu-g/w*b},a=d=>{const m=d*l*i,g=m*e+e,w=Math.pow(l,2)*Math.pow(d,2)*i,b=Math.exp(-m),x=Sh(Math.pow(d,2),l);return(-r(d)+Yu>0?-1:1)*((g-w)*b)/x}):(r=d=>{const f=Math.exp(-d*i),m=(d-e)*i+1;return-Yu+f*m},a=d=>{const f=Math.exp(-d*i),m=(e-d)*(i*i);return f*m});const c=5/i,h=jE(r,a,c);if(i=zn(i),isNaN(h))return{stiffness:Zt.stiffness,damping:Zt.damping,duration:i};{const d=Math.pow(h,2)*n;return{stiffness:d,damping:l*2*Math.sqrt(n*d),duration:i}}}const OE=12;function jE(i,t,e){let n=e;for(let r=1;r<OE;r++)n=n-i(n)/t(n);return n}function Sh(i,t){return i*Math.sqrt(1-t*t)}const BE=["duration","bounce"],VE=["stiffness","damping","mass"];function yg(i,t){return t.some(e=>i[e]!==void 0)}function zE(i){let t={velocity:Zt.velocity,stiffness:Zt.stiffness,damping:Zt.damping,mass:Zt.mass,isResolvedFromDuration:!1,...i};if(!yg(i,VE)&&yg(i,BE))if(i.visualDuration){const e=i.visualDuration,n=2*Math.PI/(e*1.2),r=n*n,a=2*ri(.05,1,1-(i.bounce||0))*Math.sqrt(r);t={...t,mass:Zt.mass,stiffness:r,damping:a}}else{const e=FE(i);t={...t,...e,mass:Zt.mass},t.isResolvedFromDuration=!0}return t}function kl(i=Zt.visualDuration,t=Zt.bounce){const e=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:t}:i;let{restSpeed:n,restDelta:r}=e;const a=e.keyframes[0],l=e.keyframes[e.keyframes.length-1],c={done:!1,value:a},{stiffness:h,damping:d,mass:f,duration:m,velocity:g,isResolvedFromDuration:w}=zE({...e,velocity:-Hn(e.velocity||0)}),b=g||0,x=d/(2*Math.sqrt(h*f)),S=l-a,E=Hn(Math.sqrt(h/f)),_=Math.abs(S)<5;n||(n=_?Zt.restSpeed.granular:Zt.restSpeed.default),r||(r=_?Zt.restDelta.granular:Zt.restDelta.default);let C;if(x<1){const k=Sh(E,x);C=N=>{const O=Math.exp(-x*E*N);return l-O*((b+x*E*S)/k*Math.sin(k*N)+S*Math.cos(k*N))}}else if(x===1)C=k=>l-Math.exp(-E*k)*(S+(b+E*S)*k);else{const k=E*Math.sqrt(x*x-1);C=N=>{const O=Math.exp(-x*E*N),L=Math.min(k*N,300);return l-O*((b+x*E*S)*Math.sinh(L)+k*S*Math.cosh(L))/k}}const R={calculatedDuration:w&&m||null,next:k=>{const N=C(k);if(w)c.done=k>=m;else{let O=k===0?b:0;x<1&&(O=k===0?zn(b):o0(C,k,N));const L=Math.abs(O)<=n,H=Math.abs(l-N)<=r;c.done=L&&H}return c.value=c.done?l:N,c},toString:()=>{const k=Math.min(wd(R),Tl),N=r0(O=>R.next(k*O).value,k,30);return k+"ms "+N},toTransition:()=>{}};return R}kl.applyToOptions=i=>{const t=DE(i,100,kl);return i.ease=t.ease,i.duration=zn(t.duration),i.type="keyframes",i};function Eh({keyframes:i,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:a=500,modifyTarget:l,min:c,max:h,restDelta:d=.5,restSpeed:f}){const m=i[0],g={done:!1,value:m},w=L=>c!==void 0&&L<c||h!==void 0&&L>h,b=L=>c===void 0?h:h===void 0||Math.abs(c-L)<Math.abs(h-L)?c:h;let x=e*t;const S=m+x,E=l===void 0?S:l(S);E!==S&&(x=E-m);const _=L=>-x*Math.exp(-L/n),C=L=>E+_(L),R=L=>{const H=_(L),W=C(L);g.done=Math.abs(H)<=d,g.value=g.done?E:W};let k,N;const O=L=>{w(g.value)&&(k=L,N=kl({keyframes:[g.value,b(g.value)],velocity:o0(C,L,g.value),damping:r,stiffness:a,restDelta:d,restSpeed:f}))};return O(0),{calculatedDuration:null,next:L=>{let H=!1;return!N&&k===void 0&&(H=!0,R(L),O(L)),k!==void 0&&L>=k?N.next(L-k):(!H&&R(L),g)}}}function HE(i,t,e){const n=[],r=e||oi.mix||s0,a=i.length-1;for(let l=0;l<a;l++){let c=r(i[l],i[l+1]);if(t){const h=Array.isArray(t)?t[l]||pn:t;c=Io(h,c)}n.push(c)}return n}function $E(i,t,{clamp:e=!0,ease:n,mixer:r}={}){const a=i.length;if(cd(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const l=i[0]===i[1];i[0]>i[a-1]&&(i=[...i].reverse(),t=[...t].reverse());const c=HE(t,n,r),h=c.length,d=f=>{if(l&&f<i[0])return t[0];let m=0;if(h>1)for(;m<i.length-2&&!(f<i[m+1]);m++);const g=wo(i[m],i[m+1],f);return c[m](g)};return e?f=>d(ri(i[0],i[a-1],f)):d}function UE(i,t){const e=i[i.length-1];for(let n=1;n<=t;n++){const r=wo(0,t,n);i.push(qt(e,1,r))}}function WE(i){const t=[0];return UE(t,i.length-1),t}function GE(i,t){return i.map(e=>e*t)}function XE(i,t){return i.map(()=>t||Kv).splice(0,i.length-1)}function ho({duration:i=300,keyframes:t,times:e,ease:n="easeInOut"}){const r=sE(n)?n.map(dg):dg(n),a={done:!1,value:t[0]},l=GE(e&&e.length===t.length?e:WE(t),i),c=$E(l,t,{ease:Array.isArray(r)?r:XE(t,r)});return{calculatedDuration:i,next:h=>(a.value=c(h),a.done=h>=i,a)}}const KE=i=>i!==null;function bd(i,{repeat:t,repeatType:e="loop"},n,r=1){const a=i.filter(KE),c=r<0||t&&e!=="loop"&&t%2===1?0:a.length-1;return!c||n===void 0?a[c]:n}const qE={decay:Eh,inertia:Eh,tween:ho,keyframes:ho,spring:kl};function a0(i){typeof i.type=="string"&&(i.type=qE[i.type])}class xd{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const YE=i=>i/100;class Ad extends xd{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==Ke.now()&&this.tick(Ke.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;a0(t);const{type:e=ho,repeat:n=0,repeatDelay:r=0,repeatType:a,velocity:l=0}=t;let{keyframes:c}=t;const h=e||ho;h!==ho&&typeof c[0]!="number"&&(this.mixKeyframes=Io(YE,s0(c[0],c[1])),c=[0,100]);const d=h({...t,keyframes:c});a==="mirror"&&(this.mirroredGenerator=h({...t,keyframes:[...c].reverse(),velocity:-l})),d.calculatedDuration===null&&(d.calculatedDuration=wd(d));const{calculatedDuration:f}=d;this.calculatedDuration=f,this.resolvedDuration=f+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=d}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:r,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:h}=this;if(this.startTime===null)return n.next(0);const{delay:d=0,keyframes:f,repeat:m,repeatType:g,repeatDelay:w,type:b,onUpdate:x,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-r/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const E=this.currentTime-d*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?E<0:E>r;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let C=this.currentTime,R=n;if(m){const L=Math.min(this.currentTime,r)/c;let H=Math.floor(L),W=L%1;!W&&L>=1&&(W=1),W===1&&H--,H=Math.min(H,m+1),!!(H%2)&&(g==="reverse"?(W=1-W,w&&(W-=w/c)):g==="mirror"&&(R=l)),C=ri(0,1,W)*c}const k=_?{done:!1,value:f[0]}:R.next(C);a&&(k.value=a(k.value));let{done:N}=k;!_&&h!==null&&(N=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return O&&b!==Eh&&(k.value=bd(f,this.options,S,this.speed)),x&&x(k.value),O&&this.finish(),k}then(t,e){return this.finished.then(t,e)}get duration(){return Hn(this.calculatedDuration)}get time(){return Hn(this.currentTime)}set time(t){t=zn(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Ke.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Hn(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=IE,startTime:e}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ke.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function QE(i){for(let t=1;t<i.length;t++)i[t]??(i[t]=i[t-1])}const os=i=>i*180/Math.PI,Ch=i=>{const t=os(Math.atan2(i[1],i[0]));return _h(t)},JE={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate:Ch,rotateZ:Ch,skewX:i=>os(Math.atan(i[1])),skewY:i=>os(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},_h=i=>(i=i%360,i<0&&(i+=360),i),vg=Ch,wg=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),bg=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),ZE={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:wg,scaleY:bg,scale:i=>(wg(i)+bg(i))/2,rotateX:i=>_h(os(Math.atan2(i[6],i[5]))),rotateY:i=>_h(os(Math.atan2(-i[2],i[0]))),rotateZ:vg,rotate:vg,skewX:i=>os(Math.atan(i[4])),skewY:i=>os(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function Th(i){return i.includes("scale")?1:0}function kh(i,t){if(!i||i==="none")return Th(t);const e=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,r;if(e)n=ZE,r=e;else{const c=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=JE,r=c}if(!r)return Th(t);const a=n[t],l=r[1].split(",").map(eC);return typeof a=="function"?a(l):l[a]}const tC=(i,t)=>{const{transform:e="none"}=getComputedStyle(i);return kh(e,t)};function eC(i){return parseFloat(i.trim())}const dr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fr=new Set(dr),xg=i=>i===hr||i===At,nC=new Set(["x","y","z"]),iC=dr.filter(i=>!nC.has(i));function sC(i){const t=[];return iC.forEach(e=>{const n=i.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const cs={width:({x:i},{paddingLeft:t="0",paddingRight:e="0"})=>i.max-i.min-parseFloat(t)-parseFloat(e),height:({y:i},{paddingTop:t="0",paddingBottom:e="0"})=>i.max-i.min-parseFloat(t)-parseFloat(e),top:(i,{top:t})=>parseFloat(t),left:(i,{left:t})=>parseFloat(t),bottom:({y:i},{top:t})=>parseFloat(t)+(i.max-i.min),right:({x:i},{left:t})=>parseFloat(t)+(i.max-i.min),x:(i,{transform:t})=>kh(t,"x"),y:(i,{transform:t})=>kh(t,"y")};cs.translateX=cs.x;cs.translateY=cs.y;const us=new Set;let Ph=!1,Rh=!1,Mh=!1;function l0(){if(Rh){const i=Array.from(us).filter(n=>n.needsMeasurement),t=new Set(i.map(n=>n.element)),e=new Map;t.forEach(n=>{const r=sC(n);r.length&&(e.set(n,r),n.render())}),i.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const r=e.get(n);r&&r.forEach(([a,l])=>{n.getValue(a)?.set(l)})}),i.forEach(n=>n.measureEndState()),i.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Rh=!1,Ph=!1,us.forEach(i=>i.complete(Mh)),us.clear()}function c0(){us.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(Rh=!0)})}function rC(){Mh=!0,c0(),l0(),Mh=!1}class Sd{constructor(t,e,n,r,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=r,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(us.add(this),Ph||(Ph=!0,Wt.read(c0),Wt.resolveKeyframes(l0))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:r}=this;if(t[0]===null){const a=r?.get(),l=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&e){const c=n.readValue(e,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),r&&a===void 0&&r.set(t[0])}QE(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),us.delete(this)}cancel(){this.state==="scheduled"&&(us.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const oC=i=>i.startsWith("--");function aC(i,t,e){oC(t)?i.style.setProperty(t,e):i.style[t]=e}const lC=ud(()=>window.ScrollTimeline!==void 0),cC={};function uC(i,t){const e=ud(i);return()=>cC[t]??e()}const u0=uC(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ao=([i,t,e,n])=>`cubic-bezier(${i}, ${t}, ${e}, ${n})`,Ag={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ao([0,.65,.55,1]),circOut:ao([.55,0,1,.45]),backIn:ao([.31,.01,.66,-.59]),backOut:ao([.33,1.53,.69,.99])};function h0(i,t){if(i)return typeof i=="function"?u0()?r0(i,t):"ease-out":qv(i)?ao(i):Array.isArray(i)?i.map(e=>h0(e,t)||Ag.easeOut):Ag[i]}function hC(i,t,e,{delay:n=0,duration:r=300,repeat:a=0,repeatType:l="loop",ease:c="easeOut",times:h}={},d=void 0){const f={[t]:e};h&&(f.offset=h);const m=h0(c,r);Array.isArray(m)&&(f.easing=m);const g={delay:n,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return d&&(g.pseudoElement=d),i.animate(f,g)}function d0(i){return typeof i=="function"&&"applyToOptions"in i}function dC({type:i,...t}){return d0(i)&&u0()?i.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class fC extends xd{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:n,keyframes:r,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:c,onComplete:h}=t;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=t,cd(typeof t.type!="string");const d=dC(t);this.animation=hC(e,n,r,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const f=bd(r,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(f):aC(e,n,f),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Hn(Number(t))}get time(){return Hn(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=zn(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&lC()?(this.animation.timeline=t,pn):e(this)}}const f0={anticipate:Wv,backInOut:Uv,circInOut:Xv};function pC(i){return i in f0}function mC(i){typeof i.ease=="string"&&pC(i.ease)&&(i.ease=f0[i.ease])}const Sg=10;class gC extends fC{constructor(t){mC(t),a0(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:r,element:a,...l}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const c=new Ad({...l,autoplay:!1}),h=zn(this.finishedTime??this.time);e.setWithVelocity(c.sample(h-Sg).value,c.sample(h).value,Sg),c.stop()}}const Eg=(i,t)=>t==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(Ni.test(i)||i==="0")&&!i.startsWith("url("));function yC(i){const t=i[0];if(i.length===1)return!0;for(let e=0;e<i.length;e++)if(i[e]!==t)return!0}function vC(i,t,e,n){const r=i[0];if(r===null)return!1;if(t==="display"||t==="visibility")return!0;const a=i[i.length-1],l=Eg(r,t),c=Eg(a,t);return!l||!c?!1:yC(i)||(e==="spring"||d0(e))&&n}function Lh(i){i.duration=0,i.type}const wC=new Set(["opacity","clipPath","filter","transform"]),bC=ud(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function xC(i){const{motionValue:t,name:e,repeatDelay:n,repeatType:r,damping:a,type:l}=i;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:d}=t.owner.getProps();return bC()&&e&&wC.has(e)&&(e!=="transform"||!d)&&!h&&!n&&r!=="mirror"&&a!==0&&l!=="inertia"}const AC=40;class SC extends xd{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:l="loop",keyframes:c,name:h,motionValue:d,element:f,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Ke.now();const g={autoplay:t,delay:e,type:n,repeat:r,repeatDelay:a,repeatType:l,name:h,motionValue:d,element:f,...m},w=f?.KeyframeResolver||Sd;this.keyframeResolver=new w(c,(b,x,S)=>this.onKeyframesResolved(b,x,g,!S),h,d,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,n,r){this.keyframeResolver=void 0;const{name:a,type:l,velocity:c,delay:h,isHandoff:d,onUpdate:f}=n;this.resolvedAt=Ke.now(),vC(t,a,l,c)||((oi.instantAnimations||!h)&&f?.(bd(t,n,e)),t[0]=t[t.length-1],Lh(n),n.repeat=0);const g={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>AC?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},w=!d&&xC(g)?new gC({...g,element:g.motionValue.owner.current}):new Ad(g);w.finished.then(()=>this.notifyFinished()).catch(pn),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),rC()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const EC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function CC(i){const t=EC.exec(i);if(!t)return[,];const[,e,n,r]=t;return[`--${e??n}`,r]}function p0(i,t,e=1){const[n,r]=CC(i);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const l=a.trim();return Fv(l)?parseFloat(l):l}return md(r)?p0(r,t,e+1):r}function Ed(i,t){return i?.[t]??i?.default??i}const m0=new Set(["width","height","top","left","right","bottom",...dr]),_C={test:i=>i==="auto",parse:i=>i},g0=i=>t=>t.test(i),y0=[hr,At,$n,Mi,yE,gE,_C],Cg=i=>y0.find(g0(i));function TC(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||jv(i):!0}const kC=new Set(["brightness","contrast","saturate","opacity"]);function PC(i){const[t,e]=i.slice(0,-1).split("(");if(t==="drop-shadow")return i;const[n]=e.match(gd)||[];if(!n)return i;const r=e.replace(n,"");let a=kC.has(t)?1:0;return n!==e&&(a*=100),t+"("+a+r+")"}const RC=/\b([a-z-]*)\(.*?\)/gu,Ih={...Ni,getAnimatableNone:i=>{const t=i.match(RC);return t?t.map(PC).join(" "):i}},_g={...hr,transform:Math.round},MC={rotate:Mi,rotateX:Mi,rotateY:Mi,rotateZ:Mi,scale:ll,scaleX:ll,scaleY:ll,scaleZ:ll,skew:Mi,skewX:Mi,skewY:Mi,distance:At,translateX:At,translateY:At,translateZ:At,x:At,y:At,z:At,perspective:At,transformPerspective:At,opacity:bo,originX:fg,originY:fg,originZ:At},Cd={borderWidth:At,borderTopWidth:At,borderRightWidth:At,borderBottomWidth:At,borderLeftWidth:At,borderRadius:At,radius:At,borderTopLeftRadius:At,borderTopRightRadius:At,borderBottomRightRadius:At,borderBottomLeftRadius:At,width:At,maxWidth:At,height:At,maxHeight:At,top:At,right:At,bottom:At,left:At,padding:At,paddingTop:At,paddingRight:At,paddingBottom:At,paddingLeft:At,margin:At,marginTop:At,marginRight:At,marginBottom:At,marginLeft:At,backgroundPositionX:At,backgroundPositionY:At,...MC,zIndex:_g,fillOpacity:bo,strokeOpacity:bo,numOctaves:_g},LC={...Cd,color:ue,backgroundColor:ue,outlineColor:ue,fill:ue,stroke:ue,borderColor:ue,borderTopColor:ue,borderRightColor:ue,borderBottomColor:ue,borderLeftColor:ue,filter:Ih,WebkitFilter:Ih},v0=i=>LC[i];function w0(i,t){let e=v0(i);return e!==Ih&&(e=Ni),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const IC=new Set(["auto","none","0"]);function DC(i,t,e){let n=0,r;for(;n<i.length&&!r;){const a=i[n];typeof a=="string"&&!IC.has(a)&&xo(a).values.length&&(r=i[n]),n++}if(r&&e)for(const a of t)i[a]=w0(e,r)}class NC extends Sd{constructor(t,e,n,r,a){super(t,e,n,r,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let h=0;h<t.length;h++){let d=t[h];if(typeof d=="string"&&(d=d.trim(),md(d))){const f=p0(d,e.current);f!==void 0&&(t[h]=f),h===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!m0.has(n)||t.length!==2)return;const[r,a]=t,l=Cg(r),c=Cg(a);if(l!==c)if(xg(l)&&xg(c))for(let h=0;h<t.length;h++){const d=t[h];typeof d=="string"&&(t[h]=parseFloat(d))}else cs[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let r=0;r<t.length;r++)(t[r]===null||TC(t[r]))&&n.push(r);n.length&&DC(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=cs[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const r=e[e.length-1];r!==void 0&&t.getValue(n,r).jump(r,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const r=t.getValue(e);r&&r.jump(this.measuredOrigin,!1);const a=n.length-1,l=n[a];n[a]=cs[e](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,h])=>{t.getValue(c).set(h)}),this.resolveNoneKeyframes()}}function FC(i,t,e){if(i instanceof EventTarget)return[i];if(typeof i=="string"){let n=document;const r=e?.[i]??n.querySelectorAll(i);return r?Array.from(r):[]}return Array.from(i)}const b0=(i,t)=>t&&typeof i=="number"?t.transform(i):i;function OC(i){return Ov(i)&&"offsetHeight"in i}const Tg=30,jC=i=>!isNaN(parseFloat(i));class BC{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const r=Ke.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Ke.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=jC(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new hd);const n=this.events[t].add(e);return t==="change"?()=>{n(),Wt.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ke.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Tg)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,Tg);return Bv(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ir(i,t){return new BC(i,t)}const{schedule:_d}=Yv(queueMicrotask,!1),_n={x:!1,y:!1};function x0(){return _n.x||_n.y}function VC(i){return i==="x"||i==="y"?_n[i]?null:(_n[i]=!0,()=>{_n[i]=!1}):_n.x||_n.y?null:(_n.x=_n.y=!0,()=>{_n.x=_n.y=!1})}function A0(i,t){const e=FC(i),n=new AbortController,r={passive:!0,...t,signal:n.signal};return[e,r,()=>n.abort()]}function kg(i){return!(i.pointerType==="touch"||x0())}function zC(i,t,e={}){const[n,r,a]=A0(i,e),l=c=>{if(!kg(c))return;const{target:h}=c,d=t(h,c);if(typeof d!="function"||!h)return;const f=m=>{kg(m)&&(d(m),h.removeEventListener("pointerleave",f))};h.addEventListener("pointerleave",f,r)};return n.forEach(c=>{c.addEventListener("pointerenter",l,r)}),a}const S0=(i,t)=>t?i===t?!0:S0(i,t.parentElement):!1,Td=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,HC=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function $C(i){return HC.has(i.tagName)||i.tabIndex!==-1}const bl=new WeakSet;function Pg(i){return t=>{t.key==="Enter"&&i(t)}}function Qu(i,t){i.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const UC=(i,t)=>{const e=i.currentTarget;if(!e)return;const n=Pg(()=>{if(bl.has(e))return;Qu(e,"down");const r=Pg(()=>{Qu(e,"up")}),a=()=>Qu(e,"cancel");e.addEventListener("keyup",r,t),e.addEventListener("blur",a,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function Rg(i){return Td(i)&&!x0()}function WC(i,t,e={}){const[n,r,a]=A0(i,e),l=c=>{const h=c.currentTarget;if(!Rg(c))return;bl.add(h);const d=t(h,c),f=(w,b)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",g),bl.has(h)&&bl.delete(h),Rg(w)&&typeof d=="function"&&d(w,{success:b})},m=w=>{f(w,h===window||h===document||e.useGlobalTarget||S0(h,w.target))},g=w=>{f(w,!1)};window.addEventListener("pointerup",m,r),window.addEventListener("pointercancel",g,r)};return n.forEach(c=>{(e.useGlobalTarget?window:c).addEventListener("pointerdown",l,r),OC(c)&&(c.addEventListener("focus",d=>UC(d,r)),!$C(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function E0(i){return Ov(i)&&"ownerSVGElement"in i}function GC(i){return E0(i)&&i.tagName==="svg"}const Ne=i=>!!(i&&i.getVelocity),XC=[...y0,ue,Ni],KC=i=>XC.find(g0(i)),C0=P.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});function qC(i=!0){const t=P.useContext(od);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,a=P.useId();P.useEffect(()=>{if(i)return r(a)},[i]);const l=P.useCallback(()=>i&&n&&n(a),[a,n,i]);return!e&&n?[!1,l]:[!0]}const _0=P.createContext({strict:!1}),Mg={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},sr={};for(const i in Mg)sr[i]={isEnabled:t=>Mg[i].some(e=>!!t[e])};function YC(i){for(const t in i)sr[t]={...sr[t],...i[t]}}const QC=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Pl(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||QC.has(i)}let T0=i=>!Pl(i);function JC(i){typeof i=="function"&&(T0=t=>t.startsWith("on")?!Pl(t):i(t))}try{JC(require("@emotion/is-prop-valid").default)}catch{}function ZC(i,t,e){const n={};for(const r in i)r==="values"&&typeof i.values=="object"||(T0(r)||e===!0&&Pl(r)||!t&&!Pl(r)||i.draggable&&r.startsWith("onDrag"))&&(n[r]=i[r]);return n}const Ol=P.createContext({});function jl(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function Ao(i){return typeof i=="string"||Array.isArray(i)}const kd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Pd=["initial",...kd];function Bl(i){return jl(i.animate)||Pd.some(t=>Ao(i[t]))}function k0(i){return!!(Bl(i)||i.variants)}function t_(i,t){if(Bl(i)){const{initial:e,animate:n}=i;return{initial:e===!1||Ao(e)?e:void 0,animate:Ao(n)?n:void 0}}return i.inherit!==!1?t:{}}function e_(i){const{initial:t,animate:e}=t_(i,P.useContext(Ol));return P.useMemo(()=>({initial:t,animate:e}),[Lg(t),Lg(e)])}function Lg(i){return Array.isArray(i)?i.join(" "):i}const So={};function n_(i){for(const t in i)So[t]=i[t],pd(t)&&(So[t].isCSSVariable=!0)}function P0(i,{layout:t,layoutId:e}){return fr.has(i)||i.startsWith("origin")||(t||e!==void 0)&&(!!So[i]||i==="opacity")}const i_={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},s_=dr.length;function r_(i,t,e){let n="",r=!0;for(let a=0;a<s_;a++){const l=dr[a],c=i[l];if(c===void 0)continue;let h=!0;if(typeof c=="number"?h=c===(l.startsWith("scale")?1:0):h=parseFloat(c)===0,!h||e){const d=b0(c,Cd[l]);if(!h){r=!1;const f=i_[l]||l;n+=`${f}(${d}) `}e&&(t[l]=d)}}return n=n.trim(),e?n=e(t,r?"":n):r&&(n="none"),n}function Rd(i,t,e){const{style:n,vars:r,transformOrigin:a}=i;let l=!1,c=!1;for(const h in t){const d=t[h];if(fr.has(h)){l=!0;continue}else if(pd(h)){r[h]=d;continue}else{const f=b0(d,Cd[h]);h.startsWith("origin")?(c=!0,a[h]=f):n[h]=f}}if(t.transform||(l||e?n.transform=r_(t,i.transform,e):n.transform&&(n.transform="none")),c){const{originX:h="50%",originY:d="50%",originZ:f=0}=a;n.transformOrigin=`${h} ${d} ${f}`}}const Md=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function R0(i,t,e){for(const n in t)!Ne(t[n])&&!P0(n,e)&&(i[n]=t[n])}function o_({transformTemplate:i},t){return P.useMemo(()=>{const e=Md();return Rd(e,t,i),Object.assign({},e.vars,e.style)},[t])}function a_(i,t){const e=i.style||{},n={};return R0(n,e,i),Object.assign(n,o_(i,t)),n}function l_(i,t){const e={},n=a_(i,t);return i.drag&&i.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(e.tabIndex=0),e.style=n,e}const c_={offset:"stroke-dashoffset",array:"stroke-dasharray"},u_={offset:"strokeDashoffset",array:"strokeDasharray"};function h_(i,t,e=1,n=0,r=!0){i.pathLength=1;const a=r?c_:u_;i[a.offset]=At.transform(-n);const l=At.transform(t),c=At.transform(e);i[a.array]=`${l} ${c}`}function M0(i,{attrX:t,attrY:e,attrScale:n,pathLength:r,pathSpacing:a=1,pathOffset:l=0,...c},h,d,f){if(Rd(i,c,d),h){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:m,style:g}=i;m.transform&&(g.transform=m.transform,delete m.transform),(g.transform||m.transformOrigin)&&(g.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),g.transform&&(g.transformBox=f?.transformBox??"fill-box",delete m.transformBox),t!==void 0&&(m.x=t),e!==void 0&&(m.y=e),n!==void 0&&(m.scale=n),r!==void 0&&h_(m,r,a,l,!1)}const L0=()=>({...Md(),attrs:{}}),I0=i=>typeof i=="string"&&i.toLowerCase()==="svg";function d_(i,t,e,n){const r=P.useMemo(()=>{const a=L0();return M0(a,t,I0(n),i.transformTemplate,i.style),{...a.attrs,style:{...a.style}}},[t]);if(i.style){const a={};R0(a,i.style,i),r.style={...a,...r.style}}return r}const f_=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ld(i){return typeof i!="string"||i.includes("-")?!1:!!(f_.indexOf(i)>-1||/[A-Z]/u.test(i))}function p_(i,t,e,{latestValues:n},r,a=!1){const c=(Ld(i)?d_:l_)(t,n,r,i),h=ZC(t,typeof i=="string",a),d=i!==P.Fragment?{...h,...c,ref:e}:{},{children:f}=t,m=P.useMemo(()=>Ne(f)?f.get():f,[f]);return P.createElement(i,{...d,children:m})}function Ig(i){const t=[{},{}];return i?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function Id(i,t,e,n){if(typeof t=="function"){const[r,a]=Ig(n);t=t(e!==void 0?e:i.custom,r,a)}if(typeof t=="string"&&(t=i.variants&&i.variants[t]),typeof t=="function"){const[r,a]=Ig(n);t=t(e!==void 0?e:i.custom,r,a)}return t}function xl(i){return Ne(i)?i.get():i}function m_({scrapeMotionValuesFromProps:i,createRenderState:t},e,n,r){return{latestValues:g_(e,n,r,i),renderState:t()}}function g_(i,t,e,n){const r={},a=n(i,{});for(const g in a)r[g]=xl(a[g]);let{initial:l,animate:c}=i;const h=Bl(i),d=k0(i);t&&d&&!h&&i.inherit!==!1&&(l===void 0&&(l=t.initial),c===void 0&&(c=t.animate));let f=e?e.initial===!1:!1;f=f||l===!1;const m=f?c:l;if(m&&typeof m!="boolean"&&!jl(m)){const g=Array.isArray(m)?m:[m];for(let w=0;w<g.length;w++){const b=Id(i,g[w]);if(b){const{transitionEnd:x,transition:S,...E}=b;for(const _ in E){let C=E[_];if(Array.isArray(C)){const R=f?C.length-1:0;C=C[R]}C!==null&&(r[_]=C)}for(const _ in x)r[_]=x[_]}}}return r}const D0=i=>(t,e)=>{const n=P.useContext(Ol),r=P.useContext(od),a=()=>m_(i,t,n,r);return e?a():Y1(a)};function Dd(i,t,e){const{style:n}=i,r={};for(const a in n)(Ne(n[a])||t.style&&Ne(t.style[a])||P0(a,i)||e?.getValue(a)?.liveStyle!==void 0)&&(r[a]=n[a]);return r}const y_=D0({scrapeMotionValuesFromProps:Dd,createRenderState:Md});function N0(i,t,e){const n=Dd(i,t,e);for(const r in i)if(Ne(i[r])||Ne(t[r])){const a=dr.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[a]=i[r]}return n}const v_=D0({scrapeMotionValuesFromProps:N0,createRenderState:L0}),w_=Symbol.for("motionComponentSymbol");function Gs(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function b_(i,t,e){return P.useCallback(n=>{n&&i.onMount&&i.onMount(n),t&&(n?t.mount(n):t.unmount()),e&&(typeof e=="function"?e(n):Gs(e)&&(e.current=n))},[t])}const Nd=i=>i.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),x_="framerAppearId",F0="data-"+Nd(x_),O0=P.createContext({});function A_(i,t,e,n,r){const{visualElement:a}=P.useContext(Ol),l=P.useContext(_0),c=P.useContext(od),h=P.useContext(C0).reducedMotion,d=P.useRef(null);n=n||l.renderer,!d.current&&n&&(d.current=n(i,{visualState:t,parent:a,props:e,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const f=d.current,m=P.useContext(O0);f&&!f.projection&&r&&(f.type==="html"||f.type==="svg")&&S_(d.current,e,r,m);const g=P.useRef(!1);P.useInsertionEffect(()=>{f&&g.current&&f.update(e,c)});const w=e[F0],b=P.useRef(!!w&&!window.MotionHandoffIsComplete?.(w)&&window.MotionHasOptimisedAnimation?.(w));return Q1(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),b.current&&f.animationState&&f.animationState.animateChanges())}),P.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(w)}),b.current=!1),f.enteringChildren=void 0)}),f}function S_(i,t,e,n){const{layoutId:r,layout:a,drag:l,dragConstraints:c,layoutScroll:h,layoutRoot:d,layoutCrossfade:f}=t;i.projection=new e(i.latestValues,t["data-framer-portal-id"]?void 0:j0(i.parent)),i.projection.setOptions({layoutId:r,layout:a,alwaysMeasureLayout:!!l||c&&Gs(c),visualElement:i,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:f,layoutScroll:h,layoutRoot:d})}function j0(i){if(i)return i.options.allowProjection!==!1?i.projection:j0(i.parent)}function Ju(i,{forwardMotionProps:t=!1}={},e,n){e&&YC(e);const r=Ld(i)?v_:y_;function a(c,h){let d;const f={...P.useContext(C0),...c,layoutId:E_(c)},{isStatic:m}=f,g=e_(c),w=r(c,m);if(!m&&rd){C_();const b=__(f);d=b.MeasureLayout,g.visualElement=A_(i,w,f,n,b.ProjectionNode)}return F.jsxs(Ol.Provider,{value:g,children:[d&&g.visualElement?F.jsx(d,{visualElement:g.visualElement,...f}):null,p_(i,c,b_(w,g.visualElement,h),w,m,t)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const l=P.forwardRef(a);return l[w_]=i,l}function E_({layoutId:i}){const t=P.useContext(Nv).id;return t&&i!==void 0?t+"-"+i:i}function C_(i,t){P.useContext(_0).strict}function __(i){const{drag:t,layout:e}=sr;if(!t&&!e)return{};const n={...t,...e};return{MeasureLayout:t?.isEnabled(i)||e?.isEnabled(i)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function T_(i,t){if(typeof Proxy>"u")return Ju;const e=new Map,n=(a,l)=>Ju(a,l,i,t),r=(a,l)=>n(a,l);return new Proxy(r,{get:(a,l)=>l==="create"?n:(e.has(l)||e.set(l,Ju(l,void 0,i,t)),e.get(l))})}function B0({top:i,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:i,max:n}}}function k_({x:i,y:t}){return{top:t.min,right:i.max,bottom:t.max,left:i.min}}function P_(i,t){if(!t)return i;const e=t({x:i.left,y:i.top}),n=t({x:i.right,y:i.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function Zu(i){return i===void 0||i===1}function Dh({scale:i,scaleX:t,scaleY:e}){return!Zu(i)||!Zu(t)||!Zu(e)}function is(i){return Dh(i)||V0(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function V0(i){return Dg(i.x)||Dg(i.y)}function Dg(i){return i&&i!=="0%"}function Rl(i,t,e){const n=i-e,r=t*n;return e+r}function Ng(i,t,e,n,r){return r!==void 0&&(i=Rl(i,r,n)),Rl(i,e,n)+t}function Nh(i,t=0,e=1,n,r){i.min=Ng(i.min,t,e,n,r),i.max=Ng(i.max,t,e,n,r)}function z0(i,{x:t,y:e}){Nh(i.x,t.translate,t.scale,t.originPoint),Nh(i.y,e.translate,e.scale,e.originPoint)}const Fg=.999999999999,Og=1.0000000000001;function R_(i,t,e,n=!1){const r=e.length;if(!r)return;t.x=t.y=1;let a,l;for(let c=0;c<r;c++){a=e[c],l=a.projectionDelta;const{visualElement:h}=a.options;h&&h.props.style&&h.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ks(i,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,z0(i,l)),n&&is(a.latestValues)&&Ks(i,a.latestValues))}t.x<Og&&t.x>Fg&&(t.x=1),t.y<Og&&t.y>Fg&&(t.y=1)}function Xs(i,t){i.min=i.min+t,i.max=i.max+t}function jg(i,t,e,n,r=.5){const a=qt(i.min,i.max,r);Nh(i,t,e,a,n)}function Ks(i,t){jg(i.x,t.x,t.scaleX,t.scale,t.originX),jg(i.y,t.y,t.scaleY,t.scale,t.originY)}function H0(i,t){return B0(P_(i.getBoundingClientRect(),t))}function M_(i,t,e){const n=H0(i,e),{scroll:r}=t;return r&&(Xs(n.x,r.offset.x),Xs(n.y,r.offset.y)),n}const Bg=()=>({translate:0,scale:1,origin:0,originPoint:0}),qs=()=>({x:Bg(),y:Bg()}),Vg=()=>({min:0,max:0}),re=()=>({x:Vg(),y:Vg()}),Fh={current:null},$0={current:!1};function L_(){if($0.current=!0,!!rd)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),t=()=>Fh.current=i.matches;i.addEventListener("change",t),t()}else Fh.current=!1}const I_=new WeakMap;function D_(i,t,e){for(const n in t){const r=t[n],a=e[n];if(Ne(r))i.addValue(n,r);else if(Ne(a))i.addValue(n,ir(r,{owner:i}));else if(a!==r)if(i.hasValue(n)){const l=i.getValue(n);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=i.getStaticValue(n);i.addValue(n,ir(l!==void 0?l:r,{owner:i}))}}for(const n in e)t[n]===void 0&&i.removeValue(n);return t}const zg=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class N_{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:a,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Sd,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Ke.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Wt.render(this.render,!1,!0))};const{latestValues:h,renderState:d}=l;this.latestValues=h,this.baseTarget={...h},this.initialValues=e.initial?{...h}:{},this.renderState=d,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=Bl(e),this.isVariantNode=k0(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(e,{},this);for(const g in m){const w=m[g];h[g]!==void 0&&Ne(w)&&w.set(h[g])}}mount(t){this.current=t,I_.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,n)=>this.bindToMotionValue(n,e)),$0.current||L_(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Fh.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Di(this.notifyUpdate),Di(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=fr.has(t);n&&this.onBindTransform&&this.onBindTransform();const r=e.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Wt.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{r(),a&&a(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in sr){const e=sr[t];if(!e)continue;const{isEnabled:n,Feature:r}=e;if(!this.features[t]&&r&&n(this.props)&&(this.features[t]=new r(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):re()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<zg.length;n++){const r=zg[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const a="on"+r,l=t[a];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=D_(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=ir(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(Fv(n)||jv(n))?n=parseFloat(n):!KC(n)&&Ni.test(e)&&(n=w0(t,e)),this.setBaseTarget(t,Ne(n)?n.get():n)),Ne(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let n;if(typeof e=="string"||typeof e=="object"){const a=Id(this.props,e,this.presenceContext?.custom);a&&(n=a[t])}if(e&&n!==void 0)return n;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!Ne(r)?r:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new hd),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){_d.render(this.render)}}class U0 extends N_{constructor(){super(...arguments),this.KeyframeResolver=NC}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ne(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function W0(i,{style:t,vars:e},n,r){const a=i.style;let l;for(l in t)a[l]=t[l];r?.applyProjectionStyles(a,n);for(l in e)a.setProperty(l,e[l])}function F_(i){return window.getComputedStyle(i)}class O_ extends U0{constructor(){super(...arguments),this.type="html",this.renderInstance=W0}readValueFromInstance(t,e){if(fr.has(e))return this.projection?.isProjecting?Th(e):tC(t,e);{const n=F_(t),r=(pd(e)?n.getPropertyValue(e):n[e])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:e}){return H0(t,e)}build(t,e,n){Rd(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return Dd(t,e,n)}}const G0=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function j_(i,t,e,n){W0(i,t,void 0,n);for(const r in t.attrs)i.setAttribute(G0.has(r)?r:Nd(r),t.attrs[r])}class B_ extends U0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=re}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(fr.has(e)){const n=v0(e);return n&&n.default||0}return e=G0.has(e)?e:Nd(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return N0(t,e,n)}build(t,e,n){M0(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,r){j_(t,e,n,r)}mount(t){this.isSVGTag=I0(t.tagName),super.mount(t)}}const V_=(i,t)=>Ld(i)?new B_(t):new O_(t,{allowProjection:i!==P.Fragment});function Zs(i,t,e){const n=i.getProps();return Id(n,t,e!==void 0?e:n.custom,i)}const Oh=i=>Array.isArray(i);function z_(i,t,e){i.hasValue(t)?i.getValue(t).set(e):i.addValue(t,ir(e))}function H_(i){return Oh(i)?i[i.length-1]||0:i}function $_(i,t){const e=Zs(i,t);let{transitionEnd:n={},transition:r={},...a}=e||{};a={...a,...n};for(const l in a){const c=H_(a[l]);z_(i,l,c)}}function U_(i){return!!(Ne(i)&&i.add)}function jh(i,t){const e=i.getValue("willChange");if(U_(e))return e.add(t);if(!e&&oi.WillChange){const n=new oi.WillChange("auto");i.addValue("willChange",n),n.add(t)}}function X0(i){return i.props[F0]}const W_=i=>i!==null;function G_(i,{repeat:t,repeatType:e="loop"},n){const r=i.filter(W_),a=t&&e!=="loop"&&t%2===1?0:r.length-1;return r[a]}const X_={type:"spring",stiffness:500,damping:25,restSpeed:10},K_=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),q_={type:"keyframes",duration:.8},Y_={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Q_=(i,{keyframes:t})=>t.length>2?q_:fr.has(i)?i.startsWith("scale")?K_(t[1]):X_:Y_;function J_({when:i,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:r,repeat:a,repeatType:l,repeatDelay:c,from:h,elapsed:d,...f}){return!!Object.keys(f).length}const Fd=(i,t,e,n={},r,a)=>l=>{const c=Ed(n,i)||{},h=c.delay||n.delay||0;let{elapsed:d=0}=n;d=d-zn(h);const f={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-d,onUpdate:g=>{t.set(g),c.onUpdate&&c.onUpdate(g)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:i,motionValue:t,element:a?void 0:r};J_(c)||Object.assign(f,Q_(i,f)),f.duration&&(f.duration=zn(f.duration)),f.repeatDelay&&(f.repeatDelay=zn(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let m=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(Lh(f),f.delay===0&&(m=!0)),(oi.instantAnimations||oi.skipAnimations)&&(m=!0,Lh(f),f.delay=0),f.allowFlatten=!c.type&&!c.ease,m&&!a&&t.get()!==void 0){const g=G_(f.keyframes,c);if(g!==void 0){Wt.update(()=>{f.onUpdate(g),f.onComplete()});return}}return c.isSync?new Ad(f):new SC(f)};function Z_({protectedKeys:i,needsAnimating:t},e){const n=i.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function K0(i,t,{delay:e=0,transitionOverride:n,type:r}={}){let{transition:a=i.getDefaultTransition(),transitionEnd:l,...c}=t;n&&(a=n);const h=[],d=r&&i.animationState&&i.animationState.getState()[r];for(const f in c){const m=i.getValue(f,i.latestValues[f]??null),g=c[f];if(g===void 0||d&&Z_(d,f))continue;const w={delay:e,...Ed(a||{},f)},b=m.get();if(b!==void 0&&!m.isAnimating&&!Array.isArray(g)&&g===b&&!w.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const E=X0(i);if(E){const _=window.MotionHandoffAnimation(E,f,Wt);_!==null&&(w.startTime=_,x=!0)}}jh(i,f),m.start(Fd(f,m,g,i.shouldReduceMotion&&m0.has(f)?{type:!1}:w,i,x));const S=m.animation;S&&h.push(S)}return l&&Promise.all(h).then(()=>{Wt.update(()=>{l&&$_(i,l)})}),h}function q0(i,t,e,n=0,r=1){const a=Array.from(i).sort((d,f)=>d.sortNodePosition(f)).indexOf(t),l=i.size,c=(l-1)*n;return typeof e=="function"?e(a,l):r===1?a*n:c-a*n}function Bh(i,t,e={}){const n=Zs(i,t,e.type==="exit"?i.presenceContext?.custom:void 0);let{transition:r=i.getDefaultTransition()||{}}=n||{};e.transitionOverride&&(r=e.transitionOverride);const a=n?()=>Promise.all(K0(i,n,e)):()=>Promise.resolve(),l=i.variantChildren&&i.variantChildren.size?(h=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:m}=r;return tT(i,t,h,d,f,m,e)}:()=>Promise.resolve(),{when:c}=r;if(c){const[h,d]=c==="beforeChildren"?[a,l]:[l,a];return h().then(()=>d())}else return Promise.all([a(),l(e.delay)])}function tT(i,t,e=0,n=0,r=0,a=1,l){const c=[];for(const h of i.variantChildren)h.notify("AnimationStart",t),c.push(Bh(h,t,{...l,delay:e+(typeof n=="function"?0:n)+q0(i.variantChildren,h,n,r,a)}).then(()=>h.notify("AnimationComplete",t)));return Promise.all(c)}function eT(i,t,e={}){i.notify("AnimationStart",t);let n;if(Array.isArray(t)){const r=t.map(a=>Bh(i,a,e));n=Promise.all(r)}else if(typeof t=="string")n=Bh(i,t,e);else{const r=typeof t=="function"?Zs(i,t,e.custom):t;n=Promise.all(K0(i,r,e))}return n.then(()=>{i.notify("AnimationComplete",t)})}function Y0(i,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==i.length)return!1;for(let n=0;n<e;n++)if(t[n]!==i[n])return!1;return!0}const nT=Pd.length;function Q0(i){if(!i)return;if(!i.isControllingVariants){const e=i.parent?Q0(i.parent)||{}:{};return i.props.initial!==void 0&&(e.initial=i.props.initial),e}const t={};for(let e=0;e<nT;e++){const n=Pd[e],r=i.props[n];(Ao(r)||r===!1)&&(t[n]=r)}return t}const iT=[...kd].reverse(),sT=kd.length;function rT(i){return t=>Promise.all(t.map(({animation:e,options:n})=>eT(i,e,n)))}function oT(i){let t=rT(i),e=Hg(),n=!0;const r=h=>(d,f)=>{const m=Zs(i,f,h==="exit"?i.presenceContext?.custom:void 0);if(m){const{transition:g,transitionEnd:w,...b}=m;d={...d,...b,...w}}return d};function a(h){t=h(i)}function l(h){const{props:d}=i,f=Q0(i.parent)||{},m=[],g=new Set;let w={},b=1/0;for(let S=0;S<sT;S++){const E=iT[S],_=e[E],C=d[E]!==void 0?d[E]:f[E],R=Ao(C),k=E===h?_.isActive:null;k===!1&&(b=S);let N=C===f[E]&&C!==d[E]&&R;if(N&&n&&i.manuallyAnimateOnMount&&(N=!1),_.protectedKeys={...w},!_.isActive&&k===null||!C&&!_.prevProp||jl(C)||typeof C=="boolean")continue;const O=aT(_.prevProp,C);let L=O||E===h&&_.isActive&&!N&&R||S>b&&R,H=!1;const W=Array.isArray(C)?C:[C];let Y=W.reduce(r(E),{});k===!1&&(Y={});const{prevResolvedValues:ft={}}=_,dt={...ft,...Y},nt=U=>{L=!0,g.has(U)&&(H=!0,g.delete(U)),_.needsAnimating[U]=!0;const B=i.getValue(U);B&&(B.liveStyle=!1)};for(const U in dt){const B=Y[U],tt=ft[U];if(w.hasOwnProperty(U))continue;let Q=!1;Oh(B)&&Oh(tt)?Q=!Y0(B,tt):Q=B!==tt,Q?B!=null?nt(U):g.add(U):B!==void 0&&g.has(U)?nt(U):_.protectedKeys[U]=!0}_.prevProp=C,_.prevResolvedValues=Y,_.isActive&&(w={...w,...Y}),n&&i.blockInitialAnimation&&(L=!1);const xt=N&&O;L&&(!xt||H)&&m.push(...W.map(U=>{const B={type:E};if(typeof U=="string"&&n&&!xt&&i.manuallyAnimateOnMount&&i.parent){const{parent:tt}=i,Q=Zs(tt,U);if(tt.enteringChildren&&Q){const{delayChildren:D}=Q.transition||{};B.delay=q0(tt.enteringChildren,i,D)}}return{animation:U,options:B}}))}if(g.size){const S={};if(typeof d.initial!="boolean"){const E=Zs(i,Array.isArray(d.initial)?d.initial[0]:d.initial);E&&E.transition&&(S.transition=E.transition)}g.forEach(E=>{const _=i.getBaseTarget(E),C=i.getValue(E);C&&(C.liveStyle=!0),S[E]=_??null}),m.push({animation:S})}let x=!!m.length;return n&&(d.initial===!1||d.initial===d.animate)&&!i.manuallyAnimateOnMount&&(x=!1),n=!1,x?t(m):Promise.resolve()}function c(h,d){if(e[h].isActive===d)return Promise.resolve();i.variantChildren?.forEach(m=>m.animationState?.setActive(h,d)),e[h].isActive=d;const f=l(h);for(const m in e)e[m].protectedKeys={};return f}return{animateChanges:l,setActive:c,setAnimateFunction:a,getState:()=>e,reset:()=>{e=Hg(),n=!0}}}function aT(i,t){return typeof t=="string"?t!==i:Array.isArray(t)?!Y0(t,i):!1}function es(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Hg(){return{animate:es(!0),whileInView:es(),whileHover:es(),whileTap:es(),whileDrag:es(),whileFocus:es(),exit:es()}}class ji{constructor(t){this.isMounted=!1,this.node=t}update(){}}class lT extends ji{constructor(t){super(t),t.animationState||(t.animationState=oT(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();jl(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let cT=0;class uT extends ji{constructor(){super(...arguments),this.id=cT++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const r=this.node.animationState.setActive("exit",!t);e&&!t&&r.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const hT={animation:{Feature:lT},exit:{Feature:uT}};function Eo(i,t,e,n={passive:!0}){return i.addEventListener(t,e,n),()=>i.removeEventListener(t,e)}function Fo(i){return{point:{x:i.pageX,y:i.pageY}}}const dT=i=>t=>Td(t)&&i(t,Fo(t));function fo(i,t,e,n){return Eo(i,t,dT(e),n)}const J0=1e-4,fT=1-J0,pT=1+J0,Z0=.01,mT=0-Z0,gT=0+Z0;function Be(i){return i.max-i.min}function yT(i,t,e){return Math.abs(i-t)<=e}function $g(i,t,e,n=.5){i.origin=n,i.originPoint=qt(t.min,t.max,i.origin),i.scale=Be(e)/Be(t),i.translate=qt(e.min,e.max,i.origin)-i.originPoint,(i.scale>=fT&&i.scale<=pT||isNaN(i.scale))&&(i.scale=1),(i.translate>=mT&&i.translate<=gT||isNaN(i.translate))&&(i.translate=0)}function po(i,t,e,n){$g(i.x,t.x,e.x,n?n.originX:void 0),$g(i.y,t.y,e.y,n?n.originY:void 0)}function Ug(i,t,e){i.min=e.min+t.min,i.max=i.min+Be(t)}function vT(i,t,e){Ug(i.x,t.x,e.x),Ug(i.y,t.y,e.y)}function Wg(i,t,e){i.min=t.min-e.min,i.max=i.min+Be(t)}function mo(i,t,e){Wg(i.x,t.x,e.x),Wg(i.y,t.y,e.y)}function fn(i){return[i("x"),i("y")]}const tw=({current:i})=>i?i.ownerDocument.defaultView:null,Gg=(i,t)=>Math.abs(i-t);function wT(i,t){const e=Gg(i.x,t.x),n=Gg(i.y,t.y);return Math.sqrt(e**2+n**2)}class ew{constructor(t,e,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=eh(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,b=wT(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!b)return;const{point:x}=g,{timestamp:S}=_e;this.history.push({...x,timestamp:S});const{onStart:E,onMove:_}=this.handlers;w||(E&&E(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,g)},this.handlePointerMove=(g,w)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=th(w,this.transformPagePoint),Wt.update(this.updatePoint,!0)},this.handlePointerUp=(g,w)=>{this.end();const{onEnd:b,onSessionEnd:x,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=eh(g.type==="pointercancel"?this.lastMoveEventInfo:th(w,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,E),x&&x(g,E)},!Td(t))return;this.dragSnapToOrigin=a,this.handlers=e,this.transformPagePoint=n,this.distanceThreshold=l,this.contextWindow=r||window;const c=Fo(t),h=th(c,this.transformPagePoint),{point:d}=h,{timestamp:f}=_e;this.history=[{...d,timestamp:f}];const{onSessionStart:m}=e;m&&m(t,eh(h,this.history)),this.removeListeners=Io(fo(this.contextWindow,"pointermove",this.handlePointerMove),fo(this.contextWindow,"pointerup",this.handlePointerUp),fo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Di(this.updatePoint)}}function th(i,t){return t?{point:t(i.point)}:i}function Xg(i,t){return{x:i.x-t.x,y:i.y-t.y}}function eh({point:i},t){return{point:i,delta:Xg(i,nw(t)),offset:Xg(i,bT(t)),velocity:xT(t,.1)}}function bT(i){return i[0]}function nw(i){return i[i.length-1]}function xT(i,t){if(i.length<2)return{x:0,y:0};let e=i.length-1,n=null;const r=nw(i);for(;e>=0&&(n=i[e],!(r.timestamp-n.timestamp>zn(t)));)e--;if(!n)return{x:0,y:0};const a=Hn(r.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const l={x:(r.x-n.x)/a,y:(r.y-n.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function AT(i,{min:t,max:e},n){return t!==void 0&&i<t?i=n?qt(t,i,n.min):Math.max(i,t):e!==void 0&&i>e&&(i=n?qt(e,i,n.max):Math.min(i,e)),i}function Kg(i,t,e){return{min:t!==void 0?i.min+t:void 0,max:e!==void 0?i.max+e-(i.max-i.min):void 0}}function ST(i,{top:t,left:e,bottom:n,right:r}){return{x:Kg(i.x,e,r),y:Kg(i.y,t,n)}}function qg(i,t){let e=t.min-i.min,n=t.max-i.max;return t.max-t.min<i.max-i.min&&([e,n]=[n,e]),{min:e,max:n}}function ET(i,t){return{x:qg(i.x,t.x),y:qg(i.y,t.y)}}function CT(i,t){let e=.5;const n=Be(i),r=Be(t);return r>n?e=wo(t.min,t.max-n,i.min):n>r&&(e=wo(i.min,i.max-r,t.min)),ri(0,1,e)}function _T(i,t){const e={};return t.min!==void 0&&(e.min=t.min-i.min),t.max!==void 0&&(e.max=t.max-i.min),e}const Vh=.35;function TT(i=Vh){return i===!1?i=0:i===!0&&(i=Vh),{x:Yg(i,"left","right"),y:Yg(i,"top","bottom")}}function Yg(i,t,e){return{min:Qg(i,t),max:Qg(i,e)}}function Qg(i,t){return typeof i=="number"?i:i[t]||0}const kT=new WeakMap;class PT{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=re(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:n}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Fo(m).point)},l=(m,g)=>{const{drag:w,dragPropagation:b,onDragStart:x}=this.getProps();if(w&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=VC(w),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fn(E=>{let _=this.getAxisMotionValue(E).get()||0;if($n.test(_)){const{projection:C}=this.visualElement;if(C&&C.layout){const R=C.layout.layoutBox[E];R&&(_=Be(R)*(parseFloat(_)/100))}}this.originPoint[E]=_}),x&&Wt.postRender(()=>x(m,g)),jh(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},c=(m,g)=>{this.latestPointerEvent=m,this.latestPanInfo=g;const{dragPropagation:w,dragDirectionLock:b,onDirectionLock:x,onDrag:S}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:E}=g;if(b&&this.currentDirection===null){this.currentDirection=RT(E),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",g.point,E),this.updateAxis("y",g.point,E),this.visualElement.render(),S&&S(m,g)},h=(m,g)=>{this.latestPointerEvent=m,this.latestPanInfo=g,this.stop(m,g),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>fn(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new ew(t,{onSessionStart:a,onStart:l,onMove:c,onSessionEnd:h,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:n,contextWindow:tw(this.visualElement)})}stop(t,e){const n=t||this.latestPointerEvent,r=e||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!r||!n)return;const{velocity:l}=r;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&Wt.postRender(()=>c(n,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:r}=this.getProps();if(!n||!cl(t,r,this.currentDirection))return;const a=this.getAxisMotionValue(t);let l=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(l=AT(l,this.constraints[t],this.elastic[t])),a.set(l)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;t&&Gs(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=ST(n.layoutBox,t):this.constraints=!1,this.elastic=TT(e),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&fn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=_T(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Gs(t))return!1;const n=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=M_(n,r.root,this.visualElement.getTransformPagePoint());let l=ET(r.layout.layoutBox,a);if(e){const c=e(k_(l));this.hasMutatedConstraints=!!c,c&&(l=B0(c))}return l}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:r,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),h=this.constraints||{},d=fn(f=>{if(!cl(f,e,this.currentDirection))return;let m=h&&h[f]||{};l&&(m={min:0,max:0});const g=r?200:1e6,w=r?40:1e7,b={type:"inertia",velocity:n?t[f]:0,bounceStiffness:g,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...a,...m};return this.startAxisValueAnimation(f,b)});return Promise.all(d).then(c)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return jh(this.visualElement,t),n.start(Fd(t,n,0,e,this.visualElement,!1))}stopAnimation(){fn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){fn(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),r=n[e];return r||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){fn(e=>{const{drag:n}=this.getProps();if(!cl(e,n,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(e);if(r&&r.layout){const{min:l,max:c}=r.layout.layoutBox[e];a.set(t[e]-qt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!Gs(e)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};fn(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const h=c.get();r[l]=CT({min:h,max:h},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),fn(l=>{if(!cl(l,t,null))return;const c=this.getAxisMotionValue(l),{min:h,max:d}=this.constraints[l];c.set(qt(h,d,r[l]))})}addListeners(){if(!this.visualElement.current)return;kT.set(this.visualElement,this);const t=this.visualElement.current,e=fo(t,"pointerdown",h=>{const{drag:d,dragListener:f=!0}=this.getProps();d&&f&&this.start(h)}),n=()=>{const{dragConstraints:h}=this.getProps();Gs(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,a=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Wt.read(n);const l=Eo(window,"resize",()=>this.scalePositionWithinConstraints()),c=r.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:d})=>{this.isDragging&&d&&(fn(f=>{const m=this.getAxisMotionValue(f);m&&(this.originPoint[f]+=h[f].translate,m.set(m.get()+h[f].translate))}),this.visualElement.render())}));return()=>{l(),e(),a(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:l=Vh,dragMomentum:c=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:r,dragConstraints:a,dragElastic:l,dragMomentum:c}}}function cl(i,t,e){return(t===!0||t===i)&&(e===null||e===i)}function RT(i,t=10){let e=null;return Math.abs(i.y)>t?e="y":Math.abs(i.x)>t&&(e="x"),e}class MT extends ji{constructor(t){super(t),this.removeGroupControls=pn,this.removeListeners=pn,this.controls=new PT(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Jg=i=>(t,e)=>{i&&Wt.postRender(()=>i(t,e))};class LT extends ji{constructor(){super(...arguments),this.removePointerDownListener=pn}onPointerDown(t){this.session=new ew(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:tw(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Jg(t),onStart:Jg(e),onMove:n,onEnd:(a,l)=>{delete this.session,r&&Wt.postRender(()=>r(a,l))}}}mount(){this.removePointerDownListener=fo(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Al={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Zg(i,t){return t.max===t.min?0:i/(t.max-t.min)*100}const no={correct:(i,t)=>{if(!t.target)return i;if(typeof i=="string")if(At.test(i))i=parseFloat(i);else return i;const e=Zg(i,t.target.x),n=Zg(i,t.target.y);return`${e}% ${n}%`}},IT={correct:(i,{treeScale:t,projectionDelta:e})=>{const n=i,r=Ni.parse(i);if(r.length>5)return n;const a=Ni.createTransformer(i),l=typeof r[0]!="number"?1:0,c=e.x.scale*t.x,h=e.y.scale*t.y;r[0+l]/=c,r[1+l]/=h;const d=qt(c,h,.5);return typeof r[2+l]=="number"&&(r[2+l]/=d),typeof r[3+l]=="number"&&(r[3+l]/=d),a(r)}};let nh=!1;class DT extends P.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:r}=this.props,{projection:a}=t;n_(NT),a&&(e.group&&e.group.add(a),n&&n.register&&r&&n.register(a),nh&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Al.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:r,isPresent:a}=this.props,{projection:l}=n;return l&&(l.isPresent=a,nh=!0,r||t.layoutDependency!==e||e===void 0||t.isPresent!==a?l.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?l.promote():l.relegate()||Wt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),_d.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:r}=t;nh=!0,r&&(r.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function iw(i){const[t,e]=qC(),n=P.useContext(Nv);return F.jsx(DT,{...i,layoutGroup:n,switchLayoutGroup:P.useContext(O0),isPresent:t,safeToRemove:e})}const NT={borderRadius:{...no,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:no,borderTopRightRadius:no,borderBottomLeftRadius:no,borderBottomRightRadius:no,boxShadow:IT};function FT(i,t,e){const n=Ne(i)?i:ir(i);return n.start(Fd("",n,t,e)),n.animation}const OT=(i,t)=>i.depth-t.depth;class jT{constructor(){this.children=[],this.isDirty=!1}add(t){ad(this.children,t),this.isDirty=!0}remove(t){ld(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(OT),this.isDirty=!1,this.children.forEach(t)}}function BT(i,t){const e=Ke.now(),n=({timestamp:r})=>{const a=r-e;a>=t&&(Di(n),i(a-t))};return Wt.setup(n,!0),()=>Di(n)}const sw=["TopLeft","TopRight","BottomLeft","BottomRight"],VT=sw.length,ty=i=>typeof i=="string"?parseFloat(i):i,ey=i=>typeof i=="number"||At.test(i);function zT(i,t,e,n,r,a){r?(i.opacity=qt(0,e.opacity??1,HT(n)),i.opacityExit=qt(t.opacity??1,0,$T(n))):a&&(i.opacity=qt(t.opacity??1,e.opacity??1,n));for(let l=0;l<VT;l++){const c=`border${sw[l]}Radius`;let h=ny(t,c),d=ny(e,c);if(h===void 0&&d===void 0)continue;h||(h=0),d||(d=0),h===0||d===0||ey(h)===ey(d)?(i[c]=Math.max(qt(ty(h),ty(d),n),0),($n.test(d)||$n.test(h))&&(i[c]+="%")):i[c]=d}(t.rotate||e.rotate)&&(i.rotate=qt(t.rotate||0,e.rotate||0,n))}function ny(i,t){return i[t]!==void 0?i[t]:i.borderRadius}const HT=rw(0,.5,Gv),$T=rw(.5,.95,pn);function rw(i,t,e){return n=>n<i?0:n>t?1:e(wo(i,t,n))}function iy(i,t){i.min=t.min,i.max=t.max}function un(i,t){iy(i.x,t.x),iy(i.y,t.y)}function sy(i,t){i.translate=t.translate,i.scale=t.scale,i.originPoint=t.originPoint,i.origin=t.origin}function ry(i,t,e,n,r){return i-=t,i=Rl(i,1/e,n),r!==void 0&&(i=Rl(i,1/r,n)),i}function UT(i,t=0,e=1,n=.5,r,a=i,l=i){if($n.test(t)&&(t=parseFloat(t),t=qt(l.min,l.max,t/100)-l.min),typeof t!="number")return;let c=qt(a.min,a.max,n);i===a&&(c-=t),i.min=ry(i.min,t,e,c,r),i.max=ry(i.max,t,e,c,r)}function oy(i,t,[e,n,r],a,l){UT(i,t[e],t[n],t[r],t.scale,a,l)}const WT=["x","scaleX","originX"],GT=["y","scaleY","originY"];function ay(i,t,e,n){oy(i.x,t,WT,e?e.x:void 0,n?n.x:void 0),oy(i.y,t,GT,e?e.y:void 0,n?n.y:void 0)}function ly(i){return i.translate===0&&i.scale===1}function ow(i){return ly(i.x)&&ly(i.y)}function cy(i,t){return i.min===t.min&&i.max===t.max}function XT(i,t){return cy(i.x,t.x)&&cy(i.y,t.y)}function uy(i,t){return Math.round(i.min)===Math.round(t.min)&&Math.round(i.max)===Math.round(t.max)}function aw(i,t){return uy(i.x,t.x)&&uy(i.y,t.y)}function hy(i){return Be(i.x)/Be(i.y)}function dy(i,t){return i.translate===t.translate&&i.scale===t.scale&&i.originPoint===t.originPoint}class KT{constructor(){this.members=[]}add(t){ad(this.members,t),t.scheduleRender()}remove(t){if(ld(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(r=>t===r);if(e===0)return!1;let n;for(let r=e;r>=0;r--){const a=this.members[r];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function qT(i,t,e){let n="";const r=i.x.translate/t.x,a=i.y.translate/t.y,l=e?.z||0;if((r||a||l)&&(n=`translate3d(${r}px, ${a}px, ${l}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:d,rotate:f,rotateX:m,rotateY:g,skewX:w,skewY:b}=e;d&&(n=`perspective(${d}px) ${n}`),f&&(n+=`rotate(${f}deg) `),m&&(n+=`rotateX(${m}deg) `),g&&(n+=`rotateY(${g}deg) `),w&&(n+=`skewX(${w}deg) `),b&&(n+=`skewY(${b}deg) `)}const c=i.x.scale*t.x,h=i.y.scale*t.y;return(c!==1||h!==1)&&(n+=`scale(${c}, ${h})`),n||"none"}const ih=["","X","Y","Z"],YT=1e3;let QT=0;function sh(i,t,e,n){const{latestValues:r}=t;r[i]&&(e[i]=r[i],t.setStaticValue(i,0),n&&(n[i]=0))}function lw(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:t}=i.options;if(!t)return;const e=X0(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:r,layoutId:a}=i.options;window.MotionCancelOptimisedAnimation(e,"transform",Wt,!(r||a))}const{parent:n}=i;n&&!n.hasCheckedOptimisedAppear&&lw(n)}function cw({attachResizeListener:i,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(l={},c=t?.()){this.id=QT++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(tk),this.nodes.forEach(sk),this.nodes.forEach(rk),this.nodes.forEach(ek)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new jT)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new hd),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const h=this.eventHandlers.get(l);h&&h.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=E0(l)&&!GC(l),this.instance=l;const{layoutId:c,layout:h,visualElement:d}=this.options;if(d&&!d.current&&d.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||c)&&(this.isLayoutDirty=!0),i){let f,m=0;const g=()=>this.root.updateBlockedByResize=!1;Wt.read(()=>{m=window.innerWidth}),i(l,()=>{const w=window.innerWidth;w!==m&&(m=w,this.root.updateBlockedByResize=!0,f&&f(),f=BT(g,250),Al.hasAnimatedSinceResize&&(Al.hasAnimatedSinceResize=!1,this.nodes.forEach(my)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||h)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeLayoutChanged:g,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||d.getDefaultTransition()||uk,{onLayoutAnimationStart:x,onLayoutAnimationComplete:S}=d.getProps(),E=!this.targetLayout||!aw(this.targetLayout,w),_=!m&&g;if(this.options.layoutRoot||this.resumeFrom||_||m&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const C={...Ed(b,"layout"),onPlay:x,onComplete:S};(d.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C),this.setAnimationOrigin(f,_)}else m||my(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Di(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ok),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&lw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const m=this.path[f];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:h}=this.options;if(c===void 0&&!h)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(fy);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(py);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ik),this.nodes.forEach(JT),this.nodes.forEach(ZT)):this.nodes.forEach(py),this.clearAllSnapshots();const c=Ke.now();_e.delta=ri(0,1e3/60,c-_e.timestamp),_e.timestamp=c,_e.isProcessing=!0,Gu.update.process(_e),Gu.preRender.process(_e),Gu.render.process(_e),_e.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,_d.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nk),this.sharedNodes.forEach(ak)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Wt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Wt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Be(this.snapshot.measuredBox.x)&&!Be(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=re(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const h=n(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!ow(this.projectionDelta),h=this.getTransformTemplate(),d=h?h(this.latestValues,""):void 0,f=d!==this.prevTransformTemplateValue;l&&this.instance&&(c||is(this.latestValues)||f)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let h=this.removeElementScroll(c);return l&&(h=this.removeTransform(h)),hk(h),{animationId:this.root.animationId,measuredBox:c,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return re();const c=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(dk))){const{scroll:d}=this.root;d&&(Xs(c.x,d.offset.x),Xs(c.y,d.offset.y))}return c}removeElementScroll(l){const c=re();if(un(c,l),this.scroll?.wasRoot)return c;for(let h=0;h<this.path.length;h++){const d=this.path[h],{scroll:f,options:m}=d;d!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&un(c,l),Xs(c.x,f.offset.x),Xs(c.y,f.offset.y))}return c}applyTransform(l,c=!1){const h=re();un(h,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];!c&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Ks(h,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),is(f.latestValues)&&Ks(h,f.latestValues)}return is(this.latestValues)&&Ks(h,this.latestValues),h}removeTransform(l){const c=re();un(c,l);for(let h=0;h<this.path.length;h++){const d=this.path[h];if(!d.instance||!is(d.latestValues))continue;Dh(d.latestValues)&&d.updateSnapshot();const f=re(),m=d.measurePageBox();un(f,m),ay(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,f)}return is(this.latestValues)&&ay(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_e.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==c;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=_e.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=re(),this.relativeTargetOrigin=re(),mo(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),un(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=re(),this.targetWithTransforms=re()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),vT(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):un(this.target,this.layout.layoutBox),z0(this.target,this.targetDelta)):un(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=re(),this.relativeTargetOrigin=re(),mo(this.relativeTargetOrigin,this.target,g.target),un(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Dh(this.parent.latestValues)||V0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),c=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===_e.timestamp&&(h=!1),h)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;un(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;R_(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=re());const{target:w}=l;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(sy(this.prevProjectionDelta.x,this.projectionDelta.x),sy(this.prevProjectionDelta.y,this.projectionDelta.y)),po(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==g||!dy(this.projectionDelta.x,this.prevProjectionDelta.x)||!dy(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=qs(),this.projectionDelta=qs(),this.projectionDeltaWithTransform=qs()}setAnimationOrigin(l,c=!1){const h=this.snapshot,d=h?h.latestValues:{},f={...this.latestValues},m=qs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const g=re(),w=h?h.source:void 0,b=this.layout?this.layout.source:void 0,x=w!==b,S=this.getStack(),E=!S||S.members.length<=1,_=!!(x&&!E&&this.options.crossfade===!0&&!this.path.some(ck));this.animationProgress=0;let C;this.mixTargetDelta=R=>{const k=R/1e3;gy(m.x,l.x,k),gy(m.y,l.y,k),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(mo(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lk(this.relativeTarget,this.relativeTargetOrigin,g,k),C&&XT(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=re()),un(C,this.relativeTarget)),x&&(this.animationValues=f,zT(f,d,this.latestValues,k,_,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Di(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Wt.update(()=>{Al.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ir(0)),this.currentAnimation=FT(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(YT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:h,layout:d,latestValues:f}=l;if(!(!c||!h||!d)){if(this!==l&&this.layout&&d&&uw(this.options.animationType,this.layout.layoutBox,d.layoutBox)){h=this.target||re();const m=Be(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+m;const g=Be(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+g}un(c,h),Ks(c,f),po(this.projectionDeltaWithTransform,this.layoutCorrected,c,f)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new KT),this.sharedNodes.get(l).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:h}={}){const d=this.getStack();d&&d.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(c=!0),!c)return;const d={};h.z&&sh("z",l,d,this.animationValues);for(let f=0;f<ih.length;f++)sh(`rotate${ih[f]}`,l,d,this.animationValues),sh(`skew${ih[f]}`,l,d,this.animationValues);l.render();for(const f in d)l.setStaticValue(f,d[f]),this.animationValues&&(this.animationValues[f]=d[f]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=xl(c?.pointerEvents)||"",l.transform=h?h(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=xl(c?.pointerEvents)||""),this.hasProjected&&!is(this.latestValues)&&(l.transform=h?h({},""):"none",this.hasProjected=!1);return}l.visibility="";const f=d.animationValues||d.latestValues;this.applyTransformsToTarget();let m=qT(this.projectionDeltaWithTransform,this.treeScale,f);h&&(m=h(f,m)),l.transform=m;const{x:g,y:w}=this.projectionDelta;l.transformOrigin=`${g.origin*100}% ${w.origin*100}% 0`,d.animationValues?l.opacity=d===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:l.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const b in So){if(f[b]===void 0)continue;const{correct:x,applyTo:S,isCSSVariable:E}=So[b],_=m==="none"?f[b]:x(f[b],d);if(S){const C=S.length;for(let R=0;R<C;R++)l[S[R]]=_}else E?this.options.visualElement.renderState.vars[b]=_:l[b]=_}this.options.layoutId&&(l.pointerEvents=d===this?xl(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(fy),this.root.sharedNodes.clear()}}}function JT(i){i.updateLayout()}function ZT(i){const t=i.resumeFrom?.snapshot||i.snapshot;if(i.isLead()&&i.layout&&t&&i.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:n}=i.layout,{animationType:r}=i.options,a=t.source!==i.layout.source;r==="size"?fn(f=>{const m=a?t.measuredBox[f]:t.layoutBox[f],g=Be(m);m.min=e[f].min,m.max=m.min+g}):uw(r,t.layoutBox,e)&&fn(f=>{const m=a?t.measuredBox[f]:t.layoutBox[f],g=Be(e[f]);m.max=m.min+g,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[f].max=i.relativeTarget[f].min+g)});const l=qs();po(l,e,t.layoutBox);const c=qs();a?po(c,i.applyTransform(n,!0),t.measuredBox):po(c,e,t.layoutBox);const h=!ow(l);let d=!1;if(!i.resumeFrom){const f=i.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:g}=f;if(m&&g){const w=re();mo(w,t.layoutBox,m.layoutBox);const b=re();mo(b,e,g.layoutBox),aw(w,b)||(d=!0),f.options.layoutRoot&&(i.relativeTarget=b,i.relativeTargetOrigin=w,i.relativeParent=f)}}}i.notifyListeners("didUpdate",{layout:e,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:h,hasRelativeLayoutChanged:d})}else if(i.isLead()){const{onExitComplete:e}=i.options;e&&e()}i.options.transition=void 0}function tk(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function ek(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function nk(i){i.clearSnapshot()}function fy(i){i.clearMeasurements()}function py(i){i.isLayoutDirty=!1}function ik(i){const{visualElement:t}=i.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),i.resetTransform()}function my(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function sk(i){i.resolveTargetDelta()}function rk(i){i.calcProjection()}function ok(i){i.resetSkewAndRotation()}function ak(i){i.removeLeadSnapshot()}function gy(i,t,e){i.translate=qt(t.translate,0,e),i.scale=qt(t.scale,1,e),i.origin=t.origin,i.originPoint=t.originPoint}function yy(i,t,e,n){i.min=qt(t.min,e.min,n),i.max=qt(t.max,e.max,n)}function lk(i,t,e,n){yy(i.x,t.x,e.x,n),yy(i.y,t.y,e.y,n)}function ck(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const uk={duration:.45,ease:[.4,0,.1,1]},vy=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),wy=vy("applewebkit/")&&!vy("chrome/")?Math.round:pn;function by(i){i.min=wy(i.min),i.max=wy(i.max)}function hk(i){by(i.x),by(i.y)}function uw(i,t,e){return i==="position"||i==="preserve-aspect"&&!yT(hy(t),hy(e),.2)}function dk(i){return i!==i.root&&i.scroll?.wasRoot}const fk=cw({attachResizeListener:(i,t)=>Eo(i,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rh={current:void 0},hw=cw({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!rh.current){const i=new fk({});i.mount(window),i.setOptions({layoutScroll:!0}),rh.current=i}return rh.current},resetTransform:(i,t)=>{i.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),pk={pan:{Feature:LT},drag:{Feature:MT,ProjectionNode:hw,MeasureLayout:iw}};function xy(i,t,e){const{props:n}=i;i.animationState&&n.whileHover&&i.animationState.setActive("whileHover",e==="Start");const r="onHover"+e,a=n[r];a&&Wt.postRender(()=>a(t,Fo(t)))}class mk extends ji{mount(){const{current:t}=this.node;t&&(this.unmount=zC(t,(e,n)=>(xy(this.node,n,"Start"),r=>xy(this.node,r,"End"))))}unmount(){}}class gk extends ji{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Io(Eo(this.node.current,"focus",()=>this.onFocus()),Eo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ay(i,t,e){const{props:n}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&n.whileTap&&i.animationState.setActive("whileTap",e==="Start");const r="onTap"+(e==="End"?"":e),a=n[r];a&&Wt.postRender(()=>a(t,Fo(t)))}class yk extends ji{mount(){const{current:t}=this.node;t&&(this.unmount=WC(t,(e,n)=>(Ay(this.node,n,"Start"),(r,{success:a})=>Ay(this.node,r,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const zh=new WeakMap,oh=new WeakMap,vk=i=>{const t=zh.get(i.target);t&&t(i)},wk=i=>{i.forEach(vk)};function bk({root:i,...t}){const e=i||document;oh.has(e)||oh.set(e,{});const n=oh.get(e),r=JSON.stringify(t);return n[r]||(n[r]=new IntersectionObserver(wk,{root:i,...t})),n[r]}function xk(i,t,e){const n=bk(t);return zh.set(i,e),n.observe(i),()=>{zh.delete(i),n.unobserve(i)}}const Ak={some:0,all:1};class Sk extends ji{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:r="some",once:a}=t,l={root:e?e.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:Ak[r]},c=h=>{const{isIntersecting:d}=h;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:f,onViewportLeave:m}=this.node.getProps(),g=d?f:m;g&&g(h)};return xk(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(Ek(t,e))&&this.startObserver()}unmount(){}}function Ek({viewport:i={}},{viewport:t={}}={}){return e=>i[e]!==t[e]}const Ck={inView:{Feature:Sk},tap:{Feature:yk},focus:{Feature:gk},hover:{Feature:mk}},_k={layout:{ProjectionNode:hw,MeasureLayout:iw}},Tk={...hT,...Ck,...pk,..._k},Ot=T_(Tk,V_),kk="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function Pk(i){const[t,e]=P.useState(!1),n=()=>{e(!0)},{src:r,alt:a,style:l,className:c,...h}=i;return t?F.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${c??""}`,style:l,children:F.jsx("div",{className:"flex items-center justify-center w-full h-full",children:F.jsx("img",{src:kk,alt:"Error loading image",...h,"data-original-url":r})})}):F.jsx("img",{src:r,alt:a,className:c,style:l,...h,onError:n})}const Rk="/weiyings-portfolio/assets/pfp-C4mp_MeN.jpeg";function Sy(){const i=["an Information Technology Student","a Junior Full Stack Web Developer","a Problem Solver","a Tech Enthusiast","a Creative Thinker"],[t,e]=P.useState(0);P.useEffect(()=>{const a=setInterval(()=>{e(l=>(l+1)%i.length)},3e3);return()=>clearInterval(a)},[]);const n=()=>{window.open("https://www.linkedin.com/in/lee-weiying/","_blank")},r=()=>{window.open("https://github.com/emery97","_blank")};return F.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center relative overflow-hidden",children:[F.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-background to-secondary/10"}),F.jsx(Ot.div,{className:"absolute bottom-32 right-16 w-32 h-32 bg-secondary/20 rounded-full blur-xl",animate:{y:[0,15,0],x:[0,-15,0]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),F.jsxs("div",{className:"text-center z-10 px-4",children:[F.jsx(Ot.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.8,ease:"easeOut"},className:"mb-8",children:F.jsxs("div",{className:"relative mx-auto w-32 h-32 md:w-40 md:h-40 lg:w-48 lg:h-48",children:[F.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary to-primary/70 rounded-full animate-pulse"}),F.jsx("div",{className:"absolute inset-1 bg-background rounded-full",children:F.jsx(Pk,{src:Rk,alt:"Wei Ying",className:"w-full h-full object-cover rounded-full"})})]})}),F.jsx(Ot.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:F.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl mb-6",children:["Hi there, I'm"," ",F.jsx("span",{className:"bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"Wei Ying"}),F.jsx("span",{className:"wave",role:"img","aria-labelledby":"wave",children:"👋🏻"})]})}),F.jsxs(Ot.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"text-xl md:text-2xl lg:text-3xl mb-8 h-12 flex items-center justify-center",children:[F.jsx("span",{className:"mr-3",children:"I am"}),F.jsx(Ot.span,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5},className:"text-primary font-medium",children:i[t]},t)]}),F.jsx(Ot.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:"text-lg md:text-xl text-muted-foreground max-w-2xl mx-auto mb-12",children:"Passionate about technology, always learning, and ready to create amazing digital experiences."}),F.jsxs(Ot.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.8},className:"flex flex-col sm:flex-row gap-4 justify-center",children:[F.jsxs(Ot.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n,className:"btn linkedin-btn",children:[F.jsx(xv,{size:20}),"LinkedIn"]}),F.jsxs(Ot.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:r,className:"btn github-btn",children:[F.jsx(Cl,{size:20}),"GitHub"]})]})]})]})}const Mk=Ev("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Ys({className:i,variant:t,asChild:e=!1,...n}){const r=e?Av:"span";return F.jsx(r,{"data-slot":"badge",className:ps(Mk({variant:t}),i),...n})}function dw({className:i,...t}){return F.jsx("div",{"data-slot":"card",className:ps("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",i),...t})}function Lk({className:i,...t}){return F.jsx("div",{"data-slot":"card-header",className:ps("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",i),...t})}function Ik({className:i,...t}){return F.jsx("h4",{"data-slot":"card-title",className:ps("leading-none",i),...t})}function Dk({className:i,...t}){return F.jsx("p",{"data-slot":"card-description",className:ps("text-muted-foreground",i),...t})}function fw({className:i,...t}){return F.jsx("div",{"data-slot":"card-content",className:ps("px-6 [&:last-child]:pb-6",i),...t})}function Nk(){const[i,t]=P.useState(0),e=P.useRef(null),n=["JavaScript","TypeScript","React","Node.js","Python","HTML/CSS","Tailwind CSS","Git","MongoDB","PostgreSQL","Docker","AWS","Express.js","Next.js","C++","C#","React Native","Java","SQL"],r=["PowerBI","Figma","Visual Paradigm","Postman","GitHub","Canva","Andriod Studio","Jira","Visual Studio Code"],a=[{year:"Mar 2025 - Mar 2026",title:"Software Development Intern",company:"A*STAR | Agency for Science, Technology and Research",description:"Contributed to software development projects, collaborating with cross-functional teams to design, implement, and optimize software solutions for sustainability initiatives.",type:"experience"},{year:"2023 - 2026",title:"Diploma in Information Technology",company:"Ngee Ann Polytechnic, School of Infocomm Technology",description:"Specialized in Software Engineering with a minor in Social Media Marketing. Gained comprehensive knowledge in IT systems, programming, and digital marketing strategies.",type:"education"},{year:"Dec 2023 - Feb 2024",title:"Indoor Sales Associate",company:"AR Robotics and Automation",description:"Composed persuasive email campaigns targeting companies, promoted robotic solutions, sourced and compiled contact information using Apollo.io and Hunter.io, and optimized outreach strategies to improve productivity and conversion.",type:"experience"},{year:"Nov 2020 - Nov 2023",title:"Crew",company:"McDonald’s, Singapore",description:"Cross-trained across multiple store positions to ensure smooth operations. Delivered excellent customer service and effectively handled inquiries and complaints.",type:"experience"}];P.useEffect(()=>{const c=()=>{if(!e.current)return;const h=e.current.getBoundingClientRect(),d=h.height,f=window.innerHeight,m=window.pageYOffset||document.documentElement.scrollTop,g=h.top+m,w=Math.min(1,Math.max(0,(m-g+f)/d)),b=Math.min(Math.floor(w*(a.length-1)+.3),a.length-1);t(b)};return window.addEventListener("scroll",c,{passive:!0}),c(),()=>window.removeEventListener("scroll",c)},[a.length]);const l=c=>({education:"bg-blue-500",experience:"bg-green-500",project:"bg-purple-500",skill:"bg-purple-500"})[c]||"bg-gray-500";return F.jsx("div",{className:"min-h-screen pt-20 pb-16",children:F.jsxs("div",{className:"container mx-auto px-4",children:[F.jsxs(Ot.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"text-center mb-16",children:[F.jsx("h1",{className:"text-4xl md:text-5xl mb-6",children:"About Me"}),F.jsxs("div",{className:"max-w-3xl mx-auto",children:[F.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"I have a deep passion for both technology and business. My long-term goal is to build my own business, integrating technology to drive innovation and growth. I pride myself on a strong work ethic, resilience in the face of challenges, and the ability to thrive both as a team player and as a leader."}),F.jsxs("p",{className:"text-lg text-muted-foreground mb-6",children:['One of my guiding principles is the mindset of "Not Yet," inspired by Matt Abrahams’ ',F.jsx("em",{children:"Think Faster, Talk Smarter"}),". This perspective helps me view setbacks as opportunities rather than failures, turning challenges into stepping stones for continuous learning and growth."]}),F.jsxs("p",{className:"text-lg text-muted-foreground",children:["If you’d like to connect or have job opportunities available, feel free to reach out to me at"," ",F.jsx("a",{href:"mailto:leeweiying.info@gmail.com",className:"email-link",children:"leeweiying.info@gmail.com"}),"."]})]})]}),F.jsxs(Ot.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"mb-20",children:[F.jsx("h2",{className:"text-3xl text-center mb-8",children:"Tech Stack"}),F.jsx("div",{className:"flex flex-wrap justify-center gap-3 max-w-4xl mx-auto",children:n.map((c,h)=>F.jsx(Ot.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},transition:{duration:.5,delay:h*.1},viewport:{once:!0},children:F.jsx(Ys,{variant:"secondary",className:"px-4 py-2 text-sm",children:c})},c))})]}),F.jsxs(Ot.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"mb-20",children:[F.jsx("h2",{className:"text-3xl text-center mb-8",children:"Tool Stack"}),F.jsx("div",{className:"flex flex-wrap justify-center gap-3 max-w-4xl mx-auto",children:r.map((c,h)=>F.jsx(Ot.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},transition:{duration:.5,delay:h*.1},viewport:{once:!0},children:F.jsxs(Ys,{variant:"secondary",className:"px-4 py-2 text-sm",children:[c," "]})},c))})]}),F.jsxs(Ot.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"mb-16",children:[F.jsx("h2",{className:"text-3xl text-center mb-12",children:"My Journey"}),F.jsxs("div",{ref:e,className:"relative max-w-4xl mx-auto pb-[100vh]",children:[F.jsx("div",{className:"absolute left-4 md:left-1/2 top-0 bottom-0 w-0.5 bg-border transform md:-translate-x-1/2",children:F.jsx(Ot.div,{className:"absolute top-0 left-0 w-full bg-gradient-to-b from-primary to-primary/70 origin-top",initial:{height:"0%"},animate:{height:`${i/Math.max(a.length-1,1)*100}%`},transition:{duration:.6,ease:"easeInOut"}})}),a.map((c,h)=>F.jsxs(Ot.div,{initial:{opacity:0,x:h%2===0?-50:50},whileInView:{opacity:1,x:0},transition:{duration:.6,delay:h*.1},viewport:{once:!0},className:`relative flex items-center mb-12 ${h%2===0?"md:flex-row":"md:flex-row-reverse"}`,children:[F.jsxs("div",{className:"absolute left-4 md:left-1/2 transform md:-translate-x-1/2 z-10",children:[F.jsx(Ot.div,{className:`w-4 h-4 rounded-full border-4 border-background ${h<=i?l(c.type):"bg-muted"}`,initial:{scale:.8,opacity:.5},animate:{scale:h<=i?1.2:.8,opacity:h<=i?1:.5},transition:{duration:.4,ease:"easeInOut"}}),h<=i&&F.jsx(Ot.div,{className:`absolute inset-0 rounded-full ${l(c.type)} opacity-30`,initial:{scale:1},animate:{scale:[1,1.5,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]}),F.jsx("div",{className:`ml-12 md:ml-0 ${h%2===0?"md:mr-8":"md:ml-8"} md:w-1/2`,children:F.jsx(Ot.div,{initial:{opacity:.6,scale:.95},animate:{opacity:h<=i?1:.6,scale:h<=i?1:.95,y:h<=i?0:10},transition:{duration:.5,ease:"easeInOut"},children:F.jsx(dw,{className:`transition-all duration-500 rounded-xl overflow-hidden ${h<=i?"shadow-lg border-primary/20 bg-card":"shadow-sm border-border/50 bg-muted/30"}`,children:F.jsxs(fw,{className:"p-6",children:[F.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[F.jsx(Ys,{variant:"outline",className:"text-xs",children:c.year}),F.jsx(Ys,{variant:"secondary",className:`text-xs ${l(c.type)} text-white`,children:c.type})]}),F.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:c.title}),F.jsx("div",{className:"text-indigo-600 font-light text-sm mb-2",children:c.company}),F.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:c.description})]})})})})]},h))]})]})]})})}const Fk="/weiyings-portfolio/assets/ameliaXweiying-spgJd3qV.png",Ok="/weiyings-portfolio/assets/eduhelper-D5rjDXex.png",jk="/weiyings-portfolio/assets/ticketFinder-BFyK47Se.png",Bk="/weiyings-portfolio/assets/legitAnot-BcNCfGby.png",Vk="/weiyings-portfolio/assets/SPM-BvqHrV9h.png",zk="/weiyings-portfolio/assets/sustainify-11fd5MUp.png",Hk="/weiyings-portfolio/assets/chioset-Bk9ZOybw.jpg",$k="/weiyings-portfolio/assets/instantInsurance-BNREiIlh.png";function Uk(){const i=[{title:"Chioset",description:"Helps users plan outfits efficiently with AR try-ons and weather-based suggestions.",technologies:["React","Node.js","TensorFlow","MongoDB"],status:"Completed",github:"https://github.com/emery97/HackAndRoll.git",demo:null,image:Hk},{title:"Ticket Finder | Android App",description:"Simplifies event discovery and booking with seat selection, ticket transfer, and automated reminders.",technologies:["Java","XML","Firebase"],status:"Completed",github:"https://github.com/emery97/MAD24_P02_Team3.git",demo:"https://www.canva.com/design/DAGbDpzpoIs/M85vZfoxhGgMjBTaL1PHqA/edit?utm_content=DAGbDpzpoIs&utm_campaign=designshare&utm_medium=link2&utm_source=sharebutton",image:jk},{title:"Sustainify",description:"Helps transport companies track and reduce carbon emissions with dashboards, reports, and actionable insights.",technologies:["HTML","CSS","JavaScript","MongoDB","Node.js"],status:"Completed",github:"https://github.com/emery97/sustainify.git",demo:null,image:zk},{title:"Instant Insurance",description:"Delivers interactive insurance data visualizations, featuring custom Sankey charts and other charts for clear, actionable insights.",technologies:["Angular","TypeScript","PostGreSQL","D3.js","HighChart.js"],status:"Completed",github:"https://github.com/emery97/instant-insurance-",image:$k},{title:"Legit Anot",description:"Protects users from malicious links with real-time safety evaluations and feedback integration.",technologies:["React","Bootstrap","MongoDB","Node.js"],status:"Completed",github:"https://github.com/enjiawu/youthxhack.git",demo:"https://www.canva.com/design/DAGbD_UhG9I/JogaW6SvL2QPgORJbO9udw/edit?utm_content=DAGbD_UhG9I&utm_campaign=designshare&utm_medium=link2&utm_source=sharebutton",image:Bk},{title:"EduHelper",description:"Linkedin-inspired web app enabling students to access courses and lectures while allowing educators to upload content seamlessly.",technologies:["HTML","CSS","JavaScript","MS SQL Server"],status:"Completed",github:"https://github.com/NgJoeYi/BED2024Apr_P07_T08.git",demo:null,image:Ok},{title:"Ngee Ann City",description:"Demonstrates SCRUM methodology while delivering a functional website in a collaborative class project.",technologies:["HTML","CSS","JavaScript","Jira"],status:"Completed",github:"https://github.com/RaeannTaiYuXuan/SPM_Assignment.git",demo:null,image:Vk},{title:"Amelia x Weiying",description:"Empowers teenage girls with stylish, affordable clothing through a user-friendly website.",technologies:["HTML","CSS","JavaScript"],status:"Completed",github:"https://github.com/emery97/FED-ameliaXweiying.git",demo:"https://emery97.github.io/FED-ameliaXweiying/",image:Fk}],t=e=>{switch(e){case"Completed":return"bg-green-500";case"In Progress":return"bg-yellow-500";default:return"bg-gray-500"}};return F.jsx("div",{className:"min-h-screen pt-20 pb-16",children:F.jsxs("div",{className:"container mx-auto px-4",children:[F.jsxs(Ot.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"text-center mb-16",children:[F.jsx("h1",{className:"text-4xl md:text-5xl mb-6",children:"My Projects"}),F.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Here are some of the projects I've worked on. Each project represents a step in my learning journey and showcases different technologies and problem-solving approaches."})]}),F.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map((e,n)=>F.jsx(Ot.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:n*.1},viewport:{once:!0},whileHover:{y:-5},className:"h-full",children:F.jsxs(dw,{className:"h-full flex flex-col hover:shadow-lg transition-all duration-300",children:[F.jsxs("div",{className:"relative overflow-hidden rounded-t-lg bg-gradient-to-br from-primary/10 to-secondary/10",children:[F.jsx("div",{className:"h-48 flex items-center justify-center",children:F.jsx("img",{src:e.image,alt:e.title,className:"object-contain h-full"})}),F.jsx("div",{className:"absolute top-4 right-4",children:F.jsx(Ys,{className:`${t(e.status)} text-white text-xs`,children:e.status})})]}),F.jsxs(Lk,{children:[F.jsx(Ik,{className:"text-lg",children:e.title}),F.jsx(Dk,{className:"text-sm line-clamp-3",children:e.description})]}),F.jsxs(fw,{className:"flex-1 flex flex-col",children:[F.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:e.technologies.map(r=>F.jsx(Ys,{variant:"outline",className:"text-xs",children:r},r))}),F.jsxs("div",{className:"mt-auto flex gap-2",children:[F.jsxs(Li,{variant:"outline",size:"sm",className:"flex-1 cursor-pointer",onClick:()=>window.open(e.github,"_blank"),children:[F.jsx(Cl,{size:16,className:"mr-2"}),"Code"]}),e.demo&&F.jsxs(Li,{size:"sm",className:"flex-1 cursor-pointer",onClick:()=>window.open(e.demo,"_blank"),children:[F.jsx(US,{size:16,className:"mr-2"}),"Demo"]})]})]})]})},e.title))}),F.jsxs(Ot.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"text-center mt-16",children:[F.jsx("h2",{className:"text-2xl mb-4",children:"Want to see more?"}),F.jsx("p",{className:"text-muted-foreground mb-6",children:"Check out my GitHub profile for more projects and contributions."}),F.jsxs(Li,{className:"px-8 py-3",onClick:()=>window.open("https://github.com/emery97","_blank"),children:[F.jsx(Cl,{size:20,className:"mr-2"}),"Visit My GitHub"]})]})]})})}var pw={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ey=ls.createContext&&ls.createContext(pw),Wk=["attr","size","title"];function Gk(i,t){if(i==null)return{};var e=Xk(i,t),n,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(e[n]=i[n])}return e}function Xk(i,t){if(i==null)return{};var e={};for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){if(t.indexOf(n)>=0)continue;e[n]=i[n]}return e}function Ml(){return Ml=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Ml.apply(this,arguments)}function Cy(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),e.push.apply(e,n)}return e}function Ll(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Cy(Object(e),!0).forEach(function(n){Kk(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):Cy(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function Kk(i,t,e){return t=qk(t),t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function qk(i){var t=Yk(i,"string");return typeof t=="symbol"?t:t+""}function Yk(i,t){if(typeof i!="object"||!i)return i;var e=i[Symbol.toPrimitive];if(e!==void 0){var n=e.call(i,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function mw(i){return i&&i.map((t,e)=>ls.createElement(t.tag,Ll({key:e},t.attr),mw(t.child)))}function Qk(i){return t=>ls.createElement(Jk,Ml({attr:Ll({},i.attr)},t),mw(i.child))}function Jk(i){var t=e=>{var{attr:n,size:r,title:a}=i,l=Gk(i,Wk),c=r||e.size||"1em",h;return e.className&&(h=e.className),i.className&&(h=(h?h+" ":"")+i.className),ls.createElement("svg",Ml({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,n,l,{className:h,style:Ll(Ll({color:i.color||e.color},e.style),i.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),a&&ls.createElement("title",null,a),i.children)};return Ey!==void 0?ls.createElement(Ey.Consumer,null,e=>t(e)):t(pw)}function Zk(i){return Qk({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M505.7 661a8 8 0 0 0 12.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"},child:[]}]})(i)}const je=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Hh=[.001,0,0,.001,0,0],ah=1.35,Ze={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Vn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},gw="pdfjs_internal_editor_",Et={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},It={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},yw={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Le={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},go={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ie={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},$s={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Oo={ERRORS:0,WARNINGS:1,INFOS:5},Co={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ul={moveTo:0,lineTo:1,curveTo:2,closePath:3},vw={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Vl=Oo.WARNINGS;function tP(i){Number.isInteger(i)&&(Vl=i)}function eP(){return Vl}function zl(i){Vl>=Oo.INFOS&&console.log(`Info: ${i}`)}function Ct(i){Vl>=Oo.WARNINGS&&console.log(`Warning: ${i}`)}function Bt(i){throw new Error(i)}function he(i,t){i||Bt(t)}function nP(i){switch(i?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Od(i,t=null,e=null){if(!i)return null;if(e&&typeof i=="string"&&(e.addDefaultProtocol&&i.startsWith("www.")&&i.match(/\./g)?.length>=2&&(i=`http://${i}`),e.tryConvertEncoding))try{i=aP(i)}catch{}const n=t?URL.parse(i,t):URL.parse(i);return nP(n)?n:null}function jd(i,t,e=!1){const n=URL.parse(i);return n?(n.hash=t,n.href):e&&Od(i,"http://example.com")?i.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Mt(i,t,e,n=!1){return Object.defineProperty(i,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const ms=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class _y extends ms{constructor(t,e){super(t,"PasswordException"),this.code=e}}class lh extends ms{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Il extends ms{constructor(t){super(t,"InvalidPDFException")}}class _o extends ms{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class iP extends ms{constructor(t){super(t,"FormatError")}}class ai extends ms{constructor(t){super(t,"AbortException")}}function ww(i){(typeof i!="object"||i?.length===void 0)&&Bt("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const n=[];for(let r=0;r<t;r+=e){const a=Math.min(r+e,t),l=i.subarray(r,a);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function jo(i){typeof i!="string"&&Bt("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=i.charCodeAt(n)&255;return e}function sP(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function rP(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function oP(){try{return new Function(""),!0}catch{return!1}}class Ae{static get isLittleEndian(){return Mt(this,"isLittleEndian",rP())}static get isEvalSupported(){return Mt(this,"isEvalSupported",oP())}static get isOffscreenCanvasSupported(){return Mt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Mt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Mt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Mt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const ch=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));class pt{static makeHexColor(t,e,n){return`#${ch[t]}${ch[e]}${ch[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,n=0){const r=t[n],a=t[n+1];t[n]=r*e[0]+a*e[2]+e[4],t[n+1]=r*e[1]+a*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const r=e[0],a=e[1],l=e[2],c=e[3],h=e[4],d=e[5];for(let f=0;f<6;f+=2){const m=t[n+f],g=t[n+f+1];t[n+f]=m*r+g*l+h,t[n+f+1]=m*a+g*c+d}}static applyInverseTransform(t,e){const n=t[0],r=t[1],a=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-r*e[2]+e[2]*e[5]-e[4]*e[3])/a,t[1]=(-n*e[1]+r*e[0]+e[4]*e[1]-e[5]*e[0])/a}static axialAlignedBoundingBox(t,e,n){const r=e[0],a=e[1],l=e[2],c=e[3],h=e[4],d=e[5],f=t[0],m=t[1],g=t[2],w=t[3];let b=r*f+h,x=b,S=r*g+h,E=S,_=c*m+d,C=_,R=c*w+d,k=R;if(a!==0||l!==0){const N=a*f,O=a*g,L=l*m,H=l*w;b+=L,E+=L,S+=H,x+=H,_+=N,k+=N,R+=O,C+=O}n[0]=Math.min(n[0],b,S,x,E),n[1]=Math.min(n[1],_,R,C,k),n[2]=Math.max(n[2],b,S,x,E),n[3]=Math.max(n[3],_,R,C,k)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],r=t[1],a=t[2],l=t[3],c=n**2+r**2,h=n*a+r*l,d=a**2+l**2,f=(c+d)/2,m=Math.sqrt(f**2-(c*d-h**2));e[0]=Math.sqrt(f+m||1),e[1]=Math.sqrt(f-m||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>r)return null;const a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>l?null:[n,a,r,l]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,r,a){a[0]=Math.min(a[0],t,n),a[1]=Math.min(a[1],e,r),a[2]=Math.max(a[2],t,n),a[3]=Math.max(a[3],e,r)}static#t(t,e,n,r,a,l,c,h,d,f){if(d<=0||d>=1)return;const m=1-d,g=d*d,w=g*d,b=m*(m*(m*t+3*d*e)+3*g*n)+w*r,x=m*(m*(m*a+3*d*l)+3*g*c)+w*h;f[0]=Math.min(f[0],b),f[1]=Math.min(f[1],x),f[2]=Math.max(f[2],b),f[3]=Math.max(f[3],x)}static#e(t,e,n,r,a,l,c,h,d,f,m,g){if(Math.abs(d)<1e-12){Math.abs(f)>=1e-12&&this.#t(t,e,n,r,a,l,c,h,-m/f,g);return}const w=f**2-4*m*d;if(w<0)return;const b=Math.sqrt(w),x=2*d;this.#t(t,e,n,r,a,l,c,h,(-f+b)/x,g),this.#t(t,e,n,r,a,l,c,h,(-f-b)/x,g)}static bezierBoundingBox(t,e,n,r,a,l,c,h,d){d[0]=Math.min(d[0],t,c),d[1]=Math.min(d[1],e,h),d[2]=Math.max(d[2],t,c),d[3]=Math.max(d[3],e,h),this.#e(t,n,a,c,e,r,l,h,3*(-t+3*(n-a)+c),6*(t-2*n+a),3*(n-t),d),this.#e(t,n,a,c,e,r,l,h,3*(-e+3*(r-l)+h),6*(e-2*r+l),3*(r-e),d)}}function aP(i){return decodeURIComponent(escape(i))}let uh=null,Ty=null;function bw(i){return uh||(uh=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ty=new Map([["ﬅ","ſt"]])),i.replaceAll(uh,(t,e,n)=>e?e.normalize("NFKC"):Ty.get(n))}function Bd(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),ww(i)}const Vd="pdfjs_internal_id_";function lP(i,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,r,...a]=e;if(!i(n)&&!Number.isInteger(n)||!t(r))return!1;const l=a.length;let c=!0;switch(r.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;c=!1;break;default:return!1}for(const h of a)if(!(typeof h=="number"||c&&h===null))return!1;return!0}function Ie(i,t,e){return Math.min(Math.max(i,t),e)}function xw(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(ww(i))}function cP(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):jo(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...t){return new Promise(e=>{e(i(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((t,e)=>t+e,0)});const ni="http://www.w3.org/2000/svg";class hs{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function pr(i,t="text"){if(lo(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class Bo{constructor({viewBox:t,userUnit:e,scale:n,rotation:r,offsetX:a=0,offsetY:l=0,dontFlip:c=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=r,this.offsetX=a,this.offsetY=l,n*=e;const h=(t[2]+t[0])/2,d=(t[3]+t[1])/2;let f,m,g,w;switch(r%=360,r<0&&(r+=360),r){case 180:f=-1,m=0,g=0,w=1;break;case 90:f=0,m=1,g=1,w=0;break;case 270:f=0,m=-1,g=-1,w=0;break;case 0:f=1,m=0,g=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(g=-g,w=-w);let b,x,S,E;f===0?(b=Math.abs(d-t[1])*n+a,x=Math.abs(h-t[0])*n+l,S=(t[3]-t[1])*n,E=(t[2]-t[0])*n):(b=Math.abs(h-t[0])*n+a,x=Math.abs(d-t[1])*n+l,S=(t[2]-t[0])*n,E=(t[3]-t[1])*n),this.transform=[f*n,m*n,g*n,w*n,b-f*n*h-g*n*d,x-m*n*h-w*n*d],this.width=S,this.height=E}get rawDims(){const t=this.viewBox;return Mt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:a=!1}={}){return new Bo({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:a})}convertToViewportPoint(t,e){const n=[t,e];return pt.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];pt.applyTransform(e,this.transform);const n=[t[2],t[3]];return pt.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return pt.applyInverseTransform(n,this.transform),n}}class Hl extends ms{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Vo(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function $l(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function Aw(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function Sw(i,t="document.pdf"){if(typeof i!="string")return t;if(Vo(i))return Ct('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(i);if(!n)return t;const r=c=>{try{let h=decodeURIComponent(c);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:c):h}catch{return c}},a=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(a.test(l))return r(l);if(n.searchParams.size>0){const c=Array.from(n.searchParams.values()).reverse();for(const d of c)if(a.test(d))return r(d);const h=Array.from(n.searchParams.keys()).reverse();for(const d of h)if(a.test(d))return r(d)}if(n.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(h)return r(h[0])}return t}class ky{started=Object.create(null);times=[];time(t){t in this.started&&Ct(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Ct(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:r,end:a}of this.times)t.push(`${n.padEnd(e)} ${a-r}ms
`);return t.join("")}}function lo(i,t){const e=t?URL.parse(i,t):URL.parse(i);return e?.protocol==="http:"||e?.protocol==="https:"}function mn(i){i.preventDefault()}function oe(i){i.preventDefault(),i.stopPropagation()}function uP(i){console.log("Deprecated API usage: "+i)}class zd{static#t;static toDateObject(t){if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const n=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let c=parseInt(e[5],10);c=c>=0&&c<=59?c:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const d=e[7]||"Z";let f=parseInt(e[8],10);f=f>=0&&f<=23?f:0;let m=parseInt(e[9],10)||0;return m=m>=0&&m<=59?m:0,d==="-"?(l+=f,c+=m):d==="+"&&(l-=f,c-=m),new Date(Date.UTC(n,r,a,l,c,h))}}function Ew(i,{scale:t=1,rotation:e=0}){const{width:n,height:r}=i.attributes.style,a=[0,0,parseInt(n),parseInt(r)];return new Bo({viewBox:a,userUnit:1,scale:t,rotation:e})}function Hd(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Ct(`Not a valid color format: "${i}"`),[0,0,0])}function hP(i){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of i.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;i.set(e,Hd(n))}t.remove()}function Kt(i){const{a:t,b:e,c:n,d:r,e:a,f:l}=i.getTransform();return[t,e,n,r,a,l]}function Nn(i){const{a:t,b:e,c:n,d:r,e:a,f:l}=i.getTransform().invertSelf();return[t,e,n,r,a,l]}function Fi(i,t,e=!1,n=!0){if(t instanceof Bo){const{pageWidth:r,pageHeight:a}=t.rawDims,{style:l}=i,c=Ae.isCSSRoundSupported,h=`var(--total-scale-factor) * ${r}px`,d=`var(--total-scale-factor) * ${a}px`,f=c?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,m=c?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!e||t.rotation%180===0?(l.width=f,l.height=m):(l.width=m,l.height=f)}n&&i.setAttribute("data-main-rotation",t.rotation)}class Tn{constructor(){const{pixelRatio:t}=Tn;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,r,a=-1){let l=1/0,c=1/0,h=1/0;n=Tn.capPixels(n,a),n>0&&(l=Math.sqrt(n/(t*e))),r!==-1&&(c=r/t,h=r/e);const d=Math.min(l,c,h);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const Dl=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class yo{#t=null;#e=null;#n;#i=null;#r=null;#s=null;static#o=null;constructor(t){this.#n=t,yo.#o||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#n._uiManager._signal;t.addEventListener("contextmenu",mn,{signal:e}),t.addEventListener("pointerdown",yo.#a,{signal:e});const n=this.#i=document.createElement("div");n.className="buttons",t.append(n);const r=this.#n.toolbarPosition;if(r){const{style:a}=t,l=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];a.insetInlineEnd=`${100*l}%`,a.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#a(t){t.stopPropagation()}#h(t){this.#n._focusEventsAllowed=!1,oe(t)}#l(t){this.#n._focusEventsAllowed=!0,oe(t)}#d(t){const e=this.#n._uiManager._signal;t.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#l.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",mn,{signal:e})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#n,n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",yo.#o[t]),this.#d(n),n.addEventListener("click",r=>{e.delete()},{signal:e._signal}),this.#i.append(n)}get#c(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#d(e),this.#i.append(e,this.#c),this.#r=t}addColorPicker(t){this.#e=t;const e=t.renderButton();this.#d(e),this.#i.append(e,this.#c)}async addEditSignatureButton(t){const e=this.#s=await t.renderEditButton(this.#n);this.#d(e),this.#i.append(e,this.#c)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(t){this.#s&&(this.#s.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class dP{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",mn,{signal:this.#n._signal});const e=this.#t=document.createElement("div");return e.className="buttons",t.append(e),this.#s(),t}#r(t,e){let n=0,r=0;for(const a of t){const l=a.y+a.height;if(l<n)continue;const c=a.x+(e?a.width:0);if(l>n){r=c,n=l;continue}e?c>r&&(r=c):c<r&&(r=c)}return[e?1-r:r,n]}show(t,e,n){const[r,a]=this.#r(e,n),{style:l}=this.#e||=this.#i();t.append(this.#e),l.insetInlineEnd=`${100*r}%`,l.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=this.#n._signal;t.addEventListener("contextmenu",mn,{signal:n}),t.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:n}),this.#t.append(t)}}function Cw(i,t,e){for(const n of e)t.addEventListener(n,i[n].bind(i))}class fP{#t=0;get id(){return`${gw}${this.#t++}`}}class $d{#t=Bd();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const a=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Mt(this,"_isSVGFittingCanvas",a)}async#i(t,e){this.#n||=new Map;let n=this.#n.get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof e=="string"?(n.url=e,r=await pr(e,"blob")):e instanceof File?r=n.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const a=$d._isSVGFittingCanvas,l=new FileReader,c=new Image,h=new Promise((d,f)=>{c.onload=()=>{n.bitmap=c,n.isSvg=!0,d()},l.onload=async()=>{const m=n.svgUrl=l.result;c.src=await a?`${m}#svgView(preserveAspectRatio(none))`:m},c.onerror=l.onerror=f});l.readAsDataURL(r),await h}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){Ct(r),n=null}return this.#n.set(t,n),n&&this.#n.set(n.id,n),n}async getFromFile(t){const{lastModified:e,name:n,size:r,type:a}=t;return this.#i(`${e}_${n}_${r}_${a}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,e){const n=await e;return this.#i(t,n)}async getFromId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#n||=new Map;let n=this.#n.get(t);if(n?.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,n),this.#n.set(n.id,n),n}getSvgUrl(t){const e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=r.convertToBlob()}n.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class pP{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:n,mustExec:r,type:a=NaN,overwriteIfSameType:l=!1,keepUndo:c=!1}){if(r&&t(),this.#e)return;const h={cmd:t,undo:e,post:n,type:a};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(h);return}if(l&&this.#t[this.#i].type===a){c&&(h.undo=this.#t[this.#i].undo),this.#t[this.#i]=h;return}const d=this.#i+1;d===this.#n?this.#t.splice(0,1):(this.#i=d,d<this.#t.length&&this.#t.splice(d)),this.#t.push(h)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let e=this.#i;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#i-e),this.#i=e;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class zo{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ae.platform;for(const[n,r,a={}]of t)for(const l of n){const c=l.startsWith("mac+");e&&c?(this.callbacks.set(l.slice(4),{callback:r,options:a}),this.allKeys.add(l.split("+").at(-1))):!e&&!c&&(this.callbacks.set(l,{callback:r,options:a}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(this.#t(e));if(!n)return;const{callback:r,options:{bubbles:a=!1,args:l=[],checker:c=null}}=n;c&&!c(t,e)||(r.bind(t,...l,e)(),a||oe(e))}}class Ud{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return hP(t),Mt(this,"_colors",t)}convert(t){const e=Hd(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,r]of this._colors)if(r.every((a,l)=>a===e[l]))return Ud._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?pt.makeHexColor(...e):t}}class li{#t=new AbortController;#e=null;#n=new Map;#i=new Map;#r=null;#s=null;#o=null;#a=new pP;#h=null;#l=null;#d=0;#c=new Set;#f=null;#p=null;#m=new Set;_editorUndoBar=null;#u=!1;#g=!1;#y=!1;#v=null;#b=null;#x=null;#A=null;#C=!1;#T=null;#P=new fP;#S=!1;#k=!1;#_=null;#M=null;#L=null;#I=null;#V=null;#E=Et.NONE;#w=new Set;#O=null;#j=null;#$=null;#U=null;#W={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#z=[0,0];#D=null;#N=null;#H=null;#q=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=li.prototype,e=l=>l.#N.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:c})=>{if(c instanceof HTMLInputElement){const{type:h}=c;return h!=="text"&&h!=="number"}return!0},r=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Mt(this,"_keyboardManager",new zo([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#N.contains(c)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#N.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}constructor(t,e,n,r,a,l,c,h,d,f,m,g,w,b,x){const S=this._signal=this.#t.signal;this.#N=t,this.#H=e,this.#q=n,this.#r=r,this.#j=a,this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:S}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:S}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:S}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:S}),l._on("setpreference",this.onSetPreference.bind(this),{signal:S}),l._on("switchannotationeditorparams",E=>this.updateParams(E.type,E.value),{signal:S}),this.#st(),this.#lt(),this.#Q(),this.#s=c.annotationStorage,this.#v=c.filterFactory,this.#$=h,this.#A=d||null,this.#u=f,this.#g=m,this.#y=g,this.#V=w||null,this.viewParameters={realScale:hs.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=b||null,this._supportsPinchToZoom=x!==!1}destroy(){this.#F?.resolve(),this.#F=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#m.clear(),this.#I?.clear(),this.#e=null,this.#w.clear(),this.#a.destroy(),this.#r?.destroy(),this.#j?.destroy(),this.#T?.hide(),this.#T=null,this.#L?.destroy(),this.#L=null,this.#b&&(clearTimeout(this.#b),this.#b=null),this.#D&&(clearTimeout(this.#D),this.#D=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return Mt(this,"hcmFilter",this.#$?this.#v.addHCMFilter(this.#$.foreground,this.#$.background):"none")}get direction(){return Mt(this,"direction",getComputedStyle(this.#N).direction)}get highlightColors(){return Mt(this,"highlightColors",this.#A?new Map(this.#A.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColorNames(){return Mt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#l=t}setMainHighlightColorPicker(t){this.#L=t}editAltText(t,e=!1){this.#r?.editAltText(this,t,e)}getSignature(t){this.#j?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#j}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#y=e;break}}onPageChanging({pageNumber:t}){this.#d=t-1}focusMainContainer(){this.#N.focus()}findParent(t,e){for(const n of this.#i.values()){const{x:r,y:a,width:l,height:c}=n.div.getBoundingClientRect();if(t>=r&&t<=r+l&&e>=a&&e<=a+c)return n}return null}disableUserSelect(t=!1){this.#H.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#m.add(t)}removeShouldRescale(t){this.#m.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*hs.PDF_TO_CSS_UNITS;for(const e of this.#m)e.onScaleChanging();this.#l?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#X({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#Y(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of this.#i.values())if(n.hasTextLayer(t))return n;return null}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:a,focusOffset:l}=e,c=e.toString(),d=this.#X(e).closest(".textLayer"),f=this.getSelectionBoxes(d);if(!f)return;e.empty();const m=this.#Y(d),g=this.#E===Et.NONE,w=()=>{m?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:f,anchorNode:n,anchorOffset:r,focusNode:a,focusOffset:l,text:c}),g&&this.showAllEditors("highlight",!0,!0)};if(g){this.switchToMode(Et.HIGHLIGHT,w);return}w()}#nt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=this.#X(t).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(this.#T||=new dP(this),this.#T.show(n,r,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,e=null){const n=this.#q;n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}#it(){const t=document.getSelection();if(!t||t.isCollapsed){this.#O&&(this.#T?.hide(),this.#O=null,this.#R({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#O)return;const r=this.#X(t).closest(".textLayer");if(!r){this.#O&&(this.#T?.hide(),this.#O=null,this.#R({hasSelectedText:!1}));return}if(this.#T?.hide(),this.#O=e,this.#R({hasSelectedText:!0}),!(this.#E!==Et.HIGHLIGHT&&this.#E!==Et.NONE)&&(this.#E===Et.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#C=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#E===Et.HIGHLIGHT?this.#Y(r):null;a?.toggleDrawing();const l=new AbortController,c=this.combinedSignal(l),h=d=>{d.type==="pointerup"&&d.button!==0||(l.abort(),a?.toggleDrawing(!0),d.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",h,{signal:c}),window.addEventListener("blur",h,{signal:c})}}#K(t=""){this.#E===Et.HIGHLIGHT?this.highlightSelection(t):this.#u&&this.#nt()}#st(){document.addEventListener("selectionchange",this.#it.bind(this),{signal:this._signal})}#rt(){if(this.#x)return;this.#x=new AbortController;const t=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ot(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#C&&(this.#C=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#w)if(e.div.contains(t)){this.#M=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#M)return;const[t,e]=this.#M;this.#M=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#Q(){if(this.#_)return;this.#_=new AbortController;const t=this.combinedSignal(this.#_);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#at(){this.#_?.abort(),this.#_=null}#J(){if(this.#h)return;this.#h=new AbortController;const t=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#Z(){this.#h?.abort(),this.#h=null}#lt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#Q(),this.#J()}removeEditListeners(){this.#at(),this.#Z()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of this.#p)if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of this.#p)if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of this.#w){const r=n.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const a of e.items)for(const l of this.#p)if(l.isHandlingMimeForPasting(a.type)){l.paste(a,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){Ct(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const a=[];for(const h of n){const d=await r.deserialize(h);if(!d)return;a.push(d)}const l=()=>{for(const h of a)this.#tt(h);this.#et(a)},c=()=>{for(const h of a)h.remove()};this.addCommands({cmd:l,undo:c,mustExec:!0})}catch(a){Ct(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#E!==Et.NONE&&!this.isEditorHandlingKeyboard&&li._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#C&&(this.#C=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#R(t){Object.entries(t).some(([n,r])=>this.#W[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#W,t)}),this.#E===Et.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#B([[It.HIGHLIGHT_FREE,!0]]))}#B(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#rt(),this.#J(),this.#R({isEditing:this.#E!==Et.NONE,isEmpty:this.#G(),hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:this.#a.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ot(),this.#Z(),this.#R({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#p){this.#p=t;for(const e of this.#p)this.#B(e.defaultPropertiesToUpdate)}}getId(){return this.#P.id}get currentLayer(){return this.#i.get(this.#d)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#d}addLayer(t){this.#i.set(t.pageIndex,t),this.#S?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}async updateMode(t,e=null,n=!1,r=!1){if(this.#E!==t&&!(this.#F&&(await this.#F.promise,!this.#F))){if(this.#F=Promise.withResolvers(),this.#l?.commitOrRemove(),this.#E=t,t===Et.NONE){this.setEditingState(!1),this.#ut(),this._editorUndoBar?.hide(),this.#F.resolve();return}t===Et.SIGNATURE&&await this.#j?.loadSignatures(),this.setEditingState(!0),await this.#ct(),this.unselectAll();for(const a of this.#i.values())a.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),this.#F.resolve();return}for(const a of this.#n.values())a.annotationElementId===e||a.id===e?(this.setSelected(a),r&&a.enterInEditMode()):a.unselect();this.#F.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#E&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#p){switch(t){case It.CREATE:this.currentLayer.addNewEditor(e);return;case It.HIGHLIGHT_DEFAULT_COLOR:this.#L?.updateColor(e);break;case It.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#U||=new Map).set(t,e),this.showAllEditors("highlight",e);break}for(const n of this.#w)n.updateParams(t,e);for(const n of this.#p)n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){for(const a of this.#n.values())a.editorType===t&&a.show(e);(this.#U?.get(It.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#B([[It.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#k!==t){this.#k=t;for(const e of this.#i.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ct(){if(!this.#S){this.#S=!0;const t=[];for(const e of this.#i.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#ut(){if(this.unselectAll(),this.#S){this.#S=!1;for(const t of this.#i.values())t.disable();for(const t of this.#n.values())t.disable()}}getEditors(t){const e=[];for(const n of this.#n.values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.focusMainContainer(),this.#b=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#I?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#c.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#c.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#c.has(t)}removeDeletedAnnotationElement(t){this.#c.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#tt(t){const e=this.#i.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#B(t.propertiesToUpdate))}get#ht(){let t=null;for(t of this.#w);return t}updateUI(t){this.#ht===t&&this.#B(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#B(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#w.has(t)){this.#w.delete(t),t.unselect(),this.#R({hasSelectedEditor:this.hasSelection});return}this.#w.add(t),t.select(),this.#B(t.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#l?.commitOrRemove();for(const e of this.#w)e!==t&&e.unselect();this.#w.clear(),this.#w.add(t),t.select(),this.#B(t.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}isSelected(t){return this.#w.has(t)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(t){t.unselect(),this.#w.delete(t),this.#R({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#a.undo(),this.#R({hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#G()}),this._editorUndoBar?.hide()}redo(){this.#a.redo(),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:this.#a.hasSomethingToRedo(),isEmpty:this.#G()})}addCommands(t){this.#a.add(t),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#G()})}cleanUndoStack(t){this.#a.cleanType(t)}#G(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#w],n=()=>{this._editorUndoBar?.show(r,e.length===1?e[0].editorType:e.length);for(const a of e)a.remove()},r=()=>{for(const a of e)this.#tt(a)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#et(t){for(const e of this.#w)e.unselect();this.#w.clear();for(const e of t)e.isEmpty()||(this.#w.add(e),e.select());this.#R({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#w)t.commit();this.#et(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#E!==Et.NONE))&&!this.#l?.commitOrRemove()&&this.hasSelection){for(const t of this.#w)t.unselect();this.#w.clear(),this.#R({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#z[0]+=t,this.#z[1]+=e;const[r,a]=this.#z,l=[...this.#w],c=1e3;this.#D&&clearTimeout(this.#D),this.#D=setTimeout(()=>{this.#D=null,this.#z[0]=this.#z[1]=0,this.addCommands({cmd:()=>{for(const h of l)this.#n.has(h.id)&&(h.translateInPage(r,a),h.translationDone())},undo:()=>{for(const h of l)this.#n.has(h.id)&&(h.translateInPage(-r,-a),h.translationDone())},mustExec:!1})},c);for(const h of l)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const t of this.#w)this.#f.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const t=this.#f;this.#f=null;let e=!1;for(const[{x:r,y:a,pageIndex:l},c]of t)c.newX=r,c.newY=a,c.newPageIndex=l,e||=r!==c.savedX||a!==c.savedY||l!==c.savedPageIndex;if(!e)return!1;const n=(r,a,l,c)=>{if(this.#n.has(r.id)){const h=this.#i.get(c);h?r._setParentAndPosition(h,a,l):(r.pageIndex=c,r.x=a,r.y=l)}};return this.addCommands({cmd:()=>{for(const[r,{newX:a,newY:l,newPageIndex:c}]of t)n(r,a,l,c)},undo:()=>{for(const[r,{savedX:a,savedY:l,savedPageIndex:c}]of t)n(r,a,l,c)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#f)for(const n of this.#f.keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#E}get imageManager(){return Mt(this,"imageManager",new $d)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let d=0,f=e.rangeCount;d<f;d++)if(!t.contains(e.getRangeAt(d).commonAncestorContainer))return null;const{x:n,y:r,width:a,height:l}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(d,f,m,g)=>({x:(f-r)/l,y:1-(d+m-n)/a,width:g/l,height:m/a});break;case"180":c=(d,f,m,g)=>({x:1-(d+m-n)/a,y:1-(f+g-r)/l,width:m/a,height:g/l});break;case"270":c=(d,f,m,g)=>({x:1-(f+g-r)/l,y:(d-n)/a,width:g/l,height:m/a});break;default:c=(d,f,m,g)=>({x:(d-n)/a,y:(f-r)/l,width:m/a,height:g/l});break}const h=[];for(let d=0,f=e.rangeCount;d<f;d++){const m=e.getRangeAt(d);if(!m.collapsed)for(const{x:g,y:w,width:b,height:x}of m.getClientRects())b===0||x===0||h.push(c(g,w,b,x))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const n=this.#s.getRawValue(e);n&&(this.#E===Et.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){const r=this.#I?.get(t);r&&(r.setCanvas(e,n),this.#I.delete(t))}addMissingCanvas(t,e){(this.#I||=new Map).set(t,e)}}class jn{#t=null;#e=!1;#n=null;#i=null;#r=null;#s=null;#o=!1;#a=null;#h=null;#l=null;#d=null;#c=!1;static#f=null;static _l10n=null;constructor(t){this.#h=t,this.#c=t._uiManager.useNewAltTextFlow,jn.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){jn._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#i=document.createElement("span");t.append(e),this.#c?(t.classList.add("new"),t.setAttribute("data-l10n-id",jn.#f.missing),e.setAttribute("data-l10n-id",jn.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#h._uiManager._signal;t.addEventListener("contextmenu",mn,{signal:n}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const r=a=>{a.preventDefault(),this.#h._uiManager.editAltText(this.#h),this.#c&&this.#h._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#o=!0,r(a))},{signal:n}),await this.#m(),t}get#p(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#o}),this.#o=!1)}isEmpty(){return this.#c?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#c?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await jn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#m())}toggleAltTextBadge(t=!1){if(!this.#c||this.#t){this.#a?.remove(),this.#a=null;return}if(!this.#a){const e=this.#a=document.createElement("div");e.className="noAltTextBadge",this.#h.div.append(e)}this.#a.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:r,cancel:a=!1}){n&&(this.#l=n,this.#d=r),!(this.#t===t&&this.#e===e)&&(a||(this.#t=t,this.#e=e),this.#m())}toggle(t=!1){this.#n&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!t)}shown(){this.#h._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#r=null,this.#a?.remove(),this.#a=null}async#m(){const t=this.#n;if(!t)return;if(this.#c){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",jn.#f[this.#p]),this.#i?.setAttribute("data-l10n-id",jn.#f[`${this.#p}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#h.id}`;const r=100,a=this.#h._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#r.classList.add("show"),this.#h._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:a}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r?.classList.remove("show")},{signal:a})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#h.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Ho{#t;#e=!1;#n=null;#i;#r;#s;#o;#a=null;#h;#l=null;#d;#c=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:a=null,onPinchEnd:l=null,signal:c}){this.#t=t,this.#n=n,this.#i=e,this.#r=r,this.#s=a,this.#o=l,this.#d=new AbortController,this.#h=AbortSignal.any([c,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#h})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Tn.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#a)return;const r=this.#a=new AbortController,a=AbortSignal.any([this.#h,r.signal]),l=this.#t,c={capture:!0,signal:a,passive:!1},h=d=>{d.pointerType==="touch"&&(this.#a?.abort(),this.#a=null)};l.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(oe(d),h(d))},c),l.addEventListener("pointerup",h,c),l.addEventListener("pointercancel",h,c);return}if(!this.#c){this.#c=new AbortController;const r=AbortSignal.any([this.#h,this.#c.signal]),a=this.#t,l={signal:r,capture:!1,passive:!1};a.addEventListener("touchmove",this.#p.bind(this),l);const c=this.#m.bind(this);a.addEventListener("touchend",c,l),a.addEventListener("touchcancel",c,l),l.capture=!0,a.addEventListener("pointerdown",oe,l),a.addEventListener("pointermove",oe,l),a.addEventListener("pointercancel",oe,l),a.addEventListener("pointerup",oe,l),this.#r?.()}if(oe(t),t.touches.length!==2||this.#n?.()){this.#l=null;return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#p(t){if(!this.#l||t.touches.length!==2)return;oe(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:r,screenY:a}=e,{screenX:l,screenY:c}=n,h=this.#l,{touch0X:d,touch0Y:f,touch1X:m,touch1Y:g}=h,w=m-d,b=g-f,x=l-r,S=c-a,E=Math.hypot(x,S)||1,_=Math.hypot(w,b)||1;if(!this.#e&&Math.abs(_-E)<=Ho.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=r,h.touch0Y=a,h.touch1X=l,h.touch1Y=c,!this.#e){this.#e=!0;return}const C=[(r+l)/2,(a+c)/2];this.#s?.(C,_,E)}#m(t){t.touches.length>=2||(this.#c&&(this.#c.abort(),this.#c=null,this.#o?.()),this.#l&&(oe(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#a?.abort(),this.#a=null}}class vt{#t=null;#e=null;#n=null;#i=!1;#r=null;#s="";#o=!1;#a=null;#h=null;#l=null;#d=null;#c="";#f=!1;#p=null;#m=!1;#u=!1;#g=!1;#y=null;#v=0;#b=0;#x=null;#A=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#C=!1;#T=vt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Ud;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=vt.prototype._resizeWithKeyboard,e=li.TRANSLATE_SMALL,n=li.TRANSLATE_BIG;return Mt(this,"_resizerKeyboardManager",new zo([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],vt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:r,pageX:a,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[a,l];const[c,h]=this.parentDimensions;this.x=t.x/c,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Mt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new mP({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(vt._l10n??=t,vt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),vt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);vt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Bt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#C}set _isDraggable(t){this.#C=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#T}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#H(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,r){const[a,l]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(t+n)/a,this.y=(e+r)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,r]=this.parentDimensions;this.setAt(t*n,e*r,this.width*n,this.height*r),this._onTranslated()}#P([t,e],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#P(this.parentDimensions,t,e)}translateInPage(t,e){this.#p||=[this.x,this.y,this.width,this.height],this.#P(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#p||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[r,a]}=this;if(this.x+=t/r,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:c}=this;const[h,d]=this.getBaseTranslation();l+=h,c+=d;const{style:f}=n;f.left=`${(100*l).toFixed(2)}%`,f.top=`${(100*c).toFixed(2)}%`,this._onTranslating(l,c),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#p&&(this.#p[0]!==this.x||this.#p[1]!==this.y)}get _hasBeenResized(){return!!this.#p&&(this.#p[2]!==this.width||this.#p[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=vt,r=n/t,a=n/e;switch(this.rotation){case 90:return[-r,a];case 180:return[r,a];case 270:return[r,-a];default:return[-r,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,r]}=this;let{x:a,y:l,width:c,height:h}=this;if(c*=n,h*=r,a*=n,l*=r,this._mustFixPosition)switch(t){case 0:a=Ie(a,0,n-c),l=Ie(l,0,r-h);break;case 90:a=Ie(a,0,n-h),l=Ie(l,c,r);break;case 180:a=Ie(a,c,n),l=Ie(l,h,r);break;case 270:a=Ie(a,h,n),l=Ie(l,0,r-c);break}this.x=a/=n,this.y=l/=r;const[d,f]=this.getBaseTranslation();a+=d,l+=f,e.left=`${(100*a).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#S(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return vt.#S(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return vt.#S(t,e,360-this.parentRotation)}#k(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,r]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*t/n).toFixed(2)}%`,this.#o||(a.height=`${(100*e/r).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,r=n.endsWith("%"),a=!this.#o&&e.endsWith("%");if(r&&a)return;const[l,c]=this.parentDimensions;r||(t.width=`${(100*parseFloat(n)/l).toFixed(2)}%`),!this.#o&&!a&&(t.height=`${(100*parseFloat(e)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#_(){if(this.#a)return;this.#a=document.createElement("div"),this.#a.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const r=document.createElement("div");this.#a.append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",this.#M.bind(this,n),{signal:e}),r.addEventListener("contextmenu",mn,{signal:e}),r.tabIndex=-1}this.div.prepend(this.#a)}#M(t,e){e.preventDefault();const{isMac:n}=Ae.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#h=[e.screenX,e.screenY];const a=new AbortController,l=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#V.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",oe,{passive:!1,signal:l}),window.addEventListener("contextmenu",mn,{signal:l}),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const d=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=c,this.div.style.cursor=h,this.#I()};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})}#L(t,e,n,r){this.width=n,this.height=r,this.x=t,this.y=e;const[a,l]=this.parentDimensions;this.setDims(a*n,l*r),this.fixAndSetPosition(),this._onResized()}_onResized(){}#I(){if(!this.#l)return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:r}=this.#l;this.#l=null;const a=this.x,l=this.y,c=this.width,h=this.height;a===t&&l===e&&c===n&&h===r||this.addCommands({cmd:this.#L.bind(this,a,l,c,h),undo:this.#L.bind(this,t,e,n,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#V(t,e){const[n,r]=this.parentDimensions,a=this.x,l=this.y,c=this.width,h=this.height,d=vt.MIN_SIZE/n,f=vt.MIN_SIZE/r,m=this.#k(this.rotation),g=(G,U)=>[m[0]*G+m[2]*U,m[1]*G+m[3]*U],w=this.#k(360-this.rotation),b=(G,U)=>[w[0]*G+w[2]*U,w[1]*G+w[3]*U];let x,S,E=!1,_=!1;switch(t){case"topLeft":E=!0,x=(G,U)=>[0,0],S=(G,U)=>[G,U];break;case"topMiddle":x=(G,U)=>[G/2,0],S=(G,U)=>[G/2,U];break;case"topRight":E=!0,x=(G,U)=>[G,0],S=(G,U)=>[0,U];break;case"middleRight":_=!0,x=(G,U)=>[G,U/2],S=(G,U)=>[0,U/2];break;case"bottomRight":E=!0,x=(G,U)=>[G,U],S=(G,U)=>[0,0];break;case"bottomMiddle":x=(G,U)=>[G/2,U],S=(G,U)=>[G/2,0];break;case"bottomLeft":E=!0,x=(G,U)=>[0,U],S=(G,U)=>[G,0];break;case"middleLeft":_=!0,x=(G,U)=>[0,U/2],S=(G,U)=>[G,U/2];break}const C=x(c,h),R=S(c,h);let k=g(...R);const N=vt._round(a+k[0]),O=vt._round(l+k[1]);let L=1,H=1,W,Y;if(e.fromKeyboard)({deltaX:W,deltaY:Y}=e);else{const{screenX:G,screenY:U}=e,[B,tt]=this.#h;[W,Y]=this.screenToPageTranslation(G-B,U-tt),this.#h[0]=G,this.#h[1]=U}if([W,Y]=b(W/n,Y/r),E){const G=Math.hypot(c,h);L=H=Math.max(Math.min(Math.hypot(R[0]-C[0]-W,R[1]-C[1]-Y)/G,1/c,1/h),d/c,f/h)}else _?L=Ie(Math.abs(R[0]-C[0]-W),d,1)/c:H=Ie(Math.abs(R[1]-C[1]-Y),f,1)/h;const ft=vt._round(c*L),dt=vt._round(h*H);k=g(...S(ft,dt));const nt=N-k[0],xt=O-k[1];this.#p||=[this.x,this.y,this.width,this.height],this.width=ft,this.height=dt,this.x=nt,this.y=xt,this.setDims(n*ft,r*dt),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#u)return this._editToolbar;this._editToolbar=new yo(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(jn.initialize(vt._l10n),this.#n=new jn(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#i?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#U();const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[r,a]=this.getInitialTranslation();return this.translate(r,a),Cw(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#A||=new Ho({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#E.bind(this),onPinching:this.#w.bind(this),onPinchEnd:this.#O.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#E(){this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#w(t,e,n){let a=.7*(n/e)+1-.7;if(a===1)return;const l=this.#k(this.rotation),c=(N,O)=>[l[0]*N+l[2]*O,l[1]*N+l[3]*O],[h,d]=this.parentDimensions,f=this.x,m=this.y,g=this.width,w=this.height,b=vt.MIN_SIZE/h,x=vt.MIN_SIZE/d;a=Math.max(Math.min(a,1/g,1/w),b/g,x/w);const S=vt._round(g*a),E=vt._round(w*a);if(S===g&&E===w)return;this.#p||=[f,m,g,w];const _=c(g/2,w/2),C=vt._round(f+_[0]),R=vt._round(m+_[1]),k=c(S/2,E/2);this.x=C-k[0],this.y=R-k[1],this.width=S,this.height=E,this.setDims(h*S,d*E),this.fixAndSetPosition(),this._onResizing()}#O(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#I()}pointerdown(t){const{isMac:e}=Ae.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#$(t);return}this.#j(t)}#j(t){const{isMac:e}=Ae.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#$(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,a=this._uiManager.combinedSignal(r),l={capture:!0,passive:!1,signal:a},c=d=>{r.abort(),this.#r=null,this.#f=!1,this._uiManager.endDragSession()||this.#j(d),n&&this._onStopDragging()};e&&(this.#v=t.clientX,this.#b=t.clientY,this.#r=t.pointerId,this.#s=t.pointerType,window.addEventListener("pointermove",d=>{n||(n=!0,this._onStartDragging());const{clientX:f,clientY:m,pointerId:g}=d;if(g!==this.#r){oe(d);return}const[w,b]=this.screenToPageTranslation(f-this.#v,m-this.#b);this.#v=f,this.#b=m,this._uiManager.dragSelectedEditors(w,b)},l),window.addEventListener("touchmove",oe,l),window.addEventListener("pointerdown",d=>{d.pointerType===this.#s&&(this.#A||d.isPrimary)&&c(d),oe(d)},l));const h=d=>{if(!this.#r||this.#r===d.pointerId){c(d);return}oe(d)};window.addEventListener("pointerup",h,{signal:a}),window.addEventListener("blur",h,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const r=this.parentScale,[a,l]=this.pageDimensions,[c,h]=this.pageTranslation,d=t/r,f=e/r,m=this.x*a,g=this.y*l,w=this.width*a,b=this.height*l;switch(n){case 0:return[m+d+c,l-g-f-b+h,m+d+w+c,l-g-f+h];case 90:return[m+f+c,l-g+d+h,m+f+b+c,l-g+d+w+h];case 180:return[m-d-w+c,l-g+f+h,m-d+c,l-g+f+b+h];case 270:return[m-f-b+c,l-g-d-w+h,m-f+c,l-g-d+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,r,a,l]=t,c=a-n,h=l-r;switch(this.rotation){case 0:return[n,e-l,c,h];case 90:return[n,e-r,h,c];case 180:return[a,e-r,c,h];case 270:return[a,e-l,h,c];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#u=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#u=!1,!0):!1}isInEditMode(){return this.#u}shouldGetKeyboardEvents(){return this.#g}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:a,innerWidth:l}=window;return e<l&&r>0&&t<a&&n>0}#U(){if(this.#d||!this.div)return;this.#d=new AbortController;const t=this._uiManager.combinedSignal(this.#d);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#U()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){Bt("An editor must be serializable")}static async deserialize(t,e,n){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[a,l]=r.pageDimensions,[c,h,d,f]=r.getRectInCurrentCoords(t.rect,l);return r.x=c/a,r.y=h/l,r.width=d/a,r.height=f/l,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#d?.abort(),this.#d=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#H(),this.removeEditToolbar(),this.#x){for(const t of this.#x.values())clearTimeout(t);this.#x=null}this.parent=null,this.#A?.destroy(),this.#A=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#_(),this.#a.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#a.children;if(!this.#e){this.#e=Array.from(e);const l=this.#W.bind(this),c=this.#z.bind(this),h=this._uiManager._signal;for(const d of this.#e){const f=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",l,{signal:h}),d.addEventListener("blur",c,{signal:h}),d.addEventListener("focus",this.#D.bind(this,f),{signal:h}),d.setAttribute("data-l10n-id",vt._l10nResizer[f])}}const n=this.#e[0];let r=0;for(const l of e){if(l===n)break;r++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(a!==r){if(a<r)for(let c=0;c<r-a;c++)this.#a.append(this.#a.firstChild);else if(a>r)for(let c=0;c<a-r;c++)this.#a.firstChild.before(this.#a.lastChild);let l=0;for(const c of e){const d=this.#e[l++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",vt._l10nResizer[d])}}this.#N(0),this.#g=!0,this.#a.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#W(t){vt._resizerKeyboardManager.exec(this,t)}#z(t){this.#g&&t.relatedTarget?.parentNode!==this.#a&&this.#H()}#D(t){this.#c=this.#g?t:""}#N(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#g&&this.#V(this.#c,{deltaX:t,deltaY:e,fromKeyboard:!0})}#H(){this.#g=!1,this.#N(-1),this.#I()}_stopResizingWithKeyboard(){this.#H(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#a?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#m}set isEditing(t){this.#m=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#o=!0;const n=t/e,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#x||=new Map;const{action:n}=t;let r=this.#x.get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#x.delete(n),this.#x.size===0&&(this.#x=null)},vt._telemetryTimeout),this.#x.set(n,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class mP extends vt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Py=3285377520,hn=4294901760,Fn=65535;class _w{constructor(t){this.h1=t?t&4294967295:Py,this.h2=t?t&4294967295:Py}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let x=0,S=t.length;x<S;x++){const E=t.charCodeAt(x);E<=255?e[n++]=E:(e[n++]=E>>>8,e[n++]=E&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,a=n-r*4,l=new Uint32Array(e.buffer,0,r);let c=0,h=0,d=this.h1,f=this.h2;const m=3432918353,g=461845907,w=m&Fn,b=g&Fn;for(let x=0;x<r;x++)x&1?(c=l[x],c=c*m&hn|c*w&Fn,c=c<<15|c>>>17,c=c*g&hn|c*b&Fn,d^=c,d=d<<13|d>>>19,d=d*5+3864292196):(h=l[x],h=h*m&hn|h*w&Fn,h=h<<15|h>>>17,h=h*g&hn|h*b&Fn,f^=h,f=f<<13|f>>>19,f=f*5+3864292196);switch(c=0,a){case 3:c^=e[r*4+2]<<16;case 2:c^=e[r*4+1]<<8;case 1:c^=e[r*4],c=c*m&hn|c*w&Fn,c=c<<15|c>>>17,c=c*g&hn|c*b&Fn,r&1?d^=c:f^=c}this.h1=d,this.h2=f}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&hn|t*36045&Fn,e=e*4283543511&hn|((e<<16|t>>>16)*2950163797&hn)>>>16,t^=e>>>1,t=t*444984403&hn|t*60499&Fn,e=e*3301882366&hn|((e<<16|t>>>16)*3120437893&hn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const $h=Object.freeze({map:null,hash:"",transfer:void 0});class Wd{#t=!1;#e=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=this.#n.get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return this.#n.get(t)}remove(t){if(this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of this.#n.values())if(e instanceof vt)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=this.#n.get(t);let r=!1;if(n!==void 0)for(const[a,l]of Object.entries(e))n[a]!==l&&(r=!0,n[a]=l);else r=!0,this.#n.set(t,e);r&&this.#i(),e instanceof vt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#n.has(t)}get size(){return this.#n.size}#i(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Tw(this)}get serializable(){if(this.#n.size===0)return $h;const t=new Map,e=new _w,n=[],r=Object.create(null);let a=!1;for(const[l,c]of this.#n){const h=c instanceof vt?c.serialize(!1,r):c;h&&(t.set(l,h),e.update(`${l}:${JSON.stringify(h)}`),a||=!!h.bitmap)}if(a)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:$h}get editorStats(){let t=null;const e=new Map;for(const n of this.#n.values()){if(!(n instanceof vt))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:a}=r;e.has(a)||e.set(a,Object.getPrototypeOf(n).constructor),t||=Object.create(null);const l=t[a]||=new Map;for(const[c,h]of Object.entries(r)){if(c==="type")continue;let d=l.get(c);d||(d=new Map,l.set(c,d));const f=d.get(h)??0;d.set(h,f+1)}}for(const[n,r]of e)t[n]=r.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const e of this.#n.values())!(e instanceof vt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class Tw extends Wd{#t;constructor(t){super();const{map:e,hash:n,transfer:r}=t.serializable,a=structuredClone(e,r?{transfer:r}:null);this.#t={map:a,hash:n,transfer:r}}get print(){Bt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Mt(this,"modifiedIds",{ids:new Set,hash:""})}}class gP{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||this.#t.has(t.loadedName))){if(he(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:a,style:l}=t,c=new FontFace(r,a,l);this.addNativeFontFace(c);try{await c.load(),this.#t.add(r),n?.(t)}catch{Ct(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}Bt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw Ct(`Failed to load font '${n.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Mt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Mt(this,"isSyncFontLoadingSupported",je||Ae.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(he(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:e,callback:t};return n.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Mt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(R,k){return R.charCodeAt(k)<<24|R.charCodeAt(k+1)<<16|R.charCodeAt(k+2)<<8|R.charCodeAt(k+3)&255}function r(R,k,N,O){const L=R.substring(0,k),H=R.substring(k+N);return L+O+H}let a,l;const c=this._document.createElement("canvas");c.width=1,c.height=1;const h=c.getContext("2d");let d=0;function f(R,k){if(++d>30){Ct("Load test font never loaded."),k();return}if(h.font="30px "+R,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(f.bind(null,R,k))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let g=this._loadTestFont;g=r(g,976,m.length,m);const b=16,x=1482184792;let S=n(g,b);for(a=0,l=m.length-3;a<l;a+=4)S=S-x+n(m,a)|0;a<m.length&&(S=S-x+n(m+"XXX",a)|0),g=r(g,b,4,sP(S));const E=`url(data:font/opentype;base64,${btoa(g)});`,_=`@font-face {font-family:"${m}";src:${E}}`;this.insertRule(_);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const R of[t.loadedName,m]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=R,C.append(k)}this._document.body.append(C),f(m,()=>{C.remove(),e.complete()})}}class yP{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this._inspectFont=e}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${xw(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let r;try{r=t.get(n)}catch(l){Ct(`getPathGenerator - ignoring character: "${l}".`)}const a=new Path2D(r||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=a}}function vP(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(je)return i;const t=URL.parse(i,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function wP(i){if(je&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return jo(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i?.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function hl(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const Uh=i=>typeof i=="object"&&Number.isInteger(i?.num)&&i.num>=0&&Number.isInteger(i?.gen)&&i.gen>=0,bP=i=>typeof i=="object"&&typeof i?.name=="string",kw=lP.bind(null,Uh,bP);class xP{#t=new Map;#e=Promise.resolve();postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,n)})}addEventListener(t,e,n=null){let r=null;if(n?.signal instanceof AbortSignal){const{signal:a}=n;if(a.aborted){Ct("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);r=()=>a.removeEventListener("abort",l),a.addEventListener("abort",l)}this.#t.set(e,r)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const dl={DATA:1,ERROR:2},ce={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Ry(){}function Ge(i){if(i instanceof ai||i instanceof Il||i instanceof _y||i instanceof _o||i instanceof lh)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||Bt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new ai(i.message);case"InvalidPDFException":return new Il(i.message);case"PasswordException":return new _y(i.message,i.code);case"ResponseException":return new _o(i.message,i.status,i.missing);case"UnknownErrorException":return new lh(i.message,i.details)}return new lh(i.message,i.toString())}class co{#t=new AbortController;constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const n=t.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===dl.DATA)r.resolve(t.data);else if(t.callback===dl.ERROR)r.reject(Ge(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,r=t.sourceName,a=this.comObj;Promise.try(e,t.data).then(function(l){a.postMessage({sourceName:n,targetName:r,callback:dl.DATA,callbackId:t.callbackId,data:l})},function(l){a.postMessage({sourceName:n,targetName:r,callback:dl.ERROR,callbackId:t.callbackId,reason:Ge(l)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const r=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[r]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},n)}catch(l){a.reject(l)}return a.promise}sendWithStream(t,e,n,r){const a=this.streamId++,l=this.sourceName,c=this.targetName,h=this.comObj;return new ReadableStream({start:d=>{const f=Promise.withResolvers();return this.streamControllers[a]={controller:d,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:l,targetName:c,action:t,streamId:a,data:e,desiredSize:d.desiredSize},r),f.promise},pull:d=>{const f=Promise.withResolvers();return this.streamControllers[a].pullCall=f,h.postMessage({sourceName:l,targetName:c,stream:ce.PULL,streamId:a,desiredSize:d.desiredSize}),f.promise},cancel:d=>{he(d instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[a].cancelCall=f,this.streamControllers[a].isClosed=!0,h.postMessage({sourceName:l,targetName:c,stream:ce.CANCEL,streamId:a,reason:Ge(d)}),f.promise}},n)}#n(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,a=this.comObj,l=this,c=this.actionHandler[t.action],h={enqueue(d,f=1,m){if(this.isCancelled)return;const g=this.desiredSize;this.desiredSize-=f,g>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:r,stream:ce.ENQUEUE,streamId:e,chunk:d},m)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:r,stream:ce.CLOSE,streamId:e}),delete l.streamSinks[e])},error(d){he(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:r,stream:ce.ERROR,streamId:e,reason:Ge(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(c,t.data,h).then(function(){a.postMessage({sourceName:n,targetName:r,stream:ce.START_COMPLETE,streamId:e,success:!0})},function(d){a.postMessage({sourceName:n,targetName:r,stream:ce.START_COMPLETE,streamId:e,reason:Ge(d)})})}#i(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,a=this.comObj,l=this.streamControllers[e],c=this.streamSinks[e];switch(t.stream){case ce.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(Ge(t.reason));break;case ce.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(Ge(t.reason));break;case ce.PULL:if(!c){a.postMessage({sourceName:n,targetName:r,stream:ce.PULL_COMPLETE,streamId:e,success:!0});break}c.desiredSize<=0&&t.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=t.desiredSize,Promise.try(c.onPull||Ry).then(function(){a.postMessage({sourceName:n,targetName:r,stream:ce.PULL_COMPLETE,streamId:e,success:!0})},function(d){a.postMessage({sourceName:n,targetName:r,stream:ce.PULL_COMPLETE,streamId:e,reason:Ge(d)})});break;case ce.ENQUEUE:if(he(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case ce.CLOSE:if(he(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,e);break;case ce.ERROR:he(l,"error should have stream controller"),l.controller.error(Ge(t.reason)),this.#r(l,e);break;case ce.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(Ge(t.reason)),this.#r(l,e);break;case ce.CANCEL:if(!c)break;const h=Ge(t.reason);Promise.try(c.onCancel||Ry,h).then(function(){a.postMessage({sourceName:n,targetName:r,stream:ce.CANCEL_COMPLETE,streamId:e,success:!0})},function(d){a.postMessage({sourceName:n,targetName:r,stream:ce.CANCEL_COMPLETE,streamId:e,reason:Ge(d)})}),c.sinkCapability.reject(h),c.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class Pw{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Bt("Abstract method `_createCanvas` called.")}}class AP extends Pw{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class Rw{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Bt("Abstract method `_fetch` called.")}}class My extends Rw{async _fetch(t){const e=await pr(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):jo(e)}}class Mw{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,r,a){return"none"}destroy(t=!1){}}class SP extends Mw{#t;#e;#n;#i;#r;#s;#o=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#i=t,this.#r=e}get#a(){return this.#e||=new Map}get#h(){return this.#s||=new Map}get#l(){if(!this.#n){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const n=this.#r.createElementNS(ni,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#n=this.#r.createElementNS(ni,"defs"),t.append(n),n.append(this.#n),this.#r.body.append(t)}return this.#n}#d(t){if(t.length===1){const h=t[0],d=new Array(256);for(let m=0;m<256;m++)d[m]=h[m]/255;const f=d.join(",");return[f,f,f]}const[e,n,r]=t,a=new Array(256),l=new Array(256),c=new Array(256);for(let h=0;h<256;h++)a[h]=e[h]/255,l[h]=n[h]/255,c[h]=r[h]/255;return[a.join(","),l.join(","),c.join(",")]}#c(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(Vo(e)?Ct('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=jd(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#a.get(t);if(e)return e;const[n,r,a]=this.#d(t),l=t.length===1?n:`${n}${r}${a}`;if(e=this.#a.get(l),e)return this.#a.set(t,e),e;const c=`g_${this.#i}_transfer_map_${this.#o++}`,h=this.#c(c);this.#a.set(t,h),this.#a.set(l,h);const d=this.#m(c);return this.#g(n,r,a,d),h}addHCMFilter(t,e){const n=`${t}-${e}`,r="base";let a=this.#h.get(r);if(a?.key===n||(a?(a.filter?.remove(),a.key=n,a.url="none",a.filter=null):(a={key:n,url:"none",filter:null},this.#h.set(r,a)),!t||!e))return a.url;const l=this.#v(t);t=pt.makeHexColor(...l);const c=this.#v(e);if(e=pt.makeHexColor(...c),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return a.url;const h=new Array(256);for(let w=0;w<=255;w++){const b=w/255;h[w]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}const d=h.join(","),f=`g_${this.#i}_hcm_filter`,m=a.filter=this.#m(f);this.#g(d,d,d,m),this.#p(m);const g=(w,b)=>{const x=l[w]/255,S=c[w]/255,E=new Array(b+1);for(let _=0;_<=b;_++)E[_]=x+_/b*(S-x);return E.join(",")};return this.#g(g(0,5),g(1,5),g(2,5),m),a.url=this.#c(f),a.url}addAlphaFilter(t){let e=this.#a.get(t);if(e)return e;const[n]=this.#d([t]),r=`alpha_${n}`;if(e=this.#a.get(r),e)return this.#a.set(t,e),e;const a=`g_${this.#i}_alpha_map_${this.#o++}`,l=this.#c(a);this.#a.set(t,l),this.#a.set(r,l);const c=this.#m(a);return this.#y(n,c),l}addLuminosityFilter(t){let e=this.#a.get(t||"luminosity");if(e)return e;let n,r;if(t?([n]=this.#d([t]),r=`luminosity_${n}`):r="luminosity",e=this.#a.get(r),e)return this.#a.set(t,e),e;const a=`g_${this.#i}_luminosity_map_${this.#o++}`,l=this.#c(a);this.#a.set(t,l),this.#a.set(r,l);const c=this.#m(a);return this.#f(c),t&&this.#y(n,c),l}addHighlightHCMFilter(t,e,n,r,a){const l=`${e}-${n}-${r}-${a}`;let c=this.#h.get(t);if(c?.key===l||(c?(c.filter?.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},this.#h.set(t,c)),!e||!n))return c.url;const[h,d]=[e,n].map(this.#v.bind(this));let f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),m=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[g,w]=[r,a].map(this.#v.bind(this));m<f&&([f,m,g,w]=[m,f,w,g]),this.#l.style.color="";const b=(E,_,C)=>{const R=new Array(256),k=(m-f)/C,N=E/255,O=(_-E)/(255*C);let L=0;for(let H=0;H<=C;H++){const W=Math.round(f+H*k),Y=N+H*O;for(let ft=L;ft<=W;ft++)R[ft]=Y;L=W+1}for(let H=L;H<256;H++)R[H]=R[L-1];return R.join(",")},x=`g_${this.#i}_hcm_${t}_filter`,S=c.filter=this.#m(x);return this.#p(S),this.#g(b(g[0],w[0],5),b(g[1],w[1],5),b(g[2],w[2],5),S),c.url=this.#c(x),c.url}destroy(t=!1){t&&this.#s?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#o=0)}#f(t){const e=this.#r.createElementNS(ni,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#p(t){const e=this.#r.createElementNS(ni,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#m(t){const e=this.#r.createElementNS(ni,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,n){const r=this.#r.createElementNS(ni,e);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),t.append(r)}#g(t,e,n,r){const a=this.#r.createElementNS(ni,"feComponentTransfer");r.append(a),this.#u(a,"feFuncR",t),this.#u(a,"feFuncG",e),this.#u(a,"feFuncB",n)}#y(t,e){const n=this.#r.createElementNS(ni,"feComponentTransfer");e.append(n),this.#u(n,"feFuncA",t)}#v(t){return this.#l.style.color=t,Hd(getComputedStyle(this.#l).getPropertyValue("color"))}}class Lw{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Bt("Abstract method `_fetch` called.")}}class Ly extends Lw{async _fetch(t){const e=await pr(t,"arraybuffer");return new Uint8Array(e)}}class Iw{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Bt("Abstract method `_fetch` called.")}}class Iy extends Iw{async _fetch(t){const e=await pr(t,"arraybuffer");return new Uint8Array(e)}}je&&Ct("Please use the `legacy` build in Node.js environments.");async function Gd(i){const e=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(e)}class EP extends Mw{}class CP extends Pw{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class _P extends Rw{async _fetch(t){return Gd(t)}}class TP extends Lw{async _fetch(t){return Gd(t)}}class kP extends Iw{async _fetch(t){return Gd(t)}}const Te={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Wh(i,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,n),i.clip(r)}class Xd{isModifyingCurrentTransform(){return!1}getPattern(){Bt("Abstract method `getPattern` called.")}}class PP extends Xd{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,r){let a;if(r===Te.STROKE||r===Te.FILL){const l=e.current.getClippedPathBoundingBox(r,Kt(t))||[0,0,0,0],c=Math.ceil(l[2]-l[0])||1,h=Math.ceil(l[3]-l[1])||1,d=e.cachedCanvases.getCanvas("pattern",c,h),f=d.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-l[0],-l[1]),n=pt.transform(n,[1,0,0,1,l[0],l[1]]),f.transform(...e.baseTransform),this.matrix&&f.transform(...this.matrix),Wh(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),a=t.createPattern(d.canvas,"no-repeat");const m=new DOMMatrix(n);a.setTransform(m)}else Wh(t,this._bbox),a=this._createGradient(t);return a}}function hh(i,t,e,n,r,a,l,c){const h=t.coords,d=t.colors,f=i.data,m=i.width*4;let g;h[e+1]>h[n+1]&&(g=e,e=n,n=g,g=a,a=l,l=g),h[n+1]>h[r+1]&&(g=n,n=r,r=g,g=l,l=c,c=g),h[e+1]>h[n+1]&&(g=e,e=n,n=g,g=a,a=l,l=g);const w=(h[e]+t.offsetX)*t.scaleX,b=(h[e+1]+t.offsetY)*t.scaleY,x=(h[n]+t.offsetX)*t.scaleX,S=(h[n+1]+t.offsetY)*t.scaleY,E=(h[r]+t.offsetX)*t.scaleX,_=(h[r+1]+t.offsetY)*t.scaleY;if(b>=_)return;const C=d[a],R=d[a+1],k=d[a+2],N=d[l],O=d[l+1],L=d[l+2],H=d[c],W=d[c+1],Y=d[c+2],ft=Math.round(b),dt=Math.round(_);let nt,xt,G,U,B,tt,Q,D;for(let $=ft;$<=dt;$++){if($<S){const et=$<b?0:(b-$)/(b-S);nt=w-(w-x)*et,xt=C-(C-N)*et,G=R-(R-O)*et,U=k-(k-L)*et}else{let et;$>_?et=1:S===_?et=0:et=(S-$)/(S-_),nt=x-(x-E)*et,xt=N-(N-H)*et,G=O-(O-W)*et,U=L-(L-Y)*et}let Z;$<b?Z=0:$>_?Z=1:Z=(b-$)/(b-_),B=w-(w-E)*Z,tt=C-(C-H)*Z,Q=R-(R-W)*Z,D=k-(k-Y)*Z;const st=Math.round(Math.min(nt,B)),mt=Math.round(Math.max(nt,B));let wt=m*$+st*4;for(let et=st;et<=mt;et++)Z=(nt-et)/(nt-B),Z<0?Z=0:Z>1&&(Z=1),f[wt++]=xt-(xt-tt)*Z|0,f[wt++]=G-(G-Q)*Z|0,f[wt++]=U-(U-D)*Z|0,f[wt++]=255}}function RP(i,t,e){const n=t.coords,r=t.colors;let a,l;switch(t.type){case"lattice":const c=t.verticesPerRow,h=Math.floor(n.length/c)-1,d=c-1;for(a=0;a<h;a++){let f=a*c;for(let m=0;m<d;m++,f++)hh(i,e,n[f],n[f+1],n[f+c],r[f],r[f+1],r[f+c]),hh(i,e,n[f+c+1],n[f+1],n[f+c],r[f+c+1],r[f+1],r[f+c])}break;case"triangles":for(a=0,l=n.length;a<l;a+=3)hh(i,e,n[a],n[a+1],n[a+2],r[a],r[a+1],r[a+2]);break;default:throw new Error("illegal figure")}}class MP extends Xd{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const c=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-c,f=Math.ceil(this._bounds[3])-h,m=Math.min(Math.ceil(Math.abs(d*t[0]*1.1)),3e3),g=Math.min(Math.ceil(Math.abs(f*t[1]*1.1)),3e3),w=d/m,b=f/g,x={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-h,scaleX:1/w,scaleY:1/b},S=m+4,E=g+4,_=n.getCanvas("mesh",S,E),C=_.context,R=C.createImageData(m,g);if(e){const N=R.data;for(let O=0,L=N.length;O<L;O+=4)N[O]=e[0],N[O+1]=e[1],N[O+2]=e[2],N[O+3]=255}for(const N of this._figures)RP(R,N,x);return C.putImageData(R,2,2),{canvas:_.canvas,offsetX:c-2*w,offsetY:h-2*b,scaleX:w,scaleY:b}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,r){Wh(t,this._bbox);const a=new Float32Array(2);if(r===Te.SHADING)pt.singularValueDecompose2dScale(Kt(t),a);else if(this.matrix){pt.singularValueDecompose2dScale(this.matrix,a);const[c,h]=a;pt.singularValueDecompose2dScale(e.baseTransform,a),a[0]*=c,a[1]*=h}else pt.singularValueDecompose2dScale(e.baseTransform,a);const l=this._createMeshCanvas(a,r===Te.SHADING?null:this._background,e.cachedCanvases);return r!==Te.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class LP extends Xd{getPattern(){return"hotpink"}}function IP(i){switch(i[0]){case"RadialAxial":return new PP(i);case"Mesh":return new MP(i);case"Dummy":return new LP}throw new Error(`Unknown IR type: ${i[0]}`)}const Dy={COLORED:1,UNCOLORED:2};class Kd{static MAX_PATTERN_SIZE=3e3;constructor(t,e,n,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:r,tilingType:a,color:l,canvasGraphicsFactory:c}=this;let{xstep:h,ystep:d}=this;h=Math.abs(h),d=Math.abs(d),zl("TilingType: "+a);const f=e[0],m=e[1],g=e[2],w=e[3],b=g-f,x=w-m,S=new Float32Array(2);pt.singularValueDecompose2dScale(this.matrix,S);const[E,_]=S;pt.singularValueDecompose2dScale(this.baseTransform,S);const C=E*S[0],R=_*S[1];let k=b,N=x,O=!1,L=!1;const H=Math.ceil(h*C),W=Math.ceil(d*R),Y=Math.ceil(b*C),ft=Math.ceil(x*R);H>=Y?k=h:O=!0,W>=ft?N=d:L=!0;const dt=this.getSizeAndScale(k,this.ctx.canvas.width,C),nt=this.getSizeAndScale(N,this.ctx.canvas.height,R),xt=t.cachedCanvases.getCanvas("pattern",dt.size,nt.size),G=xt.context,U=c.createCanvasGraphics(G);if(U.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(U,r,l),G.translate(-dt.scale*f,-nt.scale*m),U.transform(dt.scale,0,0,nt.scale,0,0),G.save(),this.clipBbox(U,f,m,g,w),U.baseTransform=Kt(U.ctx),U.executeOperatorList(n),U.endDrawing(),G.restore(),O||L){const B=xt.canvas;O&&(k=h),L&&(N=d);const tt=this.getSizeAndScale(k,this.ctx.canvas.width,C),Q=this.getSizeAndScale(N,this.ctx.canvas.height,R),D=tt.size,$=Q.size,Z=t.cachedCanvases.getCanvas("pattern-workaround",D,$),st=Z.context,mt=O?Math.floor(b/h):0,wt=L?Math.floor(x/d):0;for(let et=0;et<=mt;et++)for(let _t=0;_t<=wt;_t++)st.drawImage(B,D*et,$*_t,D,$,0,0,D,$);return{canvas:Z.canvas,scaleX:tt.scale,scaleY:Q.scale,offsetX:f,offsetY:m}}return{canvas:xt.canvas,scaleX:dt.scale,scaleY:nt.scale,offsetX:f,offsetY:m}}getSizeAndScale(t,e,n){const r=Math.max(Kd.MAX_PATTERN_SIZE,e);let a=Math.ceil(t*n);return a>=r?a=r:n=a/t,{scale:n,size:a}}clipBbox(t,e,n,r,a){const l=r-e,c=a-n;t.ctx.rect(e,n,l,c),pt.axialAlignedBoundingBox([e,n,r,a],Kt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const r=t.ctx,a=t.current;switch(e){case Dy.COLORED:const{fillStyle:l,strokeStyle:c}=this.ctx;r.fillStyle=a.fillColor=l,r.strokeStyle=a.strokeColor=c;break;case Dy.UNCOLORED:r.fillStyle=r.strokeStyle=n,a.fillColor=a.strokeColor=n;break;default:throw new iP(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,r){let a=n;r!==Te.SHADING&&(a=pt.transform(a,e.baseTransform),this.matrix&&(a=pt.transform(a,this.matrix)));const l=this.createPatternCanvas(e);let c=new DOMMatrix(a);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const h=t.createPattern(l.canvas,"repeat");return h.setTransform(c),h}}function DP({src:i,srcPos:t=0,dest:e,width:n,height:r,nonBlackColor:a=4294967295,inverseDecode:l=!1}){const c=Ae.isLittleEndian?4278190080:255,[h,d]=l?[a,c]:[c,a],f=n>>3,m=n&7,g=i.length;e=new Uint32Array(e.buffer);let w=0;for(let b=0;b<r;b++){for(const S=t+f;t<S;t++){const E=t<g?i[t]:255;e[w++]=E&128?d:h,e[w++]=E&64?d:h,e[w++]=E&32?d:h,e[w++]=E&16?d:h,e[w++]=E&8?d:h,e[w++]=E&4?d:h,e[w++]=E&2?d:h,e[w++]=E&1?d:h}if(m===0)continue;const x=t<g?i[t++]:255;for(let S=0;S<m;S++)e[w++]=x&1<<7-S?d:h}return{srcPos:t,destPos:w}}const Ny=16,Fy=100,NP=15,Oy=10,Xe=16,dh=new DOMMatrix,en=new Float32Array(2),Qs=new Float32Array([1/0,1/0,-1/0,-1/0]);function FP(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},i.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},i.transform=function(e,n,r,a,l,c){t.transform(e,n,r,a,l,c),this.__originalTransform(e,n,r,a,l,c)},i.setTransform=function(e,n,r,a,l,c){t.setTransform(e,n,r,a,l,c),this.__originalSetTransform(e,n,r,a,l,c)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(e){t.rotate(e),this.__originalRotate(e)},i.clip=function(e){t.clip(e),this.__originalClip(e)},i.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},i.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},i.bezierCurveTo=function(e,n,r,a,l,c){t.bezierCurveTo(e,n,r,a,l,c),this.__originalBezierCurveTo(e,n,r,a,l,c)},i.rect=function(e,n,r,a){t.rect(e,n,r,a),this.__originalRect(e,n,r,a)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class OP{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,n)):(r=this.canvasFactory.create(e,n),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function fl(i,t,e,n,r,a,l,c,h,d){const[f,m,g,w,b,x]=Kt(i);if(m===0&&g===0){const _=l*f+b,C=Math.round(_),R=c*w+x,k=Math.round(R),N=(l+h)*f+b,O=Math.abs(Math.round(N)-C)||1,L=(c+d)*w+x,H=Math.abs(Math.round(L)-k)||1;return i.setTransform(Math.sign(f),0,0,Math.sign(w),C,k),i.drawImage(t,e,n,r,a,0,0,O,H),i.setTransform(f,m,g,w,b,x),[O,H]}if(f===0&&w===0){const _=c*g+b,C=Math.round(_),R=l*m+x,k=Math.round(R),N=(c+d)*g+b,O=Math.abs(Math.round(N)-C)||1,L=(l+h)*m+x,H=Math.abs(Math.round(L)-k)||1;return i.setTransform(0,Math.sign(m),Math.sign(g),0,C,k),i.drawImage(t,e,n,r,a,0,0,H,O),i.setTransform(f,m,g,w,b,x),[H,O]}i.drawImage(t,e,n,r,a,l,c,h,d);const S=Math.hypot(f,m),E=Math.hypot(g,w);return[S*h,E*d]}class jy{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Hh;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Le.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e){this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Qs.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Te.FILL,e=null){const n=this.minMax.slice();if(t===Te.STROKE){e||Bt("Stroke bounding box must include transform."),pt.singularValueDecompose2dScale(e,en);const r=en[0]*this.lineWidth/2,a=en[1]*this.lineWidth/2;n[0]-=r,n[1]-=a,n[2]+=r,n[3]+=a}return n}updateClipFromPath(){const t=pt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Qs,0)}getClippedPathBoundingBox(t=Te.FILL,e=null){return pt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function By(i,t){if(t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,n=t.width,r=e%Xe,a=(e-r)/Xe,l=r===0?a:a+1,c=i.createImageData(n,Xe);let h=0,d;const f=t.data,m=c.data;let g,w,b,x;if(t.kind===go.GRAYSCALE_1BPP){const S=f.byteLength,E=new Uint32Array(m.buffer,0,m.byteLength>>2),_=E.length,C=n+7>>3,R=4294967295,k=Ae.isLittleEndian?4278190080:255;for(g=0;g<l;g++){for(b=g<a?Xe:r,d=0,w=0;w<b;w++){const N=S-h;let O=0;const L=N>C?n:N*8-7,H=L&-8;let W=0,Y=0;for(;O<H;O+=8)Y=f[h++],E[d++]=Y&128?R:k,E[d++]=Y&64?R:k,E[d++]=Y&32?R:k,E[d++]=Y&16?R:k,E[d++]=Y&8?R:k,E[d++]=Y&4?R:k,E[d++]=Y&2?R:k,E[d++]=Y&1?R:k;for(;O<L;O++)W===0&&(Y=f[h++],W=128),E[d++]=Y&W?R:k,W>>=1}for(;d<_;)E[d++]=0;i.putImageData(c,0,g*Xe)}}else if(t.kind===go.RGBA_32BPP){for(w=0,x=n*Xe*4,g=0;g<a;g++)m.set(f.subarray(h,h+x)),h+=x,i.putImageData(c,0,w),w+=Xe;g<l&&(x=n*r*4,m.set(f.subarray(h,h+x)),i.putImageData(c,0,w))}else if(t.kind===go.RGB_24BPP)for(b=Xe,x=n*b,g=0;g<l;g++){for(g>=a&&(b=r,x=n*b),d=0,w=x;w--;)m[d++]=f[h++],m[d++]=f[h++],m[d++]=f[h++],m[d++]=255;i.putImageData(c,0,g*Xe)}else throw new Error(`bad image kind: ${t.kind}`)}function Vy(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,r=e%Xe,a=(e-r)/Xe,l=r===0?a:a+1,c=i.createImageData(n,Xe);let h=0;const d=t.data,f=c.data;for(let m=0;m<l;m++){const g=m<a?Xe:r;({srcPos:h}=DP({src:d,srcPos:h,dest:f,width:n,height:g,nonBlackColor:0})),i.putImageData(c,0,m*Xe)}}function io(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)i[n]!==void 0&&(t[n]=i[n]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function pl(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}function zy(i,t){if(t)return!0;pt.singularValueDecompose2dScale(i,en);const e=Math.fround(Tn.pixelRatio*hs.PDF_TO_CSS_UNITS);return en[0]<=e&&en[1]<=e}const jP=["butt","round","square"],BP=["miter","round","bevel"],VP={},Hy={};class tr{constructor(t,e,n,r,a,{optionalContentConfig:l,markedContentStack:c=null},h,d){this.ctx=t,this.current=new jy(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=r,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new OP(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:r=null}){const a=this.ctx.canvas.width,l=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,a,l),this.ctx.fillStyle=c,n){const h=this.cachedCanvases.getCanvas("transparent",a,l);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Kt(this.compositeCtx))}this.ctx.save(),pl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Kt(this.ctx)}executeOperatorList(t,e,n,r){const a=t.argsArray,l=t.fnArray;let c=e||0;const h=a.length;if(h===c)return c;const d=h-c>Oy&&typeof n=="function",f=d?Date.now()+NP:0;let m=0;const g=this.commonObjs,w=this.objs;let b;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,n),c;if(b=l[c],b!==Co.dependency)this[b].apply(this,a[c]);else for(const x of a[c]){const S=x.startsWith("g_")?g:w;if(!S.has(x))return S.get(x,n),c}if(c++,c===h)return c;if(d&&++m>Oy){if(Date.now()>f)return n(),c;m=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const n=t.width??t.displayWidth,r=t.height??t.displayHeight;let a=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),c=n,h=r,d="prescale1",f,m;for(;a>2&&c>1||l>2&&h>1;){let g=c,w=h;a>2&&c>1&&(g=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),a/=c/g),l>2&&h>1&&(w=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,l/=h/w),f=this.cachedCanvases.getCanvas(d,g,w),m=f.context,m.clearRect(0,0,g,w),m.drawImage(t,0,0,c,h,0,0,g,w),t=f.canvas,c=g,h=w,d=d==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:h}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:r}=t,a=this.current.fillColor,l=this.current.patternFill,c=Kt(e);let h,d,f,m;if((t.bitmap||t.data)&&t.count>1){const H=t.bitmap||t.data.buffer;d=JSON.stringify(l?c:[c.slice(0,4),a]),h=this._cachedBitmapsMap.get(H),h||(h=new Map,this._cachedBitmapsMap.set(H,h));const W=h.get(d);if(W&&!l){const Y=Math.round(Math.min(c[0],c[2])+c[4]),ft=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:W,offsetX:Y,offsetY:ft}}f=W}f||(m=this.cachedCanvases.getCanvas("maskCanvas",n,r),Vy(m.context,t));let g=pt.transform(c,[1/n,0,0,-1/r,0,0]);g=pt.transform(g,[1,0,0,1,0,-r]);const w=Qs.slice();pt.axialAlignedBoundingBox([0,0,n,r],g,w);const[b,x,S,E]=w,_=Math.round(S-b)||1,C=Math.round(E-x)||1,R=this.cachedCanvases.getCanvas("fillCanvas",_,C),k=R.context,N=b,O=x;k.translate(-N,-O),k.transform(...g),f||(f=this._scaleImage(m.canvas,Nn(k)),f=f.img,h&&l&&h.set(d,f)),k.imageSmoothingEnabled=zy(Kt(k),t.interpolate),fl(k,f,0,0,f.width,f.height,0,0,n,r),k.globalCompositeOperation="source-in";const L=pt.transform(Nn(k),[1,0,0,1,-N,-O]);return k.fillStyle=l?a.getPattern(e,this,L,Te.FILL):a,k.fillRect(0,0,n,r),h&&!l&&(this.cachedCanvases.delete("fillCanvas"),h.set(d,R.canvas)),{canvas:R.canvas,offsetX:Math.round(N),offsetY:Math.round(O)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=jP[t]}setLineJoin(t){this.ctx.lineJoin=BP[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx;const a=this.ctx=r.context;a.setTransform(this.suspendedCtx.getTransform()),io(this.suspendedCtx,a),FP(a,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),io(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,r){const a=r[0],l=r[1],c=r[2]-a,h=r[3]-l;c===0||h===0||(this.genericComposeSMask(e.context,n,c,h,e.subtype,e.backdrop,e.transferMap,a,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,r,a,l,c,h,d,f,m){let g=t.canvas,w=h-f,b=d-m;if(l)if(w<0||b<0||w+n>g.width||b+r>g.height){const S=this.cachedCanvases.getCanvas("maskExtension",n,r),E=S.context;E.drawImage(g,-w,-b),E.globalCompositeOperation="destination-atop",E.fillStyle=l,E.fillRect(0,0,n,r),E.globalCompositeOperation="source-over",g=S.canvas,w=b=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(w,b,n,r),t.clip(S),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(w,b,n,r),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&c?e.filter=this.filterFactory.addAlphaFilter(c):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(c));const x=new Path2D;x.rect(h,d,n,r),e.clip(x),e.globalCompositeOperation="destination-in",e.drawImage(g,w,b,n,r,h,d,n,r),e.restore()}save(){this.inSMaskMode&&io(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&io(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,r,a,l){this.ctx.transform(t,e,n,r,a,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){let[r]=e;if(!n){r||=e[0]=new Path2D,this[t](r);return}if(!(r instanceof Path2D)){const a=e[0]=new Path2D;for(let l=0,c=r.length;l<c;)switch(r[l++]){case ul.moveTo:a.moveTo(r[l++],r[l++]);break;case ul.lineTo:a.lineTo(r[l++],r[l++]);break;case ul.curveTo:a.bezierCurveTo(r[l++],r[l++],r[l++],r[l++],r[l++],r[l++]);break;case ul.closePath:a.closePath();break;default:Ct(`Unrecognized drawing path operator: ${r[l-1]}`);break}r=a}pt.axialAlignedBoundingBox(n,Kt(this.ctx),this.current.minMax),this[t](r)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const n=this.ctx,r=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&r?.getPattern){const a=r.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=r.getPattern(n,this,Nn(n),Te.STROKE),a){const l=new Path2D;l.addPath(t,n.getTransform().invertSelf().multiplySelf(a)),t=l}this.rescaleAndStroke(t,!1),n.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(Te.STROKE,Kt(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const n=this.ctx,r=this.current.fillColor,a=this.current.patternFill;let l=!1;if(a){const h=r.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=r.getPattern(n,this,Nn(n),Te.FILL),h){const d=new Path2D;d.addPath(t,n.getTransform().invertSelf().multiplySelf(h)),t=d}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(n.fill(t,"evenodd"),this.pendingEOFill=!1):n.fill(t)),l&&n.restore(),e&&this.consumePath(t,c)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=VP}eoClip(){this.pendingClip=Hy}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const n=new Path2D,r=e.getTransform().invertSelf();for(const{transform:a,x:l,y:c,fontSize:h,path:d}of t)n.addPath(d,new DOMMatrix(a).preMultiplySelf(r).translate(l,c).scale(h,-h));e.clip(n),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const n=this.commonObjs.get(t),r=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=n.fontMatrix||Hh,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Ct("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const a=n.loadedName||"sans-serif",l=n.systemFontInfo?.css||`"${a}", ${n.fallbackName}`;let c="normal";n.black?c="900":n.bold&&(c="bold");const h=n.italic?"italic":"normal";let d=e;e<Ny?d=Ny:e>Fy&&(d=Fy),this.current.fontSizeScale=e/d,this.ctx.font=`${h} ${c} ${d}px ${l}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#n(t,e,n){const r=new Path2D;return r.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),r}paintChar(t,e,n,r,a){const l=this.ctx,c=this.current,h=c.font,d=c.textRenderingMode,f=c.fontSize/c.fontSizeScale,m=d&Le.FILL_STROKE_MASK,g=!!(d&Le.ADD_TO_PATH_FLAG),w=c.patternFill&&!h.missingFile,b=c.patternStroke&&!h.missingFile;let x;if((h.disableFontFace||g||w||b)&&(x=h.getPathGenerator(this.commonObjs,t)),h.disableFontFace||w||b){l.save(),l.translate(e,n),l.scale(f,-f);let S;if((m===Le.FILL||m===Le.FILL_STROKE)&&(r?(S=l.getTransform(),l.setTransform(...r),l.fill(this.#n(x,S,r))):l.fill(x)),m===Le.STROKE||m===Le.FILL_STROKE)if(a){S||=l.getTransform(),l.setTransform(...a);const{a:E,b:_,c:C,d:R}=S,k=pt.inverseTransform(a),N=pt.transform([E,_,C,R,0,0],k);pt.singularValueDecompose2dScale(N,en),l.lineWidth*=Math.max(en[0],en[1])/f,l.stroke(this.#n(x,S,a))}else l.lineWidth/=f,l.stroke(x);l.restore()}else(m===Le.FILL||m===Le.FILL_STROKE)&&l.fillText(t,e,n),(m===Le.STROKE||m===Le.FILL_STROKE)&&l.strokeText(t,e,n);g&&(this.pendingTextPaths||=[]).push({transform:Kt(l),x:e,y:n,fontSize:f,path:x})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){n=!0;break}return Mt(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const r=e.fontSize;if(r===0)return;const a=this.ctx,l=e.fontSizeScale,c=e.charSpacing,h=e.wordSpacing,d=e.fontDirection,f=e.textHScale*d,m=t.length,g=n.vertical,w=g?1:-1,b=n.defaultVMetrics,x=r*e.fontMatrix[0],S=e.textRenderingMode===Le.FILL&&!n.disableFontFace&&!e.patternFill;a.save(),e.textMatrix&&a.transform(...e.textMatrix),a.translate(e.x,e.y+e.textRise),d>0?a.scale(f,-1):a.scale(f,1);let E,_;if(e.patternFill){a.save();const O=e.fillColor.getPattern(a,this,Nn(a),Te.FILL);E=Kt(a),a.restore(),a.fillStyle=O}if(e.patternStroke){a.save();const O=e.strokeColor.getPattern(a,this,Nn(a),Te.STROKE);_=Kt(a),a.restore(),a.strokeStyle=O}let C=e.lineWidth;const R=e.textMatrixScale;if(R===0||C===0){const O=e.textRenderingMode&Le.FILL_STROKE_MASK;(O===Le.STROKE||O===Le.FILL_STROKE)&&(C=this.getSinglePixelWidth())}else C/=R;if(l!==1&&(a.scale(l,l),C/=l),a.lineWidth=C,n.isInvalidPDFjsFont){const O=[];let L=0;for(const H of t)O.push(H.unicode),L+=H.width;a.fillText(O.join(""),0,0),e.x+=L*x*f,a.restore(),this.compose();return}let k=0,N;for(N=0;N<m;++N){const O=t[N];if(typeof O=="number"){k+=w*O*r/1e3;continue}let L=!1;const H=(O.isSpace?h:0)+c,W=O.fontChar,Y=O.accent;let ft,dt,nt=O.width;if(g){const G=O.vmetric||b,U=-(O.vmetric?G[1]:nt*.5)*x,B=G[2]*x;nt=G?-G[0]:nt,ft=U/l,dt=(k+B)/l}else ft=k/l,dt=0;if(n.remeasure&&nt>0){const G=a.measureText(W).width*1e3/r*l;if(nt<G&&this.isFontSubpixelAAEnabled){const U=nt/G;L=!0,a.save(),a.scale(U,1),ft/=U}else nt!==G&&(ft+=(nt-G)/2e3*r/l)}if(this.contentVisible&&(O.isInFont||n.missingFile)){if(S&&!Y)a.fillText(W,ft,dt);else if(this.paintChar(W,ft,dt,E,_),Y){const G=ft+r*Y.offset.x/l,U=dt-r*Y.offset.y/l;this.paintChar(Y.fontChar,G,U,E,_)}}const xt=g?nt*x-H*d:nt*x+H*d;k+=xt,L&&a.restore()}g?e.y-=k:e.x+=k*f,a.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,r=n.font,a=n.fontSize,l=n.fontDirection,c=r.vertical?1:-1,h=n.charSpacing,d=n.wordSpacing,f=n.textHScale*l,m=n.fontMatrix||Hh,g=t.length,w=n.textRenderingMode===Le.INVISIBLE;let b,x,S,E;if(!(w||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),n.textMatrix&&e.transform(...n.textMatrix),e.translate(n.x,n.y+n.textRise),e.scale(f,l),b=0;b<g;++b){if(x=t[b],typeof x=="number"){E=c*x*a/1e3,this.ctx.translate(E,0),n.x+=E*f;continue}const _=(x.isSpace?d:0)+h,C=r.charProcOperatorList[x.operatorListId];C?this.contentVisible&&(this.save(),e.scale(a,a),e.transform(...m),this.executeOperatorList(C),this.restore()):Ct(`Type3 character "${x.operatorListId}" is not available.`);const R=[x.width,0];pt.applyTransform(R,m),S=R[0]*a+_,e.translate(S,0),n.x+=S*f}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,r,a,l){const c=new Path2D;c.rect(n,r,a-n,l-r),this.ctx.clip(c),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=this.baseTransform||Kt(this.ctx),r={createCanvasGraphics:a=>new tr(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Kd(t,this.ctx,r,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=IP(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,Nn(e),Te.SHADING);const r=Nn(e);if(r){const{width:a,height:l}=e.canvas,c=Qs.slice();pt.axialAlignedBoundingBox([0,0,a,l],r,c);const[h,d,f,m]=c;this.ctx.fillRect(h,d,f-h,m-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Bt("Should not call beginInlineImage")}beginImageData(){Bt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Kt(this.ctx),e)){pt.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[n,r,a,l]=e,c=new Path2D;c.rect(n,r,a-n,l-r),this.ctx.clip(c),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||zl("TODO: Support non-isolated groups."),t.knockout&&Ct("Knockout groups not supported.");const n=Kt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=Qs.slice();pt.axialAlignedBoundingBox(t.bbox,Kt(e),r);const a=[0,0,e.canvas.width,e.canvas.height];r=pt.intersect(r,a)||[0,0,0,0];const l=Math.floor(r[0]),c=Math.floor(r[1]),h=Math.max(Math.ceil(r[2])-l,1),d=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,h,d]);let f="groupAt"+this.groupLevel;t.smask&&(f+="_smask_"+this.smaskCounter++%2);const m=this.cachedCanvases.getCanvas(f,h,d),g=m.context;g.translate(-l,-c),g.transform(...n);let w=new Path2D;const[b,x,S,E]=t.bbox;if(w.rect(b,x,S-b,E-x),t.matrix){const _=new Path2D;_.addPath(w,new DOMMatrix(t.matrix)),w=_}g.clip(w),t.smask?this.smaskStack.push({canvas:m.canvas,context:g,offsetX:l,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(l,c),e.save()),io(e,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Kt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const a=Qs.slice();pt.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],r,a),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(t,e,n,r,a){if(this.#t(),pl(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const l=e[2]-e[0],c=e[3]-e[1];if(a&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=l,e[3]=c,pt.singularValueDecompose2dScale(Kt(this.ctx),en);const{viewportScale:h}=this,d=Math.ceil(l*this.outputScaleX*h),f=Math.ceil(c*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:m,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(t,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(en[0],0,0,-en[1],0,c*en[1]),pl(this.ctx)}else{pl(this.ctx),this.endPath();const h=new Path2D;h.rect(e[0],e[1],l,c),this.ctx.clip(h)}}this.current=new jy(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,r=this._createMaskCanvas(t),a=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,r=0,a,l){if(!this.contentVisible)return;t=this.getObject(t.data,t);const c=this.ctx;c.save();const h=Kt(c);c.transform(e,n,r,a,0,0);const d=this._createMaskCanvas(t);c.setTransform(1,0,0,1,d.offsetX-h[4],d.offsetY-h[5]);for(let f=0,m=l.length;f<m;f+=2){const g=pt.transform(h,[e,n,r,a,l[f],l[f+1]]);c.drawImage(d.canvas,g[4],g[5])}c.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const a of t){const{data:l,width:c,height:h,transform:d}=a,f=this.cachedCanvases.getCanvas("maskCanvas",c,h),m=f.context;m.save();const g=this.getObject(l,a);Vy(m,g),m.globalCompositeOperation="source-in",m.fillStyle=r?n.getPattern(m,this,Nn(e),Te.FILL):n,m.fillRect(0,0,c,h),m.restore(),e.save(),e.transform(...d),e.scale(1,-1),fl(e,f.canvas,0,0,c,h,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){Ct("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,r){if(!this.contentVisible)return;const a=this.getObject(t);if(!a){Ct("Dependent image isn't ready yet");return}const l=a.width,c=a.height,h=[];for(let d=0,f=r.length;d<f;d+=2)h.push({transform:[e,0,0,n,r[d],r[d+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(a,h)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:r}=t,a=this.cachedCanvases.getCanvas("inlineImage",n,r),l=a.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",a.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,r=this.ctx;this.save();const{filter:a}=r;a!=="none"&&a!==""&&(r.filter="none"),r.scale(1/e,-1/n);let l;if(t.bitmap)l=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)l=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",e,n).context;By(d,t),l=this.applyTransferMapsToCanvas(d)}const c=this._scaleImage(l,Nn(r));r.imageSmoothingEnabled=zy(Kt(r),t.interpolate),fl(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const a=t.width,l=t.height,h=this.cachedCanvases.getCanvas("inlineImage",a,l).context;By(h,t),r=this.applyTransferMapsToCanvas(h)}for(const a of e)n.save(),n.transform(...a.transform),n.scale(1,-1),fl(n,r,a.x,a.y,a.w,a.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(n||(this.pendingClip===Hy?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Kt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:r,d:a}=this.ctx.getTransform();let l,c;if(n===0&&r===0){const h=Math.abs(e),d=Math.abs(a);if(h===d)if(t===0)l=c=1/h;else{const f=h*t;l=c=f<1?1/f:1}else if(t===0)l=1/h,c=1/d;else{const f=h*t,m=d*t;l=f<1?1/f:1,c=m<1?1/m:1}}else{const h=Math.abs(e*a-n*r),d=Math.hypot(e,n),f=Math.hypot(r,a);if(t===0)l=f/h,c=d/h;else{const m=t*h;l=f>m?f/m:1,c=d>m?d/m:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:r}}=this,[a,l]=this.getScaleForStroking();if(a===l){n.lineWidth=(r||1)*a,n.stroke(t);return}const c=n.getLineDash();e&&n.save(),n.scale(a,l),dh.a=1/a,dh.d=1/l;const h=new Path2D;if(h.addPath(t,dh),c.length>0){const d=Math.max(a,l);n.setLineDash(c.map(f=>f/d)),n.lineDashOffset/=d}n.lineWidth=r||1,n.stroke(h),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const i in Co)tr.prototype[i]!==void 0&&(tr.prototype[Co[i]]=tr.prototype[i]);class Ii{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class zP{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Us=Symbol("INTERNAL");class HP{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:e,intent:n,usage:r,rbGroups:a}){this.#t=!!(t&Ze.DISPLAY),this.#e=!!(t&Ze.PRINT),this.name=e,this.intent=n,this.usage=r,this.rbGroups=a}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,n=!1){t!==Us&&Bt("Internal method `_setVisible` called."),this.#n=n,this.#i=e}}class $P{#t=null;#e=new Map;#n=null;#i=null;constructor(t,e=Ze.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const n of t.groups)this.#e.set(n.id,new HP(e,n));if(t.baseState==="OFF")for(const n of this.#e.values())n._setVisible(Us,!1);for(const n of t.on)this.#e.get(n)._setVisible(Us,!0);for(const n of t.off)this.#e.get(n)._setVisible(Us,!1);this.#n=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let r=1;r<e;r++){const a=t[r];let l;if(Array.isArray(a))l=this.#r(a);else if(this.#e.has(a))l=this.#e.get(a).visible;else return Ct(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return zl("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(Ct(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return Ct(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return Ct(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return Ct(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return Ct(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return Ct(`Unknown optional content policy ${t.policy}.`),!0}return Ct(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){const r=this.#e.get(t);if(!r){Ct(`Optional content group not found: ${t}`);return}if(n&&e&&r.rbGroups.length)for(const a of r.rbGroups)for(const l of a)l!==t&&this.#e.get(l)?._setVisible(Us,!1,!0);r._setVisible(Us,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let n;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const a=this.#e.get(r);if(a)switch(n){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!a.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new _w;for(const[e,n]of this.#e)t.update(`${e}:${n.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class UP{constructor(t,{disableRange:e=!1,disableStream:n=!1}){he(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:a,progressiveDone:l,contentDispositionFilename:c}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=c,a?.length>0){const h=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,d)=>{this._onReceiveData({begin:h,chunk:d})}),t.addProgressListener((h,d)=>{this._onProgress({loaded:h,total:d})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(a){return a._begin!==t?!1:(a._enqueue(n),!0)});he(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){he(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new WP(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new GP(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class WP{constructor(t,e,n=!1,r=null){this._stream=t,this._done=n||!1,this._filename=$l(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class GP{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function XP(i){let t=!0,e=n("filename\\*","i").exec(i);if(e){e=e[1];let f=c(e);return f=unescape(f),f=h(f),f=d(f),a(f)}if(e=l(i),e){const f=d(e);return a(f)}if(e=n("filename","i").exec(i),e){e=e[1];let f=c(e);return f=d(f),a(f)}function n(f,m){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function r(f,m){if(f){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const g=new TextDecoder(f,{fatal:!0}),w=jo(m);m=g.decode(w),t=!1}catch{}}return m}function a(f){return t&&/[\x80-\xff]/.test(f)&&(f=r("utf-8",f),t&&(f=r("iso-8859-1",f))),f}function l(f){const m=[];let g;const w=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=w.exec(f))!==null;){let[,x,S,E]=g;if(x=parseInt(x,10),x in m){if(x===0)break;continue}m[x]=[S,E]}const b=[];for(let x=0;x<m.length&&x in m;++x){let[S,E]=m[x];E=c(E),S&&(E=unescape(E),x===0&&(E=h(E))),b.push(E)}return b.join("")}function c(f){if(f.startsWith('"')){const m=f.slice(1).split('\\"');for(let g=0;g<m.length;++g){const w=m[g].indexOf('"');w!==-1&&(m[g]=m[g].slice(0,w),m.length=g+1),m[g]=m[g].replaceAll(/\\(.)/g,"$1")}f=m.join('"')}return f}function h(f){const m=f.indexOf("'");if(m===-1)return f;const g=f.slice(0,m),b=f.slice(m+1).replace(/^[^']*'/,"");return r(g,b)}function d(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,g,w,b){if(w==="q"||w==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,S){return String.fromCharCode(parseInt(S,16))}),r(g,b);try{b=atob(b)}catch{}return r(g,b)})}return""}function Dw(i,t){const e=new Headers;if(!i||!t||typeof t!="object")return e;for(const n in t){const r=t[n];r!==void 0&&e.append(n,r)}return e}function Ul(i){return URL.parse(i)?.origin??null}function Nw({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(i.get("Content-Length"),10);return!Number.isInteger(a)||(r.suggestedLength=a,a<=2*e)||n||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Fw(i){const t=i.get("Content-Disposition");if(t){let e=XP(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if($l(e))return e}return null}function $o(i,t){return new _o(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i,i===404||i===0&&t.startsWith("file:"))}function Ow(i){return i===200||i===206}function jw(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Bw(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Ct(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class KP{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Dw(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return he(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new qP(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new YP(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class qP{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),r=e.url;fetch(r,jw(n,this._withCredentials,this._abortController)).then(a=>{if(t._responseOrigin=Ul(a.url),!Ow(a.status))throw $o(a.status,r);this._reader=a.body.getReader(),this._headersCapability.resolve();const l=a.headers,{allowRangeRequests:c,suggestedLength:h}=Nw({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=h||this._contentLength,this._filename=Fw(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ai("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Bw(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class YP{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const a=new Headers(t.headers);a.append("Range",`bytes=${e}-${n-1}`);const l=r.url;fetch(l,jw(a,this._withCredentials,this._abortController)).then(c=>{const h=Ul(c.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!Ow(c.status))throw $o(c.status,l);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Bw(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const fh=200,ph=206;function QP(i){const t=i.response;return typeof t!="string"?t:jo(t).buffer}class JP{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Dw(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[a,l]of this.headers)e.setRequestHeader(a,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=ph):r.expectedStatus=fh,e.responseType="arraybuffer",he(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){const n=this.pendingRequests[t];n&&n.onProgress?.(e)}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){n.onError(r.status);return}const a=r.status||fh;if(!(a===fh&&n.expectedStatus===ph)&&a!==n.expectedStatus){n.onError(r.status);return}const c=QP(r);if(a===ph){const h=r.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);d?n.onDone({begin:parseInt(d[1],10),chunk:c}):(Ct('Missing or invalid "Content-Range" header.'),n.onError(0))}else c?n.onDone({begin:0,chunk:c}):n.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class ZP{constructor(t){this._source=t,this._manager=new JP(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return he(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new tR(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new eR(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class tR{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Ul(e.responseURL);const n=e.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[h,...d]=c.split(": ");return[h,d.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:l}=Nw({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=Fw(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=$o(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class eR{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Ul(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=$o(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const nR=/^[a-z][a-z0-9\-+.]+:/i;function iR(i){if(nR.test(i))return new URL(i);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(i))}class sR{constructor(t){this.source=t,this.url=iR(t.url),he(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return he(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new rR(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new oR(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class rR{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=$o(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ai("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class oR{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const so=Symbol("INITIAL_DATA");class Vw{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:so}}get(t,e=null){if(e){const r=this.#e(t);return r.promise.then(()=>e(r.data)),null}const n=this.#t[t];if(!n||n.data===so)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=this.#t[t];return!!e&&e.data!==so}delete(t){const e=this.#t[t];return!e||e.data===so?!1:(delete this.#t[t],!0)}resolve(t,e=null){const n=this.#e(t);n.data=e,n.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==so&&(yield[t,e])}}}const aR=1e5,$y=30;let To=class dn{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#o=0;#a=0;#h=null;#l=null;#d=0;#c=0;#f=Object.create(null);#p=[];#m=null;#u=[];#g=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#x=new WeakMap;static#A=null;static#C=new Set;constructor({textContentSource:t,container:e,viewport:n}){if(t instanceof ReadableStream)this.#m=t;else if(typeof t=="object")this.#m=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#c=n.scale*Tn.pixelRatio,this.#d=n.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:a,pageX:l,pageY:c}=n.rawDims;this.#y=[1,0,0,-1,-l,c+a],this.#a=r,this.#o=a,dn.#M(),Fi(e,n),this.#t.promise.finally(()=>{dn.#C.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Ae.platform;return Mt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#h.read().then(({value:e,done:n})=>{if(n){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#T(e.items),t()},this.#t.reject)};return this.#h=this.#m.getReader(),dn.#C.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const n=t.scale*Tn.pixelRatio,r=t.rotation;if(r!==this.#d&&(e?.(),this.#d=r,Fi(this.#l,{rotation:r})),n!==this.#c){e?.(),this.#c=n;const a={div:null,properties:null,ctx:dn.#k(this.#r)};for(const l of this.#u)a.properties=this.#g.get(l),a.div=l,this.#S(a)}}cancel(){const t=new ai("TextLayer task cancelled.");this.#h?.cancel(t).catch(()=>{}),this.#h=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#p}#T(t){if(this.#n)return;this.#s.ctx??=dn.#k(this.#r);const e=this.#u,n=this.#p;for(const r of t){if(e.length>aR){Ct("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const a=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id!==null&&this.#e.setAttribute("id",`${r.id}`),a.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}n.push(r.str),this.#P(r)}}#P(t){const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const r=pt.transform(this.#y,t.transform);let a=Math.atan2(r[1],r[0]);const l=this.#f[t.fontName];l.vertical&&(a+=Math.PI/2);let c=this.#i&&l.fontSubstitution||l.fontFamily;c=dn.fontFamilyMap.get(c)||c;const h=Math.hypot(r[2],r[3]),d=h*dn.#L(c,l,this.#r);let f,m;a===0?(f=r[4],m=r[5]-d):(f=r[4]+d*Math.sin(a),m=r[5]-d*Math.cos(a));const g="calc(var(--total-scale-factor) *",w=e.style;this.#e===this.#l?(w.left=`${(100*f/this.#a).toFixed(2)}%`,w.top=`${(100*m/this.#o).toFixed(2)}%`):(w.left=`${g}${f.toFixed(2)}px)`,w.top=`${g}${m.toFixed(2)}px)`),w.fontSize=`${g}${(dn.#A*h).toFixed(2)}px)`,w.fontFamily=c,n.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#i&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),a!==0&&(n.angle=a*(180/Math.PI));let b=!1;if(t.str.length>1)b=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const x=Math.abs(t.transform[0]),S=Math.abs(t.transform[3]);x!==S&&Math.max(x,S)/Math.min(x,S)>1.5&&(b=!0)}if(b&&(n.canvasWidth=l.vertical?t.height:t.width),this.#g.set(e,n),this.#s.div=e,this.#s.properties=n,this.#S(this.#s),n.hasText&&this.#e.append(e),n.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this.#e.append(x)}}#S(t){const{div:e,properties:n,ctx:r}=t,{style:a}=e;let l="";if(dn.#A>1&&(l=`scale(${1/dn.#A})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=a,{canvasWidth:h,fontSize:d}=n;dn.#_(r,d*this.#c,c);const{width:f}=r.measureText(e.textContent);f>0&&(l=`scaleX(${h*this.#c/f}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(a.transform=l)}static cleanup(){if(!(this.#C.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#k(t=null){let e=this.#b.get(t||="");if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,e),this.#x.set(e,{size:0,family:""})}return e}static#_(t,e,n){const r=this.#x.get(t);e===r.size&&n===r.family||(t.font=`${e}px ${n}`,r.size=e,r.family=n)}static#M(){if(this.#A!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#A=t.getBoundingClientRect().height,t.remove()}static#L(t,e,n){const r=this.#v.get(t);if(r)return r;const a=this.#k(n);a.canvas.width=a.canvas.height=$y,this.#_(a,$y,t);const l=a.measureText(""),c=l.fontBoundingBoxAscent,h=Math.abs(l.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let d=.8;return c?d=c/(c+h):(Ae.platform.isFirefox&&Ct("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?d=e.ascent:e.descent&&(d=1+e.descent)),this.#v.set(t,d),d}};class ko{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function r(a){if(!a)return;let l=null;const c=a.name;if(c==="#text")l=a.value;else if(ko.shouldBuildText(c))a?.attributes?.textContent?l=a.attributes.textContent:a.value&&(l=a.value);else return;if(l!==null&&e.push({str:l}),!!a.children)for(const h of a.children)r(h)}return r(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const lR=100;function qd(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new Yd,{docId:e}=t,n=i.url?vP(i.url):null,r=i.data?wP(i.data):null,a=i.httpHeaders||null,l=i.withCredentials===!0,c=i.password??null,h=i.range instanceof Qd?i.range:null,d=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:2**16;let f=i.worker instanceof xe?i.worker:null;const m=i.verbosity,g=typeof i.docBaseUrl=="string"&&!Vo(i.docBaseUrl)?i.docBaseUrl:null,w=hl(i.cMapUrl),b=i.cMapPacked!==!1,x=i.CMapReaderFactory||(je?_P:My),S=hl(i.iccUrl),E=hl(i.standardFontDataUrl),_=i.StandardFontDataFactory||(je?TP:Ly),C=hl(i.wasmUrl),R=i.WasmFactory||(je?kP:Iy),k=i.stopAtErrors!==!0,N=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,O=i.isEvalSupported!==!1,L=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!je,H=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!je&&(Ae.platform.isFirefox||!globalThis.chrome),W=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,Y=typeof i.disableFontFace=="boolean"?i.disableFontFace:je,ft=i.fontExtraProperties===!0,dt=i.enableXfa===!0,nt=i.ownerDocument||globalThis.document,xt=i.disableRange===!0,G=i.disableStream===!0,U=i.disableAutoFetch===!0,B=i.pdfBug===!0,tt=i.CanvasFactory||(je?CP:AP),Q=i.FilterFactory||(je?EP:SP),D=i.enableHWA===!0,$=i.useWasm!==!1,Z=h?h.length:i.length??NaN,st=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!je&&!Y,mt=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(x===My&&_===Ly&&R===Iy&&w&&E&&C&&lo(w,document.baseURI)&&lo(E,document.baseURI)&&lo(C,document.baseURI)),wt=null;tP(m);const et={canvasFactory:new tt({ownerDocument:nt,enableHWA:D}),filterFactory:new Q({docId:e,ownerDocument:nt}),cMapReaderFactory:mt?null:new x({baseUrl:w,isCompressed:b}),standardFontDataFactory:mt?null:new _({baseUrl:E}),wasmFactory:mt?null:new R({baseUrl:C})};f||(f=xe.create({verbosity:m,port:Ii.workerPort}),t._worker=f);const _t={docId:e,apiVersion:"5.3.93",data:r,password:c,disableAutoFetch:U,rangeChunkSize:d,length:Z,docBaseUrl:g,enableXfa:dt,evaluatorOptions:{maxImageSize:N,disableFontFace:Y,ignoreErrors:k,isEvalSupported:O,isOffscreenCanvasSupported:L,isImageDecoderSupported:H,canvasMaxAreaInBytes:W,fontExtraProperties:ft,useSystemFonts:st,useWasm:$,useWorkerFetch:mt,cMapUrl:w,iccUrl:S,standardFontDataUrl:E,wasmUrl:C}},kt={ownerDocument:nt,pdfBug:B,styleElement:wt,loadingParams:{disableAutoFetch:U,enableXfa:dt}};return f.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Tt=f.messageHandler.sendWithPromise("GetDocRequest",_t,r?[r.buffer]:null);let ge;if(h)ge=new UP(h,{disableRange:xt,disableStream:G});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Se=lo(n)?KP:je?sR:ZP;ge=new Se({url:n,length:Z,httpHeaders:a,withCredentials:l,rangeChunkSize:d,disableRange:xt,disableStream:G})}return Tt.then(Se=>{if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Lt=new co(e,Se,f.port),jt=new hR(Lt,t,ge,kt,et);t._transport=jt,Lt.send("Ready",null)})}).catch(t._capability.reject),t}class Yd{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Yd.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let Qd=class{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#r=[];constructor(t,e,n=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const n of this.#r)n(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const n of this.#i)n(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#n)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Bt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class cR{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Mt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class uR{#t=!1;constructor(t,e,n,r=!1){this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=r?new ky:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new Vw,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:a=!1}={}){return new Bo({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:a})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Mt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:r=Vn.ENABLE,transform:a=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:h=null,pageColors:d=null,printAnnotationStorage:f=null,isEditing:m=!1}){this._stats?.time("Overall");const g=this._transport.getRenderingIntent(n,r,f,m),{renderingIntent:w,cacheKey:b}=g;this.#t=!1,c||=this._transport.getOptionalContentConfig(w);let x=this._intentStates.get(b);x||(x=Object.create(null),this._intentStates.set(b,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const S=!!(w&Ze.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(g));const E=R=>{x.renderTasks.delete(_),S&&(this.#t=!0),this.#e(),R?(_.capability.reject(R),this._abortOperatorList({intentState:x,reason:R instanceof Error?R:new Error(R)})):_.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},_=new Js({callback:E,params:{canvasContext:t,viewport:e,transform:a,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:d});(x.renderTasks||=new Set).add(_);const C=_.task;return Promise.all([x.displayReadyCapability.promise,c]).then(([R,k])=>{if(this.destroyed){E();return}if(this._stats?.time("Rendering"),!(k.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");_.initializeGraphics({transparency:R,optionalContentConfig:k}),_.operatorListChanged()}).catch(E),C}getOperatorList({intent:t="display",annotationMode:e=Vn.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){function a(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(h))}const l=this._transport.getRenderingIntent(t,e,n,r,!0);let c=this._intentStates.get(l.cacheKey);c||(c=Object.create(null),this._intentStates.set(l.cacheKey,c));let h;return c.opListReadCapability||(h=Object.create(null),h.operatorListChanged=a,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(h),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>ko.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,r){function a(){l.read().then(function({value:h,done:d}){if(d){n(c);return}c.lang??=h.lang,Object.assign(c.styles,h.styles),c.items.push(...h.items),a()},r)}const l=e.getReader(),c={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new ky),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const n=this._intentStates.get(e);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let n=0,r=t.length;n<r;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:r}){const{map:a,transfer:l}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a,modifiedIds:r},l).getReader(),d=this._intentStates.get(e);d.streamReader=h;const f=()=>{h.read().then(({value:m,done:g})=>{if(g){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,d),f())},m=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const g of d.renderTasks)g.operatorListChanged();this.#e()}if(d.displayReadyCapability)d.displayReadyCapability.reject(m);else if(d.opListReadCapability)d.opListReadCapability.reject(m);else throw m}})};f()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Hl){let r=lR;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new ai(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,a]of this._intentStates)if(a===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}class xe{#t=Promise.withResolvers();#e=null;#n=null;#i=null;static#r=0;static#s=!1;static#o=new WeakMap;static{je&&(this.#s=!0,Ii.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!n?.origin||n.origin==="null")return!1;const r=new URL(e,n);return n.origin===r.origin},this._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},this.fromPort=t=>{if(uP("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.create(t)}}constructor({name:t=null,port:e=null,verbosity:n=eP()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(xe.#o.has(e))throw new Error("Cannot use more than one PDFWorker per port.");xe.#o.set(e,this),this.#h(e)}else this.#l()}get promise(){return this.#t.promise}#a(){this.#t.resolve(),this.#e.send("configure",{verbosity:this.verbosity})}get port(){return this.#n}get messageHandler(){return this.#e}#h(t){this.#n=t,this.#e=new co("main","worker",t),this.#e.on("ready",()=>{}),this.#a()}#l(){if(xe.#s||xe.#c){this.#d();return}let{workerSrc:t}=xe;try{xe._isSameOrigin(window.location,t)||(t=xe._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new co("main","worker",e),r=()=>{a.abort(),n.destroy(),e.terminate(),this.destroyed?this.#t.reject(new Error("Worker was destroyed")):this.#d()},a=new AbortController;e.addEventListener("error",()=>{this.#i||r()},{signal:a.signal}),n.on("test",c=>{if(a.abort(),this.destroyed||!c){r();return}this.#e=n,this.#n=e,this.#i=e,this.#a()}),n.on("ready",c=>{if(a.abort(),this.destroyed){r();return}try{l()}catch{this.#d()}});const l=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};l();return}catch{zl("The worker has been disabled.")}this.#d()}#d(){xe.#s||(Ct("Setting up fake worker."),xe.#s=!0),xe._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this.#t.reject(new Error("Worker was destroyed"));return}const e=new xP;this.#n=e;const n=`fake${xe.#r++}`,r=new co(n+"_worker",n,e);t.setup(r,e),this.#e=new co(n,n+"_worker",e),this.#a()}).catch(t=>{this.#t.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this.#i?.terminate(),this.#i=null,xe.#o.delete(this.#n),this.#n=null,this.#e?.destroy(),this.#e=null}static create(t){const e=this.#o.get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new xe(t)}static get workerSrc(){if(Ii.workerSrc)return Ii.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#c(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return Mt(this,"_setupFakeWorkerGlobal",(async()=>this.#c?this.#c:(await import(this.workerSrc)).WorkerMessageHandler)())}}class hR{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#r=null;constructor(t,e,n,r,a){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Vw,this.fontLoader=new gP({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(t,e=null){const n=this.#t.get(t);if(n)return n;const r=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,r),r}get annotationStorage(){return Mt(this,"annotationStorage",new Wd)}getRenderingIntent(t,e=Vn.ENABLE,n=null,r=!1,a=!1){let l=Ze.DISPLAY,c=$h;switch(t){case"any":l=Ze.ANY;break;case"display":break;case"print":l=Ze.PRINT;break;default:Ct(`getRenderingIntent - invalid intent: ${t}`)}const h=l&Ze.PRINT&&n instanceof Tw?n:this.annotationStorage;switch(e){case Vn.DISABLE:l+=Ze.ANNOTATIONS_DISABLE;break;case Vn.ENABLE:break;case Vn.ENABLE_FORMS:l+=Ze.ANNOTATIONS_FORMS;break;case Vn.ENABLE_STORAGE:l+=Ze.ANNOTATIONS_STORAGE,c=h.serializable;break;default:Ct(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(l+=Ze.IS_EDITING),a&&(l+=Ze.OPLIST);const{ids:d,hash:f}=h.modifiedIds,m=[l,c.hash,f];return{renderingIntent:l,cacheKey:m.join("_"),annotationStorageSerializable:c,modifiedIds:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of this.#e.values())t.push(n._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),To.cleanup(),this._networkStream?.cancelAllRequests(new ai("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,r)=>{he(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},r.onPull=()=>{this._fullReader.read().then(function({value:a,done:l}){if(l){r.close();return}he(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{this._fullReader.cancel(a),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:a,contentLength:l}=this._fullReader;return(!r||!a)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{e.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:r,isRangeSupported:a,contentLength:l}}),t.on("GetRangeReader",(n,r)=>{he(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){r.close();return}r.onPull=()=>{a.read().then(function({value:l,done:c}){if(c){r.close();return}he(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{a.cancel(l),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new cR(n,this))}),t.on("DocException",n=>{e._capability.reject(Ge(n))}),t.on("PasswordRequest",n=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw Ge(n);const r=a=>{a instanceof Error?this.#r.reject(a):this.#r.resolve({password:a})};e.onPassword(r,n.code)}catch(r){this.#r.reject(r)}return this.#r.promise}),t.on("DataLoaded",n=>{e.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;this.#e.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,r,a])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in a){const d=a.error;Ct(`Error during font loading: ${d}`),this.commonObjs.resolve(n,d);break}const l=this._params.pdfBug&&globalThis.FontInspector?.enabled?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,c=new yP(a,l);this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(n,c)});break;case"CopyLocalImage":const{imageRef:h}=a;he(h,"The imageRef must be defined.");for(const d of this.#e.values())for(const[,f]of d.objs)if(f?.ref===h)return f.dataLen?(this.commonObjs.resolve(n,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,a);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([n,r,a,l])=>{if(this.destroyed)return;const c=this.#e.get(r);if(!c.objs.has(n)){if(c._intentStates.size===0){l?.bitmap?.close();return}switch(a){case"Image":case"Pattern":c.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",n=>{this.destroyed||e.onProgress?.({loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Ct("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=this.#n.get(e);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#i.set(a.refStr,t);const l=new uR(e,a,this,this._params.pdfBug);return this.#e.set(e,l),l});return this.#n.set(e,r),r}getPageIndex(t){return Uh(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(e=>new $P(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new zP(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),To.cleanup()}}cachedPageNumber(t){if(!Uh(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(e)??null}}class dR{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class Js{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:n,commonObjs:r,annotationCanvasMap:a,operatorList:l,pageIndex:c,canvasFactory:h,filterFactory:d,useRequestAnimationFrame:f=!1,pdfBug:m=!1,pageColors:g=null}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=c,this.canvasFactory=h,this.filterFactory=d,this._pdfBug=m,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new dR(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(Js.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Js.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:r,transform:a,background:l}=this.params;this.gfx=new tr(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:r,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Js.#e.delete(this._canvas),t||=new Hl(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Js.#e.delete(this._canvas),this.callback())))}}const zw="5.3.93",Hw="cbeef3233";function Uy(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function ro(i){return Math.max(0,Math.min(255,255*i))}class Wy{static CMYK_G([t,e,n,r]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=ro(t),[t,t,t]}static G_HTML([t]){const e=Uy(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(ro)}static RGB_HTML(t){return`#${t.map(Uy).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,n+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,n,r]){return[ro(1-Math.min(1,t+r)),ro(1-Math.min(1,n+r)),ro(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const r=1-t,a=1-e,l=1-n,c=Math.min(r,a,l);return["CMYK",r,a,l,c]}}class fR{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Bt("Abstract method `_createSVG` called.")}}class Po extends fR{_createSVG(t){return document.createElementNS(ni,t)}}class Jd{static setupStorage(t,e,n,r,a){const l=r.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),a==="print")break;t.addEventListener("input",c=>{r.setValue(e,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",c=>{r.setValue(e,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),a==="print")break;t.addEventListener("input",c=>{r.setValue(e,{value:c.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const c of n.children)c.attributes.value===l.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const h=c.target.options,d=h.selectedIndex===-1?"":h[h.selectedIndex].value;r.setValue(e,{value:d})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:r,linkService:a}){const{attributes:l}=e,c=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${r}`);for(const[h,d]of Object.entries(l))if(d!=null)switch(h){case"class":d.length&&t.setAttribute(h,d.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",d);break;case"style":Object.assign(t.style,d);break;case"textContent":t.textContent=d;break;default:(!c||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,d)}c&&a.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){const e=t.annotationStorage,n=t.linkService,r=t.xfaHtml,a=t.intent||"display",l=document.createElement(r.name);r.attributes&&this.setAttributes({html:l,element:r,intent:a,linkService:n});const c=a!=="richText",h=t.div;if(h.append(l),t.viewport){const m=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=m}c&&h.setAttribute("class","xfaLayer xfaFont");const d=[];if(r.children.length===0){if(r.value){const m=document.createTextNode(r.value);l.append(m),c&&ko.shouldBuildText(r.name)&&d.push(m)}return{textDivs:d}}const f=[[r,-1,l]];for(;f.length>0;){const[m,g,w]=f.at(-1);if(g+1===m.children.length){f.pop();continue}const b=m.children[++f.at(-1)[1]];if(b===null)continue;const{name:x}=b;if(x==="#text"){const E=document.createTextNode(b.value);d.push(E),w.append(E);continue}const S=b?.attributes?.xmlns?document.createElementNS(b.attributes.xmlns,x):document.createElement(x);if(w.append(S),b.attributes&&this.setAttributes({html:S,element:b,storage:e,intent:a,linkService:n}),b.children?.length>0)f.push([b,-1,S]);else if(b.value){const E=document.createTextNode(b.value);c&&ko.shouldBuildText(x)&&d.push(E),S.append(E)}}for(const m of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:d}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const pR=9,ds=new WeakSet;class Gy{static create(t){switch(t.data.annotationType){case ie.LINK:return new $w(t);case ie.TEXT:return new mR(t);case ie.WIDGET:switch(t.data.fieldType){case"Tx":return new gR(t);case"Btn":return t.data.radioButton?new Uw(t):t.data.checkBox?new vR(t):new wR(t);case"Ch":return new bR(t);case"Sig":return new yR(t)}return new gs(t);case ie.POPUP:return new Gh(t);case ie.FREETEXT:return new Ww(t);case ie.LINE:return new AR(t);case ie.SQUARE:return new SR(t);case ie.CIRCLE:return new ER(t);case ie.POLYLINE:return new Gw(t);case ie.CARET:return new _R(t);case ie.INK:return new Zd(t);case ie.POLYGON:return new CR(t);case ie.HIGHLIGHT:return new Xw(t);case ie.UNDERLINE:return new TR(t);case ie.SQUIGGLY:return new kR(t);case ie.STRIKEOUT:return new PR(t);case ie.STAMP:return new Kw(t);case ie.FILEATTACHMENT:return new RR(t);default:return new ae(t)}}}class ae{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ae._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};const{rect:e}=t;e&&this.#i(e),this.#n?.popup.updateEdited(t)}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:e},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:l,pageX:c,pageY:h}}}}=this;n?.splice(0,4,...t),e.left=`${100*(t[0]-c)/a}%`,e.top=`${100*(l-t[3]+h)/l}%`,r===0?(e.width=`${100*(t[2]-t[0])/a}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(r)}_createContainer(t){const{data:e,parent:{page:n,viewport:r}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),this instanceof gs||(a.tabIndex=0);const{style:l}=a;if(l.zIndex=this.parent.zIndex++,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof Gh){const{rotation:x}=e;return!e.hasOwnCanvas&&x!==0&&this.setRotation(x,a),a}const{width:c,height:h}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const x=e.borderStyle.horizontalCornerRadius,S=e.borderStyle.verticalCornerRadius;if(x>0||S>0){const _=`calc(${x}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;l.borderRadius=_}else if(this instanceof Uw){const _=`calc(${c}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;l.borderRadius=_}switch(e.borderStyle.style){case $s.SOLID:l.borderStyle="solid";break;case $s.DASHED:l.borderStyle="dashed";break;case $s.BEVELED:Ct("Unimplemented border style: beveled");break;case $s.INSET:Ct("Unimplemented border style: inset");break;case $s.UNDERLINE:l.borderBottomStyle="solid";break}const E=e.borderColor||null;E?(this.#e=!0,l.borderColor=pt.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):l.borderWidth=0}const d=pt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:f,pageHeight:m,pageX:g,pageY:w}=r.rawDims;l.left=`${100*(d[0]-g)/f}%`,l.top=`${100*(d[1]-w)/m}%`;const{rotation:b}=e;return e.hasOwnCanvas||b===0?(l.width=`${100*c/f}%`,l.height=`${100*h/m}%`):this.setRotation(b,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:a,height:l}=this;t%180!==0&&([a,l]=[l,a]),e.style.width=`${100*a/n}%`,e.style.height=`${100*l/r}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,r)=>{const a=r.detail[e],l=a[0],c=a.slice(1);r.target.style[n]=Wy[`${l}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:Wy[`${l}_rgb`](c)})};return Mt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const r of Object.keys(e.detail))(t[r]||n[r])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[r,a]of Object.entries(e)){const l=n[r];if(l){const c={detail:{[r]:a},target:t};l(c),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,r,a]=this.data.rect.map(x=>Math.fround(x));if(t.length===8){const[x,S,E,_]=t.subarray(2,6);if(r===x&&a===S&&e===E&&n===_)return}const{style:l}=this.container;let c;if(this.#e){const{borderColor:x,borderWidth:S}=l;l.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const h=r-e,d=a-n,{svgFactory:f}=this,m=f.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const g=f.createElement("defs");m.append(g);const w=f.createElement("clipPath"),b=`clippath_${this.data.id}`;w.setAttribute("id",b),w.setAttribute("clipPathUnits","objectBoundingBox"),g.append(w);for(let x=2,S=t.length;x<S;x+=8){const E=t[x],_=t[x+1],C=t[x+2],R=t[x+3],k=f.createElement("rect"),N=(C-e)/h,O=(a-_)/d,L=(E-C)/h,H=(_-R)/d;k.setAttribute("x",N),k.setAttribute("y",O),k.setAttribute("width",L),k.setAttribute("height",H),w.append(k),c?.push(`<rect vector-effect="non-scaling-stroke" x="${N}" y="${O}" width="${L}" height="${H}"/>`)}this.#e&&(c.push("</g></svg>')"),l.backgroundImage=c.join("")),this.container.append(m),this.container.style.clipPath=`url(#${b})`}_createPopup(){const{data:t}=this,e=this.#n=new Gh({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},parent:this.parent,elements:[this]});this.parent.div.append(e.render())}render(){Bt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:a,id:l,exportValues:c}of r){if(a===-1||l===e)continue;const h=typeof c=="string"?c:null,d=document.querySelector(`[data-element-id="${l}"]`);if(d&&!ds.has(d)){Ct(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:h,domElement:d})}return n}for(const r of document.getElementsByName(t)){const{exportValue:a}=r,l=r.getAttribute("data-element-id");l!==e&&ds.has(r)&&n.push({id:l,exportValue:a,domElement:r})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class $w extends ae{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let r=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(n,t.action),r=!0):t.attachment?(this.#e(n,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(this.#n(n,t.setOCGState),r=!0):t.dest?(this._bindLink(n,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),r=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#t()}#e(t,e,n=null){t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,n),!1),this.#t()}#n(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(e.actions)){const a=n.get(r);a&&(t[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:r}}),!1))}t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){Ct('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{n?.();const{fields:r,refs:a,include:l}=e,c=[];if(r.length!==0||a.length!==0){const f=new Set(a);for(const m of r){const g=this._fieldObjects[m]||[];for(const{id:w}of g)f.add(w)}for(const m of Object.values(this._fieldObjects))for(const g of m)f.has(g.id)===l&&c.push(g)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const h=this.annotationStorage,d=[];for(const f of c){const{id:m}=f;switch(d.push(m),f.type){case"text":{const w=f.defaultValue||"";h.setValue(m,{value:w});break}case"checkbox":case"radiobutton":{const w=f.defaultValue===f.exportValues;h.setValue(m,{value:w});break}case"combobox":case"listbox":{const w=f.defaultValue||"";h.setValue(m,{value:w});break}default:continue}const g=document.querySelector(`[data-element-id="${m}"]`);if(g){if(!ds.has(g)){Ct(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}}),!1}}}class mR extends ae{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class gs extends ae{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ae.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,r,a){n.includes("mouse")?t.addEventListener(n,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(l)}})})}_setEventListeners(t,e,n,r){for(const[a,l]of n)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,a,l,r),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":pt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||pR,a=t.style;let l;const c=2,h=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-c),f=Math.round(d/(ah*r))||1,m=d/f;l=Math.min(r,h(m/ah))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-c);l=Math.min(r,h(d/ah))}a.fontSize=`calc(${l}px * var(--total-scale-factor))`,a.color=pt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class gR extends gs{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,r){const a=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),a.setValue(l.id,{[r]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const r=t.getValue(e,{value:this.data.fieldValue});let a=r.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=r.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=c??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",c??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),ds.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const d=this.data.dateFormat||this.data.timeFormat;d&&(n.title=d),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",m=>{t.setValue(e,{value:m.target.value}),this.setPropertyOnSiblings(n,"value",m.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",m=>{const g=this.data.defaultFieldValue??"";n.value=h.userValue=g,h.formattedValue=null});let f=m=>{const{formattedValue:g}=h;g!=null&&(m.target.value=g),m.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",g=>{if(h.focused)return;const{target:w}=g;h.userValue&&(w.value=h.userValue),h.lastCommittedValue=w.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const w={value(b){h.userValue=b.detail.value??"",t.setValue(e,{value:h.userValue.toString()}),b.target.value=h.userValue},formattedValue(b){const{formattedValue:x}=b.detail;h.formattedValue=x,x!=null&&b.target!==document.activeElement&&(b.target.value=x),t.setValue(e,{formattedValue:x})},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{const{charLimit:x}=b.detail,{target:S}=b;if(x===0){S.removeAttribute("maxLength");return}S.setAttribute("maxLength",x);let E=h.userValue;!E||E.length<=x||(E=E.slice(0,x),S.value=h.userValue=E,t.setValue(e,{value:E}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:1,selStart:S.selectionStart,selEnd:S.selectionEnd}}))}};this._dispatchEventFromSandbox(w,g)}),n.addEventListener("keydown",g=>{h.commitKey=1;let w=-1;if(g.key==="Escape"?w=0:g.key==="Enter"&&!this.data.multiLine?w=2:g.key==="Tab"&&(h.commitKey=3),w===-1)return;const{value:b}=g.target;h.lastCommittedValue!==b&&(h.lastCommittedValue=b,h.userValue=b,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:w,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const m=f;f=null,n.addEventListener("blur",g=>{if(!h.focused||!g.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{value:w}=g.target;h.userValue=w,h.lastCommittedValue!==w&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:h.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}),m(g)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",g=>{h.lastCommittedValue=null;const{data:w,target:b}=g,{value:x,selectionStart:S,selectionEnd:E}=b;let _=S,C=E;switch(g.inputType){case"deleteWordBackward":{const R=x.substring(0,S).match(/\w*[^\w]*$/);R&&(_-=R[0].length);break}case"deleteWordForward":{const R=x.substring(S).match(/^[^\w]*\w*/);R&&(C+=R[0].length);break}case"deleteContentBackward":S===E&&(_-=1);break;case"deleteContentForward":S===E&&(C+=1);break}g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,change:w||"",willCommit:!1,selStart:_,selEnd:C}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(f&&n.addEventListener("blur",f),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${g}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class yR extends gs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class vR extends gs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return ds.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,r&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=0,a.addEventListener("change",l=>{const{name:c,checked:h}=l.target;for(const d of this._getElementsByName(c,n)){const f=h&&d.exportValue===e.exportValue;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}t.setValue(n,{value:h})}),a.addEventListener("resetform",l=>{const c=e.defaultFieldValue||"Off";l.target.checked=c===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",l=>{const c={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Uw extends gs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(n,{value:r})),r)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const a=document.createElement("input");if(ds.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,r&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",l=>{const{name:c,checked:h}=l.target;for(const d of this._getElementsByName(c,n))t.setValue(d.id,{value:!1});t.setValue(n,{value:h})}),a.addEventListener("resetform",l=>{const c=e.defaultFieldValue;l.target.checked=c!=null&&c===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;a.addEventListener("updatefromsandbox",c=>{const h={value:d=>{const f=l===d.detail.value;for(const m of this._getElementsByName(d.target.name)){const g=f&&m.id===n;m.domElement&&(m.domElement.checked=g),t.setValue(m.id,{value:g})}}};this._dispatchEventFromSandbox(h,c)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class wR extends $w{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class bR extends gs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");ds.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",f=>{const m=this.data.defaultFieldValue;for(const g of r.options)g.selected=g.value===m});for(const f of this.data.options){const m=document.createElement("option");m.textContent=f.displayValue,m.value=f.exportValue,n.value.includes(f.exportValue)&&(m.setAttribute("selected",!0),a=!1),r.append(m)}let l=null;if(a){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),r.prepend(f),l=()=>{f.remove(),r.removeEventListener("input",l),l=null},r.addEventListener("input",l)}const c=f=>{const m=f?"value":"textContent",{options:g,multiple:w}=r;return w?Array.prototype.filter.call(g,b=>b.selected).map(b=>b[m]):g.selectedIndex===-1?null:g[g.selectedIndex][m]};let h=c(!1);const d=f=>{const m=f.target.options;return Array.prototype.map.call(m,g=>({displayValue:g.textContent,exportValue:g.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",f=>{const m={value(g){l?.();const w=g.detail.value,b=new Set(Array.isArray(w)?w:[w]);for(const x of r.options)x.selected=b.has(x.value);t.setValue(e,{value:c(!0)}),h=c(!1)},multipleSelection(g){r.multiple=!0},remove(g){const w=r.options,b=g.detail.remove;w[b].selected=!1,r.remove(b),w.length>0&&Array.prototype.findIndex.call(w,S=>S.selected)===-1&&(w[0].selected=!0),t.setValue(e,{value:c(!0),items:d(g)}),h=c(!1)},clear(g){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),h=c(!1)},insert(g){const{index:w,displayValue:b,exportValue:x}=g.detail.insert,S=r.children[w],E=document.createElement("option");E.textContent=b,E.value=x,S?S.before(E):r.append(E),t.setValue(e,{value:c(!0),items:d(g)}),h=c(!1)},items(g){const{items:w}=g.detail;for(;r.length!==0;)r.remove(0);for(const b of w){const{displayValue:x,exportValue:S}=b,E=document.createElement("option");E.textContent=x,E.value=S,r.append(E)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:c(!0),items:d(g)}),h=c(!1)},indices(g){const w=new Set(g.detail.indices);for(const b of g.target.options)b.selected=w.has(b.index);t.setValue(e,{value:c(!0)}),h=c(!1)},editable(g){g.target.disabled=!g.detail.editable}};this._dispatchEventFromSandbox(m,f)}),r.addEventListener("input",f=>{const m=c(!0),g=c(!1);t.setValue(e,{value:m}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:g,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):r.addEventListener("input",function(f){t.setValue(e,{value:c(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Gh extends ae{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:ae._hasPopupData(e)}),this.elements=n,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=new xR({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",n.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(r=>`${Vd}${r}`).join(",")),this.container}}class xR{#t=this.#T.bind(this);#e=this.#_.bind(this);#n=this.#k.bind(this);#i=this.#S.bind(this);#r=null;#s=null;#o=null;#a=null;#h=null;#l=null;#d=null;#c=!1;#f=null;#p=null;#m=null;#u=null;#g=null;#y=null;#v=!1;constructor({container:t,color:e,elements:n,titleObj:r,modificationDate:a,contentsObj:l,richText:c,parent:h,rect:d,parentRect:f,open:m}){this.#s=t,this.#g=r,this.#o=l,this.#u=c,this.#l=h,this.#r=e,this.#m=d,this.#d=f,this.#h=n,this.#a=zd.toDateObject(a),this.trigger=n.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",this.#i),g.addEventListener("mouseenter",this.#n),g.addEventListener("mouseleave",this.#e),g.classList.add("popupTriggerArea");for(const g of n)g.container?.addEventListener("keydown",this.#t);this.#s.hidden=!0,m&&this.#S()}render(){if(this.#f)return;const t=this.#f=document.createElement("div");if(t.className="popup",this.#r){const a=t.style.outlineColor=pt.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=this.#g,t.append(e),this.#a){const a=document.createElement("time");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#a.valueOf()})),a.dateTime=this.#a.toISOString(),e.append(a)}const r=this.#b;if(r)Jd.render({xfaHtml:r,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(this.#o);t.append(a)}this.#s.append(t)}get#b(){const t=this.#u,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#u.html||null}get#x(){return this.#b?.attributes?.style?.fontSize||0}get#A(){return this.#b?.attributes?.style?.color||null}#C(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:this.#A,fontSize:this.#x?`calc(${this.#x}px * var(--total-scale-factor))`:""}};for(const a of t.split(`
`))e.push({name:"span",value:a,attributes:r});return n}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const r=t.split(/(?:\r\n?|\n)/);for(let a=0,l=r.length;a<l;++a){const c=r[a];n.append(document.createTextNode(c)),a<l-1&&n.append(document.createElement("br"))}return n}#T(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#c)&&this.#S()}updateEdited({rect:t,popupContent:e}){this.#y||={contentsObj:this.#o,richText:this.#u},t&&(this.#p=null),e&&(this.#u=this.#C(e),this.#o=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#y&&({contentsObj:this.#o,richText:this.#u}=this.#y,this.#y=null,this.#f?.remove(),this.#f=null,this.#p=null)}#P(){if(this.#p!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:r,pageY:a}}}=this.#l;let l=!!this.#d,c=l?this.#d:this.#m;for(const b of this.#h)if(!c||pt.intersect(b.data.rect,c)!==null){c=b.data.rect,l=!0;break}const h=pt.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),f=l?c[2]-c[0]+5:0,m=h[0]+f,g=h[1];this.#p=[100*(m-r)/e,100*(g-a)/n];const{style:w}=this.#s;w.left=`${this.#p[0]}%`,w.top=`${this.#p[1]}%`}#S(){this.#c=!this.#c,this.#c?(this.#k(),this.#s.addEventListener("click",this.#i),this.#s.addEventListener("keydown",this.#t)):(this.#_(),this.#s.removeEventListener("click",this.#i),this.#s.removeEventListener("keydown",this.#t))}#k(){this.#f||this.render(),this.isVisible?this.#c&&this.#s.classList.add("focused"):(this.#P(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#_(){this.#s.classList.remove("focused"),!(this.#c||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#v=this.isVisible,this.#v&&(this.#s.hidden=!0)}maybeShow(){this.#v&&(this.#f||this.#k(),this.#v=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class Ww extends ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Et.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class AR extends ae{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:n}=this,r=this.svgFactory.create(e,n,!0),a=this.#t=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class SR extends ae{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:n}=this,r=this.svgFactory.create(e,n,!0),a=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",e-a),l.setAttribute("height",n-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ER extends ae{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:n}=this,r=this.svgFactory.create(e,n,!0),a=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",e/2),l.setAttribute("cy",n/2),l.setAttribute("rx",e/2-a/2),l.setAttribute("ry",n/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Gw extends ae{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:n,popupRef:r},width:a,height:l}=this;if(!e)return this.container;const c=this.svgFactory.create(a,l,!0);let h=[];for(let f=0,m=e.length;f<m;f+=2){const g=e[f]-t[0],w=t[3]-e[f+1];h.push(`${g},${w}`)}h=h.join(" ");const d=this.#t=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",h),d.setAttribute("stroke-width",n.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class CR extends Gw{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class _R extends ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Zd extends ae{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Et.HIGHLIGHT:Et.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:n,borderStyle:r,popupRef:a}}=this,{transform:l,width:c,height:h}=this.#n(e,t),d=this.svgFactory.create(c,h,!0),f=this.#t=this.svgFactory.createElement("svg:g");d.append(f),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",l);for(let m=0,g=n.length;m<g;m++){const w=this.svgFactory.createElement(this.svgElementName);this.#e.push(w),w.setAttribute("points",n[m].join(",")),f.append(w)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:n,rect:r}=t,a=this.#t;if(e>=0&&a.setAttribute("stroke-width",e||1),n)for(let l=0,c=this.#e.length;l<c;l++)this.#e[l].setAttribute("points",n[l].join(","));if(r){const{transform:l,width:c,height:h}=this.#n(this.data.rotation,r);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${h}`),a.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Xw extends ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Et.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class TR extends ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class kR extends ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class PR extends ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class Kw extends ae{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Et.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class RR extends ae{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||e.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#e.bind(this)),this.#t=n;const{isMac:r}=Ae.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let tf=class qw{#t=null;#e=null;#n=new Map;#i=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:r,page:a,viewport:l,structTreeLayer:c}){this.div=t,this.#t=e,this.#e=n,this.#i=c||null,this.page=a,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return this.#n.size>0}async#r(t,e,n){const r=t.firstChild||t,a=r.id=`${Vd}${e}`,l=await this.#i?.getAriaAttributes(a);if(l)for(const[c,h]of l)r.setAttribute(c,h);n?n.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,r,!1))}async render(t){const{annotations:e}=t,n=this.div;Fi(n,this.viewport);const r=new Map,a={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Po,annotationStorage:t.annotationStorage||new Wd,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const c=l.annotationType===ie.POPUP;if(c){const f=r.get(l.id);if(!f)continue;a.elements=f}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;a.data=l;const h=Gy.create(a);if(!h.isRenderable)continue;if(!c&&l.popupRef){const f=r.get(l.popupRef);f?f.push(h):r.set(l.popupRef,[h])}const d=h.render();l.hidden&&(d.style.visibility="hidden"),await this.#r(d,l.id,a.elements),h._isEditable&&(this.#n.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}this.#s()}async addLinkAnnotations(t,e){const n={data:null,layer:this.div,linkService:e,svgFactory:new Po,parent:this};for(const r of t){r.borderStyle||=qw._defaultBorderStyle,n.data=r;const a=Gy.create(n);if(!a.isRenderable)continue;const l=a.render();await this.#r(l,r.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,Fi(e,{rotation:t.rotation}),this.#s(),e.hidden=!1}#s(){if(!this.#e)return;const t=this.div;for(const[e,n]of this.#e){const r=t.querySelector(`[data-annotation-id="${e}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:a}=r;a?a.nodeName==="CANVAS"?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):r.append(n);const l=this.#n.get(e);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,r.id,n),l._hasNoCanvas=!1):l.canvas=n)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}static get _defaultBorderStyle(){return Mt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:$s.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const ml=/\r\n?|\n/g;class me extends vt{#t;#e="";#n=`${this.id}-editor`;#i=null;#r;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=me.prototype,e=a=>a.isEmpty(),n=li.TRANSLATE_SMALL,r=li.TRANSLATE_BIG;return Mt(this,"_keyboardManager",new zo([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:e}]]))}static _type="freetext";static _editorType=Et.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||me._defaultColor||vt._defaultLineColor,this.#r=t.fontSize||me._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){vt.initialize(t,e);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case It.FREETEXT_SIZE:me._defaultFontSize=e;break;case It.FREETEXT_COLOR:me._defaultColor=e;break}}updateParams(t,e){switch(t){case It.FREETEXT_SIZE:this.#s(e);break;case It.FREETEXT_COLOR:this.#o(e);break}}static get defaultPropertiesToUpdate(){return[[It.FREETEXT_SIZE,me._defaultFontSize],[It.FREETEXT_COLOR,me._defaultColor||vt._defaultLineColor]]}get propertiesToUpdate(){return[[It.FREETEXT_SIZE,this.#r],[It.FREETEXT_COLOR,this.#t]]}#s(t){const e=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#r)*this.parentScale),this.#r=r,this.#h()},n=this.#r;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:It.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#o(t){const e=r=>{this.#t=this.editorDiv.style.color=r},n=this.#t;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:It.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-me._internalPadding*t,-(me._internalPadding+this.#r)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const t=[];this.editorDiv.normalize();let e=null;for(const n of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(t.push(me.#l(n)),e=n);return t.join(`
`)}#h(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,l=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),n=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,e=this.#e=this.#a().trimEnd();if(t===e)return;const n=r=>{if(this.#e=r,!r){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){me._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#r}px * var(--total-scale-factor))`,n.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[d,f]=this.pageDimensions,[m,g]=this.pageTranslation;let w,b;switch(this.rotation){case 0:w=t+(l[0]-m)/d,b=e+this.height-(l[1]-g)/f;break;case 90:w=t+(l[0]-m)/d,b=e-(l[1]-g)/f,[c,h]=[h,-c];break;case 180:w=t-this.width+(l[0]-m)/d,b=e-(l[1]-g)/f,[c,h]=[-c,-h];break;case 270:w=t+(l[0]-m-this.height*f)/d,b=e+(l[1]-g-this.width*d)/f,[c,h]=[-h,c];break}this.setAt(w*r,b*a,c,h)}else this._moveAfterPaste(t,e);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#l(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(ml,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:n}=e;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const r=me.#f(e.getData("text")||"").replaceAll(ml,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:h}=l,d=[],f=[];if(c.nodeType===Node.TEXT_NODE){const w=c.parentElement;if(f.push(c.nodeValue.slice(h).replaceAll(ml,"")),w!==this.editorDiv){let b=d;for(const x of this.editorDiv.childNodes){if(x===w){b=f;continue}b.push(me.#l(x))}}d.push(c.nodeValue.slice(0,h).replaceAll(ml,""))}else if(c===this.editorDiv){let w=d,b=0;for(const x of this.editorDiv.childNodes)b++===h&&(w=f),w.push(me.#l(x))}this.#e=`${d.join(`
`)}${r}${f.join(`
`)}`,this.#d();const m=new Range;let g=Math.sumPrecise(d.map(w=>w.length));for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const b=w.nodeValue.length;if(g<=b){m.setStart(w,g),m.setEnd(w,g);break}g-=b}a.removeAllRanges(),a.addRange(m)}#d(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#c(){return this.#e.replaceAll(" "," ")}static#f(t){return t.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}static async deserialize(t,e,n){let r=null;if(t instanceof Ww){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:h,rotation:d,id:f,popupRef:m},textContent:g,textPosition:w,parent:{page:{pageNumber:b}}}=t;if(!g||g.length===0)return null;r=t={annotationType:Et.FREETEXT,color:Array.from(c),fontSize:l,value:g.join(`
`),position:w,pageIndex:b-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:m}}const a=await super.deserialize(t,e,n);return a.#r=t.fontSize,a.#t=pt.makeHexColor(...t.color),a.#e=me.#f(t.value),a._initialData=r,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=me._internalPadding*this.parentScale,n=this.getRect(e,e),r=vt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),a={annotationType:Et.FREETEXT,color:r,fontSize:this.#r,value:this.#c(),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(a.isCopy=!0,a):this.annotationElementId&&!this.#p(a)?null:(a.id=this.annotationElementId,a)}#p(t){const{value:e,fontSize:n,color:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((l,c)=>l!==r[c])||t.pageIndex!==a}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(this.deleted)return e;const{style:n}=e;n.fontSize=`calc(${this.#r}px * var(--total-scale-factor))`,n.color=this.#t,e.replaceChildren();for(const a of this.#e.split(`
`)){const l=document.createElement("div");l.append(a?document.createTextNode(a):document.createElement("br")),e.append(l)}const r=me._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:this.#e}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class ot{static PRECISION=1e-4;toSVGPath(){Bt("Abstract method `toSVGPath` must be implemented.")}get box(){Bt("Abstract getter `box` must be implemented.")}serialize(t,e){Bt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,r,a,l){l||=new Float32Array(t.length);for(let c=0,h=t.length;c<h;c+=2)l[c]=e+t[c]*r,l[c+1]=n+t[c+1]*a;return l}static _rescaleAndSwap(t,e,n,r,a,l){l||=new Float32Array(t.length);for(let c=0,h=t.length;c<h;c+=2)l[c]=e+t[c+1]*r,l[c+1]=n+t[c]*a;return l}static _translate(t,e,n,r){r||=new Float32Array(t.length);for(let a=0,l=t.length;a<l;a+=2)r[a]=e+t[a],r[a+1]=n+t[a+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,r,a){switch(a){case 90:return[1-e/n,t/r];case 180:return[1-t/n,1-e/r];case 270:return[e/n,1-t/r];default:return[t/n,e/r]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,r,a,l){return[(t+5*n)/6,(e+5*r)/6,(5*n+a)/6,(5*r+l)/6,(n+a)/2,(r+l)/2]}}class as{#t;#e=[];#n;#i;#r=[];#s=new Float32Array(18);#o;#a;#h;#l;#d;#c;#f=[];static#p=8;static#m=2;static#u=as.#p+as.#m;constructor({x:t,y:e},n,r,a,l,c=0){this.#t=n,this.#c=a*r,this.#i=l,this.#s.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=c,this.#l=as.#p*r,this.#h=as.#u*r,this.#d=r,this.#f.push(t,e)}isEmpty(){return isNaN(this.#s[8])}#g(){const t=this.#s.subarray(4,6),e=this.#s.subarray(16,18),[n,r,a,l]=this.#t;return[(this.#o+(t[0]-e[0])/2-n)/a,(this.#a+(t[1]-e[1])/2-r)/l,(this.#o+(e[0]-t[0])/2-n)/a,(this.#a+(e[1]-t[1])/2-r)/l]}add({x:t,y:e}){this.#o=t,this.#a=e;const[n,r,a,l]=this.#t;let[c,h,d,f]=this.#s.subarray(8,12);const m=t-d,g=e-f,w=Math.hypot(m,g);if(w<this.#h)return!1;const b=w-this.#l,x=b/w,S=x*m,E=x*g;let _=c,C=h;c=d,h=f,d+=S,f+=E,this.#f?.push(t,e);const R=-E/b,k=S/b,N=R*this.#c,O=k*this.#c;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([d+N,f+O],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([d-N,f-O],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([c+N,h+O],2),this.#r.push(NaN,NaN,NaN,NaN,(c+N-n)/a,(h+O-r)/l),this.#s.set([c-N,h-O],14),this.#e.push(NaN,NaN,NaN,NaN,(c-N-n)/a,(h-O-r)/l)),this.#s.set([_,C,c,h,d,f],6),!this.isEmpty()):(this.#s.set([_,C,c,h,d,f],6),Math.abs(Math.atan2(C-h,_-c)-Math.atan2(E,S))<Math.PI/2?([c,h,d,f]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((c+d)/2-n)/a,((h+f)/2-r)/l),[c,h,_,C]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((_+c)/2-n)/a,((C+h)/2-r)/l),!0):([_,C,c,h,d,f]=this.#s.subarray(0,6),this.#r.push(((_+5*c)/6-n)/a,((C+5*h)/6-r)/l,((5*c+d)/6-n)/a,((5*h+f)/6-r)/l,((c+d)/2-n)/a,((h+f)/2-r)/l),[d,f,c,h,_,C]=this.#s.subarray(12,18),this.#e.push(((_+5*c)/6-n)/a,((C+5*h)/6-r)/l,((5*c+d)/6-n)/a,((5*h+f)/6-r)/l,((c+d)/2-n)/a,((h+f)/2-r)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();const n=[];n.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#b(n);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return this.#v(n),n.join(" ")}#y(){const[t,e,n,r]=this.#t,[a,l,c,h]=this.#g();return`M${(this.#s[2]-t)/n} ${(this.#s[3]-e)/r} L${(this.#s[4]-t)/n} ${(this.#s[5]-e)/r} L${a} ${l} L${c} ${h} L${(this.#s[16]-t)/n} ${(this.#s[17]-e)/r} L${(this.#s[14]-t)/n} ${(this.#s[15]-e)/r} Z`}#v(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#b(t){const[e,n,r,a]=this.#t,l=this.#s.subarray(4,6),c=this.#s.subarray(16,18),[h,d,f,m]=this.#g();t.push(`L${(l[0]-e)/r} ${(l[1]-n)/a} L${h} ${d} L${f} ${m} L${(c[0]-e)/r} ${(c[1]-n)/a}`)}newFreeDrawOutline(t,e,n,r,a,l){return new Yw(t,e,n,r,a,l)}getOutlines(){const t=this.#r,e=this.#e,n=this.#s,[r,a,l,c]=this.#t,h=new Float32Array((this.#f?.length??0)+2);for(let m=0,g=h.length-2;m<g;m+=2)h[m]=(this.#f[m]-r)/l,h[m+1]=(this.#f[m+1]-a)/c;if(h[h.length-2]=(this.#o-r)/l,h[h.length-1]=(this.#a-a)/c,isNaN(n[6])&&!this.isEmpty())return this.#x(h);const d=new Float32Array(this.#r.length+24+this.#e.length);let f=t.length;for(let m=0;m<f;m+=2){if(isNaN(t[m])){d[m]=d[m+1]=NaN;continue}d[m]=t[m],d[m+1]=t[m+1]}f=this.#C(d,f);for(let m=e.length-6;m>=6;m-=6)for(let g=0;g<6;g+=2){if(isNaN(e[m+g])){d[f]=d[f+1]=NaN,f+=2;continue}d[f]=e[m+g],d[f+1]=e[m+g+1],f+=2}return this.#A(d,f),this.newFreeDrawOutline(d,h,this.#t,this.#d,this.#n,this.#i)}#x(t){const e=this.#s,[n,r,a,l]=this.#t,[c,h,d,f]=this.#g(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(e[2]-n)/a,(e[3]-r)/l,NaN,NaN,NaN,NaN,(e[4]-n)/a,(e[5]-r)/l,NaN,NaN,NaN,NaN,c,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(e[16]-n)/a,(e[17]-r)/l,NaN,NaN,NaN,NaN,(e[14]-n)/a,(e[15]-r)/l],0),this.newFreeDrawOutline(m,t,this.#t,this.#d,this.#n,this.#i)}#A(t,e){const n=this.#e;return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6}#C(t,e){const n=this.#s.subarray(4,6),r=this.#s.subarray(16,18),[a,l,c,h]=this.#t,[d,f,m,g]=this.#g();return t.set([NaN,NaN,NaN,NaN,(n[0]-a)/c,(n[1]-l)/h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,m,g,NaN,NaN,NaN,NaN,(r[0]-a)/c,(r[1]-l)/h],e),e+=24}}class Yw extends ot{#t;#e=new Float32Array(4);#n;#i;#r;#s;#o;constructor(t,e,n,r,a,l){super(),this.#o=t,this.#r=e,this.#t=n,this.#s=r,this.#n=a,this.#i=l,this.lastPoint=[NaN,NaN],this.#a(l);const[c,h,d,f]=this.#e;for(let m=0,g=t.length;m<g;m+=2)t[m]=(t[m]-c)/d,t[m+1]=(t[m+1]-h)/f;for(let m=0,g=e.length;m<g;m+=2)e[m]=(e[m]-c)/d,e[m+1]=(e[m+1]-h)/f}toSVGPath(){const t=[`M${this.#o[4]} ${this.#o[5]}`];for(let e=6,n=this.#o.length;e<n;e+=6){if(isNaN(this.#o[e])){t.push(`L${this.#o[e+4]} ${this.#o[e+5]}`);continue}t.push(`C${this.#o[e]} ${this.#o[e+1]} ${this.#o[e+2]} ${this.#o[e+3]} ${this.#o[e+4]} ${this.#o[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,n,r],a){const l=n-t,c=r-e;let h,d;switch(a){case 0:h=ot._rescale(this.#o,t,r,l,-c),d=ot._rescale(this.#r,t,r,l,-c);break;case 90:h=ot._rescaleAndSwap(this.#o,t,e,l,c),d=ot._rescaleAndSwap(this.#r,t,e,l,c);break;case 180:h=ot._rescale(this.#o,n,e,-l,c),d=ot._rescale(this.#r,n,e,-l,c);break;case 270:h=ot._rescaleAndSwap(this.#o,n,r,-l,-c),d=ot._rescaleAndSwap(this.#r,n,r,-l,-c);break}return{outline:Array.from(h),points:[Array.from(d)]}}#a(t){const e=this.#o;let n=e[4],r=e[5];const a=[n,r,n,r];let l=n,c=r;const h=t?Math.max:Math.min;for(let f=6,m=e.length;f<m;f+=6){const g=e[f+4],w=e[f+5];if(isNaN(e[f]))pt.pointBoundingBox(g,w,a),c<w?(l=g,c=w):c===w&&(l=h(l,g));else{const b=[1/0,1/0,-1/0,-1/0];pt.bezierBoundingBox(n,r,...e.slice(f,f+6),b),pt.rectBoundingBox(...b,a),c<b[3]?(l=b[2],c=b[3]):c===b[3]&&(l=h(l,b[2]))}n=g,r=w}const d=this.#e;d[0]=a[0]-this.#n,d[1]=a[1]-this.#n,d[2]=a[2]-a[0]+2*this.#n,d[3]=a[3]-a[1]+2*this.#n,this.lastPoint=[l,c]}get box(){return this.#e}newOutliner(t,e,n,r,a,l=0){return new as(t,e,n,r,a,l)}getNewOutline(t,e){const[n,r,a,l]=this.#e,[c,h,d,f]=this.#t,m=a*d,g=l*f,w=n*d+c,b=r*f+h,x=this.newOutliner({x:this.#r[0]*m+w,y:this.#r[1]*g+b},this.#t,this.#s,t,this.#i,e??this.#n);for(let S=2;S<this.#r.length;S+=2)x.add({x:this.#r[S]*m+w,y:this.#r[S+1]*g+b});return x.getOutlines()}}class Xh{#t;#e;#n=[];#i=[];constructor(t,e=0,n=0,r=!0){const a=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:w,y:b,width:x,height:S}of t){const E=Math.floor((w-e)/l)*l,_=Math.ceil((w+x+e)/l)*l,C=Math.floor((b-e)/l)*l,R=Math.ceil((b+S+e)/l)*l,k=[E,C,R,!0],N=[_,C,R,!1];this.#n.push(k,N),pt.rectBoundingBox(E,C,_,R,a)}const c=a[2]-a[0]+2*n,h=a[3]-a[1]+2*n,d=a[0]-n,f=a[1]-n,m=this.#n.at(r?-1:-2),g=[m[0],m[2]];for(const w of this.#n){const[b,x,S]=w;w[0]=(b-d)/c,w[1]=(x-f)/h,w[2]=(S-f)/h}this.#t=new Float32Array([d,f,c,h]),this.#e=g}getOutlines(){this.#n.sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#h(e)),this.#o(e)):(this.#a(e),t.push(...this.#h(e)));return this.#r(t)}#r(t){const e=[],n=new Set;for(const l of t){const[c,h,d]=l;e.push([c,h,l],[c,d,l])}e.sort((l,c)=>l[1]-c[1]||l[0]-c[0]);for(let l=0,c=e.length;l<c;l+=2){const h=e[l][2],d=e[l+1][2];h.push(d),d.push(h),n.add(h),n.add(d)}const r=[];let a;for(;n.size>0;){const l=n.values().next().value;let[c,h,d,f,m]=l;n.delete(l);let g=c,w=h;for(a=[c,d],r.push(a);;){let b;if(n.has(f))b=f;else if(n.has(m))b=m;else break;n.delete(b),[c,h,d,f,m]=b,g!==c&&(a.push(g,w,c,w===h?h:d),g=c),w=w===h?d:h}a.push(g,w)}return new MR(r,this.#t,this.#e)}#s(t){const e=this.#i;let n=0,r=e.length-1;for(;n<=r;){const a=n+r>>1,l=e[a][0];if(l===t)return a;l<t?n=a+1:r=a-1}return r+1}#o([,t,e]){const n=this.#s(t);this.#i.splice(n,0,[t,e])}#a([,t,e]){const n=this.#s(t);for(let r=n;r<this.#i.length;r++){const[a,l]=this.#i[r];if(a!==t)break;if(a===t&&l===e){this.#i.splice(r,1);return}}for(let r=n-1;r>=0;r--){const[a,l]=this.#i[r];if(a!==t)break;if(a===t&&l===e){this.#i.splice(r,1);return}}}#h(t){const[e,n,r]=t,a=[[e,n,r]],l=this.#s(r);for(let c=0;c<l;c++){const[h,d]=this.#i[c];for(let f=0,m=a.length;f<m;f++){const[,g,w]=a[f];if(!(d<=g||w<=h)){if(g>=h){if(w>d)a[f][1]=d;else{if(m===1)return[];a.splice(f,1),f--,m--}continue}a[f][2]=h,w>d&&a.push([e,d,w])}}}return a}}class MR extends ot{#t;#e;constructor(t,e,n){super(),this.#e=t,this.#t=e,this.lastPoint=n}toSVGPath(){const t=[];for(const e of this.#e){let[n,r]=e;t.push(`M${n} ${r}`);for(let a=2;a<e.length;a+=2){const l=e[a],c=e[a+1];l===n?(t.push(`V${c}`),r=c):c===r&&(t.push(`H${l}`),n=l)}t.push("Z")}return t.join(" ")}serialize([t,e,n,r],a){const l=[],c=n-t,h=r-e;for(const d of this.#e){const f=new Array(d.length);for(let m=0;m<d.length;m+=2)f[m]=t+d[m]*c,f[m+1]=r-d[m+1]*h;l.push(f)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Kh extends as{newFreeDrawOutline(t,e,n,r,a,l){return new LR(t,e,n,r,a,l)}}class LR extends Yw{newOutliner(t,e,n,r,a,l=0){return new Kh(t,e,n,r,a,l)}}class tn{#t=null;#e=null;#n;#i=null;#r=!1;#s=!1;#o=null;#a;#h=null;#l=null;#d;static#c=null;static get _keyboardManager(){return Mt(this,"_keyboardManager",new zo([[["Escape","mac+Escape"],tn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],tn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],tn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],tn.prototype._moveToPrevious],[["Home","mac+Home"],tn.prototype._moveToBeginning],[["End","mac+End"],tn.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#s=!1,this.#d=It.HIGHLIGHT_COLOR,this.#o=t):(this.#s=!0,this.#d=It.HIGHLIGHT_DEFAULT_COLOR),this.#l=t?._uiManager||e,this.#a=this.#l._eventBus,this.#n=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",tn.#c||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#o&&(t.ariaControls=`${this.#o.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#u.bind(this),{signal:e}),t.addEventListener("keydown",this.#m.bind(this),{signal:e});const n=this.#e=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#n,t.append(n),t}renderMainDropdown(){const t=this.#i=this.#f();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#f(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",mn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#o&&(t.id=`${this.#o.id}_colorpicker_dropdown`);for(const[n,r]of this.#l.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",r),a.title=n,a.setAttribute("data-l10n-id",tn.#c[n]);const l=document.createElement("span");a.append(l),l.className="swatch",l.style.backgroundColor=r,a.ariaSelected=r===this.#n,a.addEventListener("click",this.#p.bind(this,r),{signal:e}),t.append(a)}return t.addEventListener("keydown",this.#m.bind(this),{signal:e}),t}#p(t,e){e.stopPropagation(),this.#a.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#u(t);return}const e=t.target.getAttribute("data-color");e&&this.#p(e,t)}_moveToNext(t){if(!this.#y){this.#u(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#y&&this._hideDropdownFromKeyboard();return}this.#y||this.#u(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#y){this.#u(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#y){this.#u(t);return}this.#i.lastChild?.focus()}#m(t){tn._keyboardManager.exec(this,t)}#u(t){if(this.#y){this.hideDropdown();return}if(this.#r=t.detail===0,this.#h||(this.#h=new AbortController,window.addEventListener("pointerdown",this.#g.bind(this),{signal:this.#l.combinedSignal(this.#h)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const e=this.#i=this.#f();this.#t.append(e)}#g(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#h?.abort(),this.#h=null}get#y(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#y){this.#o?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const e=this.#l.highlightColors.values();for(const n of this.#i.children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class se extends vt{#t=null;#e=0;#n;#i=null;#r=null;#s=null;#o=null;#a=0;#h=null;#l=null;#d=null;#c=!1;#f=null;#p;#m=null;#u="";#g;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Et.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=se.prototype;return Mt(this,"_keyboardManager",new zo([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||se._defaultColor,this.#g=t.thickness||se._defaultThickness,this.#p=t.opacity||se._defaultOpacity,this.#n=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#c=!0,this.#b(t),this.#P()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#o=t.focusNode,this.#a=t.focusOffset,this.#v(),this.#P(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#c?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#g,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new Xh(this.#n,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new Xh(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#s=e.getOutlines();const{lastPoint:n}=this.#s;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:e,clipPathId:n}){this.#l=t;const r=1.5;if(this.#s=t.getNewOutline(this.#g/2+r,.0025),e>=0)this.#d=e,this.#i=n,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const f=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:se.#S(this.#l.box,(f-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:se.#S(this.#s.box,f),path:{d:this.#s.toSVGPath()}})}const[a,l,c,h]=t.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=c,this.height=h;break;case 90:{const[f,m]=this.parentDimensions;this.x=l,this.y=1-a,this.width=c*m/f,this.height=h*f/m;break}case 180:this.x=1-a,this.y=1-l,this.width=c,this.height=h;break;case 270:{const[f,m]=this.parentDimensions;this.x=1-l,this.y=a,this.width=c*m/f,this.height=h*f/m;break}}const{lastPoint:d}=this.#s;this.#f=[(d[0]-a)/c,(d[1]-l)/h]}static initialize(t,e){vt.initialize(t,e),se._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case It.HIGHLIGHT_DEFAULT_COLOR:se._defaultColor=e;break;case It.HIGHLIGHT_THICKNESS:se._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#f}updateParams(t,e){switch(t){case It.HIGHLIGHT_COLOR:this.#x(e);break;case It.HIGHLIGHT_THICKNESS:this.#A(e);break}}static get defaultPropertiesToUpdate(){return[[It.HIGHLIGHT_DEFAULT_COLOR,se._defaultColor],[It.HIGHLIGHT_THICKNESS,se._defaultThickness]]}get propertiesToUpdate(){return[[It.HIGHLIGHT_COLOR,this.color||se._defaultColor],[It.HIGHLIGHT_THICKNESS,this.#g||se._defaultThickness],[It.HIGHLIGHT_FREE,this.#c]]}#x(t){const e=(a,l)=>{this.color=a,this.#p=l,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:a,"fill-opacity":l}}),this.#r?.updateColor(a)},n=this.color,r=this.#p;this.addCommands({cmd:e.bind(this,t,se._defaultOpacity),undo:e.bind(this,n,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:It.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#A(t){const e=this.#g,n=r=>{this.#g=r,this.#C(r)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:It.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new tn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#P(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#T():t&&(this.#P(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#C(t){if(!this.#c)return;this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,n]=this.parentDimensions;this.setDims(this.width*e,this.height*n)}#T(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#P(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#p},rootClass:{highlight:!0,free:this.#c},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#c},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#c),this.#h&&(this.#h.style.clipPath=this.#i))}static#S([t,e,n,r],a){switch(a){case 90:return[1-e-r,t,r,n];case 180:return[1-t-n,1-e-r,n,r];case 270:return[e,1-t-n,r,n]}return[t,e,n,r]}rotate(t){const{drawLayer:e}=this.parent;let n;this.#c?(t=(t-this.rotation+360)%360,n=se.#S(this.#l.box,t)):n=se.#S([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:n,root:{"data-main-rotation":t}}),e.updateProperties(this.#m,{bbox:se.#S(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#c?t.classList.add("free"):this.div.addEventListener("keydown",this.#k.bind(this),{signal:this._uiManager._signal});const e=this.#h=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#i;const[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),Cw(this,this.#h,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#k(t){se._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#_(!0);break;case 1:case 3:this.#_(!1);break}}#_(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#o,this.#a)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#c||this.#_(!1))}get _mustFixPosition(){return!this.#c}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!t}}))}#M(){return this.#c?this.rotation:0}#L(){if(this.#c)return null;const[t,e]=this.pageDimensions,[n,r]=this.pageTranslation,a=this.#n,l=new Float32Array(a.length*8);let c=0;for(const{x:h,y:d,width:f,height:m}of a){const g=h*t+n,w=(1-d)*e+r;l[c]=l[c+4]=g,l[c+1]=l[c+3]=w,l[c+2]=l[c+6]=g+f*t,l[c+5]=l[c+7]=w-m*e,c+=8}return l}#I(t){return this.#l.serialize(t,this.#M())}static startHighlighting(t,e,{target:n,x:r,y:a}){const{x:l,y:c,width:h,height:d}=n.getBoundingClientRect(),f=new AbortController,m=t.combinedSignal(f),g=w=>{f.abort(),this.#E(t,w)};window.addEventListener("blur",g,{signal:m}),window.addEventListener("pointerup",g,{signal:m}),window.addEventListener("pointerdown",oe,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",mn,{signal:m}),n.addEventListener("pointermove",this.#V.bind(this,t),{signal:m}),this._freeHighlight=new Kh({x:r,y:a},[l,c,h,d],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#V(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#E(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,n){let r=null;if(t instanceof Xw){const{data:{quadPoints:b,rect:x,rotation:S,id:E,color:_,opacity:C,popupRef:R},parent:{page:{pageNumber:k}}}=t;r=t={annotationType:Et.HIGHLIGHT,color:Array.from(_),opacity:C,quadPoints:b,boxes:null,pageIndex:k-1,rect:x.slice(0),rotation:S,annotationElementId:E,id:E,deleted:!1,popupRef:R}}else if(t instanceof Zd){const{data:{inkLists:b,rect:x,rotation:S,id:E,color:_,borderStyle:{rawWidth:C},popupRef:R},parent:{page:{pageNumber:k}}}=t;r=t={annotationType:Et.HIGHLIGHT,color:Array.from(_),thickness:C,inkLists:b,boxes:null,pageIndex:k-1,rect:x.slice(0),rotation:S,annotationElementId:E,id:E,deleted:!1,popupRef:R}}const{color:a,quadPoints:l,inkLists:c,opacity:h}=t,d=await super.deserialize(t,e,n);d.color=pt.makeHexColor(...a),d.#p=h||1,c&&(d.#g=t.thickness),d._initialData=r;const[f,m]=d.pageDimensions,[g,w]=d.pageTranslation;if(l){const b=d.#n=[];for(let x=0;x<l.length;x+=8)b.push({x:(l[x]-g)/f,y:1-(l[x+1]-w)/m,width:(l[x+2]-l[x])/f,height:(l[x+1]-l[x+5])/m});d.#v(),d.#P(),d.rotate(d.rotation)}else if(c){d.#c=!0;const b=c[0],x={x:b[0]-g,y:m-(b[1]-w)},S=new Kh(x,[0,0,f,m],1,d.#g/2,!0,.001);for(let C=0,R=b.length;C<R;C+=2)x.x=b[C]-g,x.y=m-(b[C+1]-w),S.add(x);const{id:E,clipPathId:_}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:S.toSVGPath()}},!0,!0);d.#b({highlightOutlines:S.getOutlines(),highlightId:E,clipPathId:_}),d.#P(),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getRect(0,0),n=vt._colorManager.convert(this.color),r={annotationType:Et.HIGHLIGHT,color:n,opacity:this.#p,thickness:this.#g,quadPoints:this.#L(),outlines:this.#I(e),pageIndex:this.pageIndex,rect:e,rotation:this.#M(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#w(r)?null:(r.id=this.annotationElementId,r)}#w(t){const{color:e}=this._initialData;return t.color.some((n,r)=>n!==e[r])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class Qw{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Bt("Not implemented")}}class bt extends vt{#t=null;#e;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#r=null;static#s=NaN;static#o=null;static#a=null;static#h=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:e,drawingOptions:n}){this.#t=t,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#u(t.box)}#d(t,e){const{id:n}=e.drawLayer.draw(bt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(t,e){const n=new Set(Object.keys(t));for(const[r,a]of Object.entries(e))n.has(r)?Object.assign(t[r],a):t[r]=a;return t}static getDefaultDrawingOptions(t){Bt("Not implemented")}static get typesMap(){Bt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,e),this._currentParent&&(bt.#n.updateProperty(n,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[n,r]of this.typesMap)t.push([n,e[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[n,r]of this.constructor.typesMap)t.push([n,e[r]]);return t}_updateProperty(t,e,n){const r=this._drawingOptions,a=r[e],l=c=>{r.updateProperty(e,c);const h=this.#t.updateProperty(e,c);h&&this.#u(h),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,bt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#m()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,bt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#m()),{bbox:this.#g()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,bt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#m(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#c(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#c()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#c(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#p([t,e,n,r]){const{parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[e,1-t,n*(l/a),r*(a/l)];case 180:return[1-t,1-e,n,r];case 270:return[1-e,t,n*(l/a),r*(a/l)];default:return[t,e,n,r]}}#m(){const{x:t,y:e,width:n,height:r,parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[1-e,t,n*(a/l),r*(l/a)];case 180:return[1-t,1-e,n,r];case 270:return[e,1-t,n*(a/l),r*(l/a)];default:return[t,e,n,r]}}#u(t){if([this.x,this.y,this.width,this.height]=this.#p(t),this.div){this.fixAndSetPosition();const[e,n]=this.parentDimensions;this.setDims(this.width*e,this.height*n)}this._onResized()}#g(){const{x:t,y:e,width:n,height:r,rotation:a,parentRotation:l,parentDimensions:[c,h]}=this;switch((a*4+l)/90){case 1:return[1-e-r,t,r,n];case 2:return[1-t-n,1-e-r,n,r];case 3:return[e,1-t-n,r,n];case 4:return[t,e-n*(c/h),r*(h/c),n*(c/h)];case 5:return[1-e,t,n*(c/h),r*(h/c)];case 6:return[1-t-r*(h/c),1-e,r*(h/c),n*(c/h)];case 7:return[e-n*(c/h),1-t-r*(h/c),n*(c/h),r*(h/c)];case 8:return[t-n,e-r,n,r];case 9:return[1-e,t-n,r,n];case 10:return[1-t,1-e,n,r];case 11:return[e-r,1-t,r,n];case 12:return[t-r*(h/c),e,r*(h/c),n*(c/h)];case 13:return[1-e-n*(c/h),t-r*(h/c),n*(c/h),r*(h/c)];case 14:return[1-t,1-e-n*(c/h),r*(h/c),n*(c/h)];case 15:return[e,1-t,n*(c/h),r*(h/c)];default:return[t,e,n,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,bt._mergeSVGProperties({bbox:this.#g()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const n=super.render();n.classList.add("draw");const r=document.createElement("div");n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[a,l]=this.parentDimensions;return this.setDims(this.width*a,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),n}static createDrawerInstance(t,e,n,r,a){Bt("Not implemented")}static startDrawing(t,e,n,r){const{target:a,offsetX:l,offsetY:c,pointerId:h,pointerType:d}=r;if(bt.#o&&bt.#o!==d)return;const{viewport:{rotation:f}}=t,{width:m,height:g}=a.getBoundingClientRect(),w=bt.#i=new AbortController,b=t.combinedSignal(w);if(bt.#s||=h,bt.#o??=d,window.addEventListener("pointerup",x=>{bt.#s===x.pointerId?this._endDraw(x):bt.#a?.delete(x.pointerId)},{signal:b}),window.addEventListener("pointercancel",x=>{bt.#s===x.pointerId?this._currentParent.endDrawingSession():bt.#a?.delete(x.pointerId)},{signal:b}),window.addEventListener("pointerdown",x=>{bt.#o===x.pointerType&&((bt.#a||=new Set).add(x.pointerId),bt.#n.isCancellable()&&(bt.#n.removeLastElement(),bt.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",mn,{signal:b}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:b}),a.addEventListener("touchmove",x=>{x.timeStamp===bt.#h&&oe(x)},{signal:b}),t.toggleDrawing(),e._editorUndoBar?.hide(),bt.#n){t.drawLayer.updateProperties(this._currentDrawId,bt.#n.startNew(l,c,m,g,f));return}e.updateUIForDefaultProperties(this),bt.#n=this.createDrawerInstance(l,c,m,g,f),bt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(bt.#r.toSVGProperties(),bt.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(bt.#h=-1,!bt.#n)return;const{offsetX:e,offsetY:n,pointerId:r}=t;if(bt.#s===r){if(bt.#a?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,bt.#n.add(e,n)),bt.#h=t.timeStamp,oe(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,bt.#n=null,bt.#r=null,bt.#o=null,bt.#h=NaN),bt.#i&&(bt.#i.abort(),bt.#i=null,bt.#s=NaN,bt.#a=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,bt.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=bt.#n,r=this._currentDrawId,a=n.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(r,n.setLastElement(a))},undo:()=>{e.drawLayer.updateProperties(r,n.removeLastElement())},mustExec:!1,type:It.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(It.DRAW_STEP),!bt.#n.isEmpty()){const{pageDimensions:[n,r],scale:a}=e,l=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:bt.#n.getOutlines(n*a,r*a,a,this._INNER_MARGIN),drawingOptions:bt.#r,mustBeCommitted:!t});return this._cleanup(!0),l}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,n,r,a,l){Bt("Not implemented")}static async deserialize(t,e,n){const{rawDims:{pageWidth:r,pageHeight:a,pageX:l,pageY:c}}=e.viewport,h=this.deserializeDraw(l,c,r,a,this._INNER_MARGIN,t),d=await super.deserialize(t,e,n);return d.createDrawingOptions(t),d.#l({drawOutlines:h}),d.#f(),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[e,n]=this.pageTranslation,[r,a]=this.pageDimensions;return this.#t.serialize([e,n,r,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class IR{#t=new Float64Array(6);#e;#n;#i;#r;#s;#o="";#a=0;#h=new Uo;#l;#d;constructor(t,e,n,r,a,l){this.#l=n,this.#d=r,this.#i=a,this.#r=l,[t,e]=this.#c(t,e);const c=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e],this.#n=[{line:c,points:this.#s}],this.#t.set(c,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#c(t,e){return ot._normalizePoint(t,e,this.#l,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#s.length<=10}add(t,e){[t,e]=this.#c(t,e);const[n,r,a,l]=this.#t.subarray(2,6),c=t-a,h=e-l;return Math.hypot(this.#l*c,this.#d*h)<=2?null:(this.#s.push(t,e),isNaN(n)?(this.#t.set([a,l,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([n,r,a,l,t,e],0),this.#e.push(...ot.createBezierPoints(n,r,a,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,r,a){this.#l=n,this.#d=r,this.#i=a,[t,e]=this.#c(t,e);const l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e];const c=this.#n.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#n.push({line:l,points:this.#s}),this.#t.set(l,0),this.#a=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#s=t.points,this.#a=0,{path:{d:this.toSVGPath()}}):this.#h.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#h.removeLastElement();this.#n.pop(),this.#o="";for(let t=0,e=this.#n.length;t<e;t++){const{line:n,points:r}=this.#n[t];this.#e=n,this.#s=r,this.#a=0,this.toSVGPath()}return{path:{d:this.#o}}}toSVGPath(){const t=ot.svgRound(this.#e[4]),e=ot.svgRound(this.#e[5]);if(this.#s.length===2)return this.#o=`${this.#o} M ${t} ${e} Z`,this.#o;if(this.#s.length<=6){const r=this.#o.lastIndexOf("M");this.#o=`${this.#o.slice(0,r)} M ${t} ${e}`,this.#a=6}if(this.#s.length===4){const r=ot.svgRound(this.#e[10]),a=ot.svgRound(this.#e[11]);return this.#o=`${this.#o} L ${r} ${a}`,this.#a=12,this.#o}const n=[];this.#a===0&&(n.push(`M ${t} ${e}`),this.#a=6);for(let r=this.#a,a=this.#e.length;r<a;r+=6){const[l,c,h,d,f,m]=this.#e.slice(r,r+6).map(ot.svgRound);n.push(`C${l} ${c} ${h} ${d} ${f} ${m}`)}return this.#o+=n.join(" "),this.#a=this.#e.length,this.#o}getOutlines(t,e,n,r){const a=this.#n.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#h.build(this.#n,t,e,n,this.#i,this.#r,r),this.#t=null,this.#e=null,this.#n=null,this.#o=null,this.#h}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Uo extends ot{#t;#e=0;#n;#i;#r;#s;#o;#a;#h;build(t,e,n,r,a,l,c){this.#r=e,this.#s=n,this.#o=r,this.#a=a,this.#h=l,this.#n=c??0,this.#i=t,this.#c()}get thickness(){return this.#h}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#i){if(t.push(`M${ot.svgRound(e[4])} ${ot.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${ot.svgRound(e[10])} ${ot.svgRound(e[11])}`);continue}for(let n=6,r=e.length;n<r;n+=6){const[a,l,c,h,d,f]=e.subarray(n,n+6).map(ot.svgRound);t.push(`C${a} ${l} ${c} ${h} ${d} ${f}`)}}return t.join("")}serialize([t,e,n,r],a){const l=[],c=[],[h,d,f,m]=this.#d();let g,w,b,x,S,E,_,C,R;switch(this.#a){case 0:R=ot._rescale,g=t,w=e+r,b=n,x=-r,S=t+h*n,E=e+(1-d-m)*r,_=t+(h+f)*n,C=e+(1-d)*r;break;case 90:R=ot._rescaleAndSwap,g=t,w=e,b=n,x=r,S=t+d*n,E=e+h*r,_=t+(d+m)*n,C=e+(h+f)*r;break;case 180:R=ot._rescale,g=t+n,w=e,b=-n,x=r,S=t+(1-h-f)*n,E=e+d*r,_=t+(1-h)*n,C=e+(d+m)*r;break;case 270:R=ot._rescaleAndSwap,g=t+n,w=e+r,b=-n,x=-r,S=t+(1-d-m)*n,E=e+(1-h-f)*r,_=t+(1-d)*n,C=e+(1-h)*r;break}for(const{line:k,points:N}of this.#i)l.push(R(k,g,w,b,x,a?new Array(k.length):null)),c.push(R(N,g,w,b,x,a?new Array(N.length):null));return{lines:l,points:c,rect:[S,E,_,C]}}static deserialize(t,e,n,r,a,{paths:{lines:l,points:c},rotation:h,thickness:d}){const f=[];let m,g,w,b,x;switch(h){case 0:x=ot._rescale,m=-t/n,g=e/r+1,w=1/n,b=-1/r;break;case 90:x=ot._rescaleAndSwap,m=-e/r,g=-t/n,w=1/r,b=1/n;break;case 180:x=ot._rescale,m=t/n+1,g=-e/r,w=-1/n,b=1/r;break;case 270:x=ot._rescaleAndSwap,m=e/r+1,g=t/n+1,w=-1/r,b=-1/n;break}if(!l){l=[];for(const E of c){const _=E.length;if(_===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(_===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const C=new Float32Array(3*(_-2));l.push(C);let[R,k,N,O]=E.subarray(0,4);C.set([NaN,NaN,NaN,NaN,R,k],0);for(let L=4;L<_;L+=2){const H=E[L],W=E[L+1];C.set(ot.createBezierPoints(R,k,N,O,H,W),(L-2)*3),[R,k,N,O]=[N,O,H,W]}}}for(let E=0,_=l.length;E<_;E++)f.push({line:x(l[E].map(C=>C??NaN),m,g,w,b),points:x(c[E].map(C=>C??NaN),m,g,w,b)});const S=new this.prototype.constructor;return S.build(f,n,r,1,h,d,a),S}#l(t=this.#h){const e=this.#n+t/2*this.#o;return this.#a%180===0?[e/this.#r,e/this.#s]:[e/this.#s,e/this.#r]}#d(){const[t,e,n,r]=this.#t,[a,l]=this.#l(0);return[t+a,e+l,n-2*a,r-2*l]}#c(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let c=4,h=r.length;c<h;c+=6)pt.pointBoundingBox(r[c],r[c+1],t);continue}let a=r[4],l=r[5];for(let c=6,h=r.length;c<h;c+=6){const[d,f,m,g,w,b]=r.subarray(c,c+6);pt.bezierBoundingBox(a,l,d,f,m,g,w,b,t),a=w,l=b}}const[e,n]=this.#l();t[0]=Ie(t[0]-e,0,1),t[1]=Ie(t[1]-n,0,1),t[2]=Ie(t[2]+e,0,1),t[3]=Ie(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,n]=this.#l();this.#h=t;const[r,a]=this.#l(),[l,c]=[r-e,a-n],h=this.#t;return h[0]-=l,h[1]-=c,h[2]+=2*l,h[3]+=2*c,h}updateParentDimensions([t,e],n){const[r,a]=this.#l();this.#r=t,this.#s=e,this.#o=n;const[l,c]=this.#l(),h=l-r,d=c-a,f=this.#t;return f[0]-=h,f[1]-=d,f[2]+=2*h,f[3]+=2*d,f}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(ot.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ot.svgRound(t)} ${ot.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let n=0,r=0,a=0,l=0,c=0,h=0;switch(this.#e){case 90:r=e/t,a=-t/e,c=t;break;case 180:n=-1,l=-1,c=t,h=e;break;case 270:r=-e/t,a=t/e,h=e;break;default:return""}return`matrix(${n} ${r} ${a} ${l} ${ot.svgRound(c)} ${ot.svgRound(h)})`}getPathResizingSVGProperties([t,e,n,r]){const[a,l]=this.#l(),[c,h,d,f]=this.#t;if(Math.abs(d-a)<=ot.PRECISION||Math.abs(f-l)<=ot.PRECISION){const x=t+n/2-(c+d/2),S=e+r/2-(h+f/2);return{path:{"transform-origin":`${ot.svgRound(t)} ${ot.svgRound(e)}`,transform:`${this.rotationTransform} translate(${x} ${S})`}}}const m=(n-2*a)/(d-2*a),g=(r-2*l)/(f-2*l),w=d/n,b=f/r;return{path:{"transform-origin":`${ot.svgRound(c)} ${ot.svgRound(h)}`,transform:`${this.rotationTransform} scale(${w} ${b}) translate(${ot.svgRound(a)} ${ot.svgRound(l)}) scale(${m} ${g}) translate(${ot.svgRound(-a)} ${ot.svgRound(-l)})`}}}getPathResizedSVGProperties([t,e,n,r]){const[a,l]=this.#l(),c=this.#t,[h,d,f,m]=c;if(c[0]=t,c[1]=e,c[2]=n,c[3]=r,Math.abs(f-a)<=ot.PRECISION||Math.abs(m-l)<=ot.PRECISION){const S=t+n/2-(h+f/2),E=e+r/2-(d+m/2);for(const{line:_,points:C}of this.#i)ot._translate(_,S,E,_),ot._translate(C,S,E,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ot.svgRound(t)} ${ot.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(n-2*a)/(f-2*a),w=(r-2*l)/(m-2*l),b=-g*(h+a)+t+a,x=-w*(d+l)+e+l;if(g!==1||w!==1||b!==0||x!==0)for(const{line:S,points:E}of this.#i)ot._rescale(S,b,x,g,w,S),ot._rescale(E,b,x,g,w,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ot.svgRound(t)} ${ot.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],n){const[r,a]=n,l=this.#t,c=t-l[0],h=e-l[1];if(this.#r===r&&this.#s===a)for(const{line:d,points:f}of this.#i)ot._translate(d,c,h,d),ot._translate(f,c,h,f);else{const d=this.#r/r,f=this.#s/a;this.#r=r,this.#s=a;for(const{line:m,points:g}of this.#i)ot._rescale(m,c,h,d,f,m),ot._rescale(g,c,h,d,f,g);l[2]*=d,l[3]*=f}return l[0]=t,l[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ot.svgRound(t)} ${ot.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ot.svgRound(t[0])} ${ot.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Wl extends Qw{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:vt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Wl(this._viewParameters);return t.updateAll(this),t}}class ef extends bt{static _type="ink";static _editorType=Et.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){vt.initialize(t,e),this._defaultDrawingOptions=new Wl(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Mt(this,"typesMap",new Map([[It.INK_THICKNESS,"stroke-width"],[It.INK_COLOR,"stroke"],[It.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,r,a){return new IR(t,e,n,r,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,r,a,l){return Uo.deserialize(t,e,n,r,a,l)}static async deserialize(t,e,n){let r=null;if(t instanceof Zd){const{data:{inkLists:l,rect:c,rotation:h,id:d,color:f,opacity:m,borderStyle:{rawWidth:g},popupRef:w},parent:{page:{pageNumber:b}}}=t;r=t={annotationType:Et.INK,color:Array.from(f),thickness:g,opacity:m,paths:{points:l},boxes:null,pageIndex:b-1,rect:c.slice(0),rotation:h,annotationElementId:d,id:d,deleted:!1,popupRef:w}}const a=await super.deserialize(t,e,n);return a._initialData=r,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:n}){this._drawingOptions=ef.getDefaultDrawingOptions({stroke:pt.makeHexColor(...t),"stroke-width":e,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:n,rect:r}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":l,"stroke-width":c}}=this,h={annotationType:Et.INK,color:vt._colorManager.convert(a),opacity:l,thickness:c,paths:{lines:e,points:n},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(h.isCopy=!0,h):this.annotationElementId&&!this.#t(h)?null:(h.id=this.annotationElementId,h)}#t(t){const{color:e,thickness:n,opacity:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((l,c)=>l!==e[c])||t.thickness!==n||t.opacity!==r||t.pageIndex!==a}renderAnnotationElement(t){const{points:e,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:e}),null}}class qh extends Uo{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const gl=8,oo=3;class ss{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,n,r){return n-=t,r-=e,n===0?r>0?0:4:n===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,e,n,r,a,l,c){const h=this.#e(n,r,a,l);for(let d=0;d<8;d++){const f=(-d+h-c+16)%8,m=this.#n[2*f],g=this.#n[2*f+1];if(t[(n+m)*e+(r+g)]!==0)return f}return-1}static#r(t,e,n,r,a,l,c){const h=this.#e(n,r,a,l);for(let d=0;d<8;d++){const f=(d+h+c+16)%8,m=this.#n[2*f],g=this.#n[2*f+1];if(t[(n+m)*e+(r+g)]!==0)return f}return-1}static#s(t,e,n,r){const a=t.length,l=new Int32Array(a);for(let f=0;f<a;f++)l[f]=t[f]<=r?1:0;for(let f=1;f<n-1;f++)l[f*e]=l[f*e+e-1]=0;for(let f=0;f<e;f++)l[f]=l[e*n-1-f]=0;let c=1,h;const d=[];for(let f=1;f<n-1;f++){h=1;for(let m=1;m<e-1;m++){const g=f*e+m,w=l[g];if(w===0)continue;let b=f,x=m;if(w===1&&l[g-1]===0)c+=1,x-=1;else if(w>=1&&l[g+1]===0)c+=1,x+=1,w>1&&(h=w);else{w!==1&&(h=Math.abs(w));continue}const S=[m,f],E=x===m+1,_={isHole:E,points:S,id:c,parent:0};d.push(_);let C;for(const Y of d)if(Y.id===h){C=Y;break}C?C.isHole?_.parent=E?C.parent:h:_.parent=E?h:C.parent:_.parent=E?h:0;const R=this.#i(l,e,f,m,b,x,0);if(R===-1){l[g]=-c,l[g]!==1&&(h=Math.abs(l[g]));continue}let k=this.#n[2*R],N=this.#n[2*R+1];const O=f+k,L=m+N;b=O,x=L;let H=f,W=m;for(;;){const Y=this.#r(l,e,H,W,b,x,1);k=this.#n[2*Y],N=this.#n[2*Y+1];const ft=H+k,dt=W+N;S.push(dt,ft);const nt=H*e+W;if(l[nt+1]===0?l[nt]=-c:l[nt]===1&&(l[nt]=c),ft===f&&dt===m&&H===O&&W===L){l[g]!==1&&(h=Math.abs(l[g]));break}else b=H,x=W,H=ft,W=dt}}}return d}static#o(t,e,n,r){if(n-e<=4){for(let O=e;O<n-2;O+=2)r.push(t[O],t[O+1]);return}const a=t[e],l=t[e+1],c=t[n-4]-a,h=t[n-3]-l,d=Math.hypot(c,h),f=c/d,m=h/d,g=f*l-m*a,w=h/c,b=1/d,x=Math.atan(w),S=Math.cos(x),E=Math.sin(x),_=b*(Math.abs(S)+Math.abs(E)),C=b*(1-_+_**2),R=Math.max(Math.atan(Math.abs(E+S)*C),Math.atan(Math.abs(E-S)*C));let k=0,N=e;for(let O=e+2;O<n-2;O+=2){const L=Math.abs(g-f*t[O+1]+m*t[O]);L>k&&(N=O,k=L)}k>(d*R)**2?(this.#o(t,e,N+2,r),this.#o(t,N,n,r)):r.push(a,l)}static#a(t){const e=[],n=t.length;return this.#o(t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e}static#h(t,e,n,r,a,l){const c=new Float32Array(l**2),h=-2*r**2,d=l>>1;for(let x=0;x<l;x++){const S=(x-d)**2;for(let E=0;E<l;E++)c[x*l+E]=Math.exp((S+(E-d)**2)/h)}const f=new Float32Array(256),m=-2*a**2;for(let x=0;x<256;x++)f[x]=Math.exp(x**2/m);const g=t.length,w=new Uint8Array(g),b=new Uint32Array(256);for(let x=0;x<n;x++)for(let S=0;S<e;S++){const E=x*e+S,_=t[E];let C=0,R=0;for(let N=0;N<l;N++){const O=x+N-d;if(!(O<0||O>=n))for(let L=0;L<l;L++){const H=S+L-d;if(H<0||H>=e)continue;const W=t[O*e+H],Y=c[N*l+L]*f[Math.abs(W-_)];C+=W*Y,R+=Y}}const k=w[E]=Math.round(C/R);b[k]++}return[w,b]}static#l(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e}static#d(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let r=-1/0,a=1/0;for(let c=0,h=n.length;c<h;c++){if(t[(c<<2)+3]===0){r=n[c]=255;continue}const f=n[c]=t[c<<2];f>r&&(r=f),f<a&&(a=f)}const l=255/(r-a);for(let c=0;c<e;c++)n[c]=(n[c]-a)*l;return n}static#c(t){let e,n=-1/0,r=-1/0;const a=t.findIndex(h=>h!==0);let l=a,c=a;for(e=a;e<256;e++){const h=t[e];h>n&&(e-l>r&&(r=e-l,c=e-1),n=h,l=e)}for(e=c-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:n,height:r}=t,{maxDim:a}=this.#t;let l=n,c=r;if(n>a||r>a){let g=n,w=r,b=Math.log2(Math.max(n,r)/a);const x=Math.floor(b);b=b===x?x-1:x;for(let E=0;E<b;E++){l=Math.ceil(g/2),c=Math.ceil(w/2);const _=new OffscreenCanvas(l,c);_.getContext("2d").drawImage(t,0,0,g,w,0,0,l,c),g=l,w=c,t!==e&&t.close(),t=_.transferToImageBitmap()}const S=Math.min(a/l,a/c);l=Math.round(l*S),c=Math.round(c*S)}const d=new OffscreenCanvas(l,c).getContext("2d",{willReadFrequently:!0});d.filter="grayscale(1)",d.drawImage(t,0,0,t.width,t.height,0,0,l,c);const f=d.getImageData(0,0,l,c).data;return[this.#d(f),l,c]}static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:r},a,l,c,h){let d=new OffscreenCanvas(1,1),f=d.getContext("2d",{alpha:!1});const m=200,g=f.font=`${n} ${r} ${m}px ${e}`,{actualBoundingBoxLeft:w,actualBoundingBoxRight:b,actualBoundingBoxAscent:x,actualBoundingBoxDescent:S,fontBoundingBoxAscent:E,fontBoundingBoxDescent:_,width:C}=f.measureText(t),R=1.5,k=Math.ceil(Math.max(Math.abs(w)+Math.abs(b)||0,C)*R),N=Math.ceil(Math.max(Math.abs(x)+Math.abs(S)||m,Math.abs(E)+Math.abs(_)||m)*R);d=new OffscreenCanvas(k,N),f=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=g,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,k,N),f.fillStyle="black",f.fillText(t,k*(R-1)/2,N*(3-R)/2);const O=this.#d(f.getImageData(0,0,k,N).data),L=this.#l(O),H=this.#c(L),W=this.#s(O,k,N,H);return this.processDrawnLines({lines:{curves:W,width:k,height:N},pageWidth:a,pageHeight:l,rotation:c,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,n,r,a){const[l,c,h]=this.#f(t),[d,f]=this.#h(l,c,h,Math.hypot(c,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),m=this.#c(f),g=this.#s(d,c,h,m);return this.processDrawnLines({lines:{curves:g,width:c,height:h},pageWidth:e,pageHeight:n,rotation:r,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:r,innerMargin:a,mustSmooth:l,areContours:c}){r%180!==0&&([e,n]=[n,e]);const{curves:h,width:d,height:f}=t,m=t.thickness??0,g=[],w=Math.min(e/d,n/f),b=w/e,x=w/n,S=[];for(const{points:_}of h){const C=l?this.#a(_):_;if(!C)continue;S.push(C);const R=C.length,k=new Float32Array(R),N=new Float32Array(3*(R===2?2:R-2));if(g.push({line:N,points:k}),R===2){k[0]=C[0]*b,k[1]=C[1]*x,N.set([NaN,NaN,NaN,NaN,k[0],k[1]],0);continue}let[O,L,H,W]=C;O*=b,L*=x,H*=b,W*=x,k.set([O,L,H,W],0),N.set([NaN,NaN,NaN,NaN,O,L],0);for(let Y=4;Y<R;Y+=2){const ft=k[Y]=C[Y]*b,dt=k[Y+1]=C[Y+1]*x;N.set(ot.createBezierPoints(O,L,H,W,ft,dt),(Y-2)*3),[O,L,H,W]=[H,W,ft,dt]}}if(g.length===0)return null;const E=c?new qh:new Uo;return E.build(g,e,n,1,r,c?0:m,a),{outline:E,newCurves:S,areContours:c,thickness:m,width:d,height:f}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:r,height:a}){let l=1/0,c=-1/0,h=0;for(const C of t){h+=C.length;for(let R=2,k=C.length;R<k;R++){const N=C[R]-C[R-2];l=Math.min(l,N),c=Math.max(c,N)}}let d;l>=-128&&c<=127?d=Int8Array:l>=-32768&&c<=32767?d=Int16Array:d=Int32Array;const f=t.length,m=gl+oo*f,g=new Uint32Array(m);let w=0;g[w++]=m*Uint32Array.BYTES_PER_ELEMENT+(h-2*f)*d.BYTES_PER_ELEMENT,g[w++]=0,g[w++]=r,g[w++]=a,g[w++]=e?0:1,g[w++]=Math.max(0,Math.floor(n??0)),g[w++]=f,g[w++]=d.BYTES_PER_ELEMENT;for(const C of t)g[w++]=C.length-2,g[w++]=C[0],g[w++]=C[1];const b=new CompressionStream("deflate-raw"),x=b.writable.getWriter();await x.ready,x.write(g);const S=d.prototype.constructor;for(const C of t){const R=new S(C.length-2);for(let k=2,N=C.length;k<N;k++)R[k-2]=C[k]-C[k-2];x.write(R)}x.close();const E=await new Response(b.readable).arrayBuffer(),_=new Uint8Array(E);return xw(_)}static async decompressSignature(t){try{const e=cP(t),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),a=r.getWriter();await a.ready,a.write(e).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let l=null,c=0;for await(const C of n)l||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),l.set(C,c),c+=C.length;const h=new Uint32Array(l.buffer,0,l.length>>2),d=h[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const f=h[2],m=h[3],g=h[4]===0,w=h[5],b=h[6],x=h[7],S=[],E=(gl+oo*b)*Uint32Array.BYTES_PER_ELEMENT;let _;switch(x){case Int8Array.BYTES_PER_ELEMENT:_=new Int8Array(l.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:_=new Int16Array(l.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:_=new Int32Array(l.buffer,E);break}c=0;for(let C=0;C<b;C++){const R=h[oo*C+gl],k=new Float32Array(R+2);S.push(k);for(let N=0;N<oo-1;N++)k[N]=h[oo*C+gl+N+1];for(let N=0;N<R;N++)k[N+2]=k[N]+_[c++]}return{areContours:g,thickness:w,outlines:S,width:f,height:m}}catch(e){return Ct(`decompressSignature: ${e}`),null}}}class nf extends Qw{constructor(){super(),super.updateProperties({fill:vt._defaultLineColor,"stroke-width":0})}clone(){const t=new nf;return t.updateAll(this),t}}class sf extends Wl{constructor(t){super(t),super.updateProperties({stroke:vt._defaultLineColor,"stroke-width":1})}clone(){const t=new sf(this._viewParameters);return t.updateAll(this),t}}class On extends bt{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=Et.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){vt.initialize(t,e),this._defaultDrawingOptions=new nf,this._defaultDrawnSignatureOptions=new sf(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Mt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:r,mustSmooth:a,areContours:l,description:c,uuid:h,heightInPage:d}=this.#n,{rawDims:{pageWidth:f,pageHeight:m},rotation:g}=this.parent.viewport,w=ss.processDrawnLines({lines:r,pageWidth:f,pageHeight:m,rotation:g,innerMargin:On._INNER_MARGIN,mustSmooth:a,areContours:l});this.addSignature(w,d,c,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return n&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:n,width:r,height:a}=this.#n,l=Math.max(r,a),c=ss.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:n,width:r,height:a},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,n,r){const{x:a,y:l}=this,{outline:c}=this.#n=t;this.#t=c instanceof qh,this.description=n,this.div.setAttribute("data-l10n-args",JSON.stringify({description:n}));let h;this.#t?h=On.getDefaultDrawingOptions():(h=On._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:h});const[d,f]=this.parentDimensions,[,m]=this.pageDimensions;let g=e/m;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(d*this.width,f*this.height),this.x=a,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:r}=this.parent.viewport;return ss.process(t,e,n,r,On._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:a}=this.parent.viewport;return ss.extractContoursFromText(t,e,n,r,a,On._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:r}=this.parent.viewport;return ss.processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:r,innerMargin:On._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=On.getDefaultDrawingOptions():(this._drawingOptions=On._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:n,rect:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,l={annotationType:Et.SIGNATURE,isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(l.paths={lines:e,points:n},l.uuid=this.#i,l.isCopy=!0):l.lines=e,this.#e&&(l.accessibilityData={type:"Figure",alt:this.#e}),l}static deserializeDraw(t,e,n,r,a,l){return l.areContours?qh.deserialize(t,e,n,r,a,l):Uo.deserialize(t,e,n,r,a,l)}static async deserialize(t,e,n){const r=await super.deserialize(t,e,n);return r.#t=t.areContours,r.#e=t.accessibilityData?.alt||"",r.#i=t.uuid,r}}class DR extends vt{#t=null;#e=null;#n=null;#i=null;#r=null;#s="";#o=null;#a=!1;#h=null;#l=!1;#d=!1;static _type="stamp";static _editorType=Et.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){vt.initialize(t,e)}static isHandlingMimeForPasting(t){return Dl.includes(t)}static paste(t,e){e.pasteEditor({mode:Et.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#c(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#s=t.file.name),this.#m()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#o){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:l}=t||this.copyCanvas(null,null,!0).imageData,c=await n.guess({name:"altText",request:{data:r,width:a,height:l,channels:r.length/(a*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const h=c.output;return await this.setGuessedAltText(h),e&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#p(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(n=>this.#c(n,!0)).finally(()=>this.#f());return}if(this.#i){const n=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(n).then(r=>this.#c(r)).finally(()=>this.#f());return}if(this.#r){const n=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(n).then(r=>this.#c(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Dl.join(",");const e=this._uiManager._signal;this.#n=new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#c(r)}n()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#o?.remove(),this.#o=null,this.#h&&(clearTimeout(this.#h),this.#h=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#p();return}super.rebuild(),this.div!==null&&(this.#e&&this.#o===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#r||this.#e||this.#a)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#a||(this.#t?this.#m():this.#p()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:n,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#e=n,r&&(this.#t=r),this.#a=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#h!==null&&clearTimeout(this.#h);const t=200;this.#h=setTimeout(()=>{this.#h=null,this.#g()},t)}#m(){const{div:t}=this;let{width:e,height:n}=this.#t;const[r,a]=this.pageDimensions,l=.75;if(this.width)e=this.width*r,n=this.height*a;else if(e>l*r||n>l*a){const f=Math.min(l*r/e,l*a/n);e*=f,n*=f}const[c,h]=this.parentDimensions;this.setDims(e*c/r,n*h/a),this._uiManager.enableWaiting(!1);const d=this.#o=document.createElement("canvas");d.setAttribute("role","img"),this.addContainer(d),this.width=e/r,this.height=n/a,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#g(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,n=!1){t||(t=224);const{width:r,height:a}=this.#t,l=new Tn;let c=this.#t,h=r,d=a,f=null;if(e){if(r>e||a>e){const N=Math.min(e/r,e/a);h=Math.floor(r*N),d=Math.floor(a*N)}f=document.createElement("canvas");const g=f.width=Math.ceil(h*l.sx),w=f.height=Math.ceil(d*l.sy);this.#l||(c=this.#u(g,w));const b=f.getContext("2d");b.filter=this._uiManager.hcmFilter;let x="white",S="#cfcfd8";this._uiManager.hcmFilter!=="none"?S="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(x="#8f8f9d",S="#42414d");const E=15,_=E*l.sx,C=E*l.sy,R=new OffscreenCanvas(_*2,C*2),k=R.getContext("2d");k.fillStyle=x,k.fillRect(0,0,_*2,C*2),k.fillStyle=S,k.fillRect(0,0,_,C),k.fillRect(_,C,_,C),b.fillStyle=b.createPattern(R,"repeat"),b.fillRect(0,0,g,w),b.drawImage(c,0,0,c.width,c.height,0,0,g,w)}let m=null;if(n){let g,w;if(l.symmetric&&c.width<t&&c.height<t)g=c.width,w=c.height;else if(c=this.#t,r>t||a>t){const S=Math.min(t/r,t/a);g=Math.floor(r*S),w=Math.floor(a*S),this.#l||(c=this.#u(g,w))}const x=new OffscreenCanvas(g,w).getContext("2d",{willReadFrequently:!0});x.drawImage(c,0,0,c.width,c.height,0,0,g,w),m={width:g,height:w,data:x.getImageData(0,0,g,w).data}}return{canvas:f,width:h,height:d,imageData:m}}#u(t,e){const{width:n,height:r}=this.#t;let a=n,l=r,c=this.#t;for(;a>2*t||l>2*e;){const h=a,d=l;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const f=new OffscreenCanvas(a,l);f.getContext("2d").drawImage(c,0,0,h,d,0,0,a,l),c=f.transferToImageBitmap()}return c}#g(){const[t,e]=this.parentDimensions,{width:n,height:r}=this,a=new Tn,l=Math.ceil(n*t*a.sx),c=Math.ceil(r*e*a.sy),h=this.#o;if(!h||h.width===l&&h.height===c)return;h.width=l,h.height=c;const d=this.#l?this.#t:this.#u(l,c),f=h.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(d,0,0,d.width,d.height,0,0,l,c)}#y(t){if(t){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,n]=this.pageDimensions,r=Math.round(this.width*e*hs.PDF_TO_CSS_UNITS),a=Math.round(this.height*n*hs.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,a);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,a),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,n){let r=null,a=!1;if(t instanceof Kw){const{data:{rect:x,rotation:S,id:E,structParent:_,popupRef:C},container:R,parent:{page:{pageNumber:k}},canvas:N}=t;let O,L;N?(delete t.canvas,{id:O,bitmap:L}=n.imageManager.getFromCanvas(R.id,N),N.remove()):(a=!0,t._hasNoCanvas=!0);const H=(await e._structTree.getAriaAttributes(`${Vd}${E}`))?.get("aria-label")||"";r=t={annotationType:Et.STAMP,bitmapId:O,bitmap:L,pageIndex:k-1,rect:x.slice(0),rotation:S,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:H},isSvg:!1,structParent:_,popupRef:C}}const l=await super.deserialize(t,e,n),{rect:c,bitmap:h,bitmapUrl:d,bitmapId:f,isSvg:m,accessibilityData:g}=t;a?(n.addMissingCanvas(t.id,l),l.#a=!0):f&&n.imageManager.isValidId(f)?(l.#e=f,h&&(l.#t=h)):l.#i=d,l.#l=m;const[w,b]=l.pageDimensions;return l.width=(c[2]-c[0])/w,l.height=(c[3]-c[1])/b,g&&(l.altTextData=g),l._initialData=r,l.#d=!!r,l}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:Et.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#l,structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=this.#y(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(n.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=this.#v(n);if(c.isSame)return null;c.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,e===null)return n;e.stamps||=new Map;const l=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:l,serialized:n}),n.bitmap=this.#y(!1);else if(this.#l){const c=e.stamps.get(this.#e);l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=this.#y(!1))}return n}#v(t){const{pageIndex:e,accessibilityData:{altText:n}}=this._initialData,r=t.pageIndex===e,a=(t.accessibilityData?.alt||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&a,isSameAltText:a}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}class Bn{#t;#e=!1;#n=null;#i=null;#r=null;#s=new Map;#o=!1;#a=!1;#h=!1;#l=null;#d=null;#c=null;#f=null;#p=null;#m=-1;#u;static _initialized=!1;static#g=new Map([me,ef,DR,se,On].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:r,accessibilityManager:a,annotationLayer:l,drawLayer:c,textLayer:h,viewport:d,l10n:f}){const m=[...Bn.#g.values()];if(!Bn._initialized){Bn._initialized=!0;for(const g of m)g.initialize(f,t)}t.registerEditorTypes(m),this.#u=t,this.pageIndex=e,this.div=n,this.#t=a,this.#n=l,this.viewport=d,this.#c=h,this.drawLayer=c,this._structTree=r,this.#u.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===Et.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#A(),t){case Et.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Et.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Et.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of Bn.#g.values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#c?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}async enable(){this.#h=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#p?.abort(),this.#p=null;const t=new Set;for(const n of this.#s.values())n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#u.removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!this.#n){this.#h=!1;return}const e=this.#n.getEditableAnnotations();for(const n of e){if(n.hide(),this.#u.isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}this.#h=!1}disable(){if(this.#a=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#c&&!this.#p){this.#p=new AbortController;const r=this.#u.combinedSignal(this.#p);this.#c.div.addEventListener("pointerdown",a=>{const{clientX:c,clientY:h,timeStamp:d}=a,f=this.#m;if(d-f>500){this.#m=d;return}this.#m=-1;const{classList:m}=this.div;m.toggle("getElements",!0);const g=document.elementsFromPoint(c,h);if(m.toggle("getElements",!1),!this.div.contains(g[0]))return;let w;const b=new RegExp(`^${gw}[0-9]+$`);for(const S of g)if(b.test(S.id)){w=S.id;break}if(!w)return;const x=this.#s.get(w);x?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),x.dblclick())},{signal:r,capture:!0})}const t=new Map,e=new Map;for(const r of this.#s.values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);this.getEditableAnnotation(r.annotationElementId)?.show(),r.remove()}if(this.#n){const r=this.#n.getEditableAnnotations();for(const a of r){const{id:l}=a.data;if(this.#u.isDeletedAnnotationElement(l))continue;let c=e.get(l);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=t.get(l),c&&(this.#u.addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of Bn.#g.values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#a=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#c?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#c.div.addEventListener("pointerdown",this.#y.bind(this),{signal:t}),this.#c.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#c?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#c.div.classList.remove("highlighting"))}#y(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#c.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#c.div.contains(e)){const{isMac:n}=Ae.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#u.showAllEditors("highlight",!0,!0),this.#c.div.classList.add("free"),this.toggleDrawing(),se.startHighlighting(this,this.#u.direction==="ltr",{target:this.#c.div,x:t.x,y:t.y}),this.#c.div.addEventListener("pointerup",()=>{this.#c.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#a&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),vt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#h),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return this.#u.getId()}get#v(){return Bn.#g.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#b(t){const e=this.#v;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:n,offsetY:r}=this.#x(),a=this.getNextId(),l=this.#b({parent:this,id:a,x:n,y:r,uiManager:this.#u,isCentered:!0,...e});l&&this.add(l)}async deserialize(t){return await Bn.#g.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,n={}){const r=this.getNextId(),a=this.#b({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...n});return a&&this.add(a),a}#x(){const{x:t,y:e,width:n,height:r}=this.div.getBoundingClientRect(),a=Math.max(0,t),l=Math.max(0,e),c=Math.min(window.innerWidth,t+n),h=Math.min(window.innerHeight,e+r),d=(a+c)/2-t,f=(l+h)/2-e,[m,g]=this.viewport.rotation%180===0?[d,f]:[f,d];return{offsetX:m,offsetY:g}}addNewEditor(t={}){this.createAndAddNewEditor(this.#x(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=Ae.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#o||(this.#o=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const n=this.#u.getMode();if(n===Et.STAMP||n===Et.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===Et.HIGHLIGHT&&this.enableTextSelection(),this.#o){this.#o=!1;return}const{isMac:e}=Ae.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#o=!0,this.#v?.isDrawer){this.startDrawingSession(t);return}const n=this.#u.getActive();this.#e=!n||n.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#v.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#v.endDrawing(t)):null}findNewParent(t,e,n){const r=this.#u.findParent(e,n);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#u.removeLayer(this)}#A(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Fi(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#A();const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Fi(this.div,{rotation:n}),e!==n)for(const r of this.#s.values())r.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class be{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return Mt(this,"_svgFactory",new Po)}static#r(t,[e,n,r,a]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*r}%`,l.height=`${100*a}%`}#s(){const t=be._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#o(t,e){const n=be._svgFactory.createElement("clipPath");t.append(n);const r=`clip_${e}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const a=be._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),r}#a(t,e){for(const[n,r]of Object.entries(e))r===null?t.removeAttribute(n):t.setAttribute(n,r)}draw(t,e=!1,n=!1){const r=be.#i++,a=this.#s(),l=be._svgFactory.createElement("defs");a.append(l);const c=be._svgFactory.createElement("path");l.append(c);const h=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",h),c.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#n.set(r,c);const d=n?this.#o(l,h):null,f=be._svgFactory.createElement("use");return a.append(f),f.setAttribute("href",`#${h}`),this.updateProperties(a,t),this.#e.set(r,a),{id:r,clipPathId:`url(#${d})`}}drawOutline(t,e){const n=be.#i++,r=this.#s(),a=be._svgFactory.createElement("defs");r.append(a);const l=be._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const m=be._svgFactory.createElement("mask");a.append(m),h=`mask_p${this.pageIndex}_${n}`,m.setAttribute("id",h),m.setAttribute("maskUnits","objectBoundingBox");const g=be._svgFactory.createElement("rect");m.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");const w=be._svgFactory.createElement("use");m.append(w),w.setAttribute("href",`#${c}`),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const d=be._svgFactory.createElement("use");r.append(d),d.setAttribute("href",`#${c}`),h&&d.setAttribute("mask",`url(#${h})`);const f=d.cloneNode();return r.append(f),d.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(n,r),n}finalizeDraw(t,e){this.#n.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:n,bbox:r,rootClass:a,path:l}=e,c=typeof t=="number"?this.#e.get(t):t;if(c){if(n&&this.#a(c,n),r&&be.#r(c,r),a){const{classList:h}=c;for(const[d,f]of Object.entries(a))h.toggle(d,f)}if(l){const d=c.firstChild.firstChild;this.#a(d,l)}}}updateParent(t,e){if(e===this)return;const n=this.#e.get(t);n&&(e.#t.append(n),this.#e.delete(t),e.#e.set(t,n))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Xh};globalThis.pdfjsLib={AbortException:ai,AnnotationEditorLayer:Bn,AnnotationEditorParamsType:It,AnnotationEditorType:Et,AnnotationEditorUIManager:li,AnnotationLayer:tf,AnnotationMode:Vn,AnnotationType:ie,build:Hw,ColorPicker:tn,createValidAbsoluteUrl:Od,DOMSVGFactory:Po,DrawLayer:be,FeatureTest:Ae,fetchData:pr,getDocument:qd,getFilenameFromUrl:Aw,getPdfFilenameFromUrl:Sw,getUuid:Bd,getXfaPageViewport:Ew,GlobalWorkerOptions:Ii,ImageKind:go,InvalidPDFException:Il,isDataScheme:Vo,isPdfFile:$l,isValidExplicitDest:kw,MathClamp:Ie,noContextMenu:mn,normalizeUnicode:bw,OPS:Co,OutputScale:Tn,PasswordResponses:vw,PDFDataRangeTransport:Qd,PDFDateString:zd,PDFWorker:xe,PermissionFlag:yw,PixelsPerInch:hs,RenderingCancelledException:Hl,ResponseException:_o,setLayerDimensions:Fi,shadow:Mt,SignatureExtractor:ss,stopEvent:oe,SupportedImageMimeTypes:Dl,TextLayer:To,TouchManager:Ho,updateUrlHash:jd,Util:pt,VerbosityLevel:Oo,version:zw,XfaLayer:Jd};const NR=Object.freeze(Object.defineProperty({__proto__:null,AbortException:ai,AnnotationEditorLayer:Bn,AnnotationEditorParamsType:It,AnnotationEditorType:Et,AnnotationEditorUIManager:li,AnnotationLayer:tf,AnnotationMode:Vn,AnnotationType:ie,ColorPicker:tn,DOMSVGFactory:Po,DrawLayer:be,FeatureTest:Ae,GlobalWorkerOptions:Ii,ImageKind:go,InvalidPDFException:Il,MathClamp:Ie,OPS:Co,OutputScale:Tn,PDFDataRangeTransport:Qd,PDFDateString:zd,PDFWorker:xe,PasswordResponses:vw,PermissionFlag:yw,PixelsPerInch:hs,RenderingCancelledException:Hl,ResponseException:_o,SignatureExtractor:ss,SupportedImageMimeTypes:Dl,TextLayer:To,TouchManager:Ho,Util:pt,VerbosityLevel:Oo,XfaLayer:Jd,build:Hw,createValidAbsoluteUrl:Od,fetchData:pr,getDocument:qd,getFilenameFromUrl:Aw,getPdfFilenameFromUrl:Sw,getUuid:Bd,getXfaPageViewport:Ew,isDataScheme:Vo,isPdfFile:$l,isValidExplicitDest:kw,noContextMenu:mn,normalizeUnicode:bw,setLayerDimensions:Fi,shadow:Mt,stopEvent:oe,updateUrlHash:jd,version:zw},Symbol.toStringTag,{value:"Module"}));var Xy=Object.prototype.hasOwnProperty;function Ky(i,t,e){for(e of i.keys())if(er(e,t))return e}function er(i,t){var e,n,r;if(i===t)return!0;if(i&&t&&(e=i.constructor)===t.constructor){if(e===Date)return i.getTime()===t.getTime();if(e===RegExp)return i.toString()===t.toString();if(e===Array){if((n=i.length)===t.length)for(;n--&&er(i[n],t[n]););return n===-1}if(e===Set){if(i.size!==t.size)return!1;for(n of i)if(r=n,r&&typeof r=="object"&&(r=Ky(t,r),!r)||!t.has(r))return!1;return!0}if(e===Map){if(i.size!==t.size)return!1;for(n of i)if(r=n[0],r&&typeof r=="object"&&(r=Ky(t,r),!r)||!er(n[1],t.get(r)))return!1;return!0}if(e===ArrayBuffer)i=new Uint8Array(i),t=new Uint8Array(t);else if(e===DataView){if((n=i.byteLength)===t.byteLength)for(;n--&&i.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(i)){if((n=i.byteLength)===t.byteLength)for(;n--&&i[n]===t[n];);return n===-1}if(!e||typeof i=="object"){n=0;for(e in i)if(Xy.call(i,e)&&++n&&!Xy.call(t,e)||!(e in t)||!er(i[e],t[e]))return!1;return Object.keys(t).length===n}}return i!==i&&t!==t}function Wo(i){let t=!1;return{promise:new Promise((n,r)=>{i.then(a=>!t&&n(a)).catch(a=>!t&&r(a))}),cancel(){t=!0}}}const FR=["onCopy","onCut","onPaste"],OR=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],jR=["onFocus","onBlur"],BR=["onInput","onInvalid","onReset","onSubmit"],VR=["onLoad","onError"],zR=["onKeyDown","onKeyPress","onKeyUp"],HR=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],$R=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],UR=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],WR=["onSelect"],GR=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],XR=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],KR=["onScroll"],qR=["onWheel"],YR=["onAnimationStart","onAnimationEnd","onAnimationIteration"],QR=["onTransitionEnd"],JR=["onToggle"],ZR=["onChange"],tM=[...FR,...OR,...jR,...BR,...VR,...zR,...HR,...$R,...UR,...WR,...GR,...XR,...KR,...qR,...YR,...QR,...ZR,...JR];function Jw(i,t){const e={};for(const n of tM){const r=i[n];r&&(t?e[n]=(a=>r(a,t(n))):e[n]=r)}return e}var eM="Invariant failed";function Vt(i,t){if(!i)throw new Error(eM)}var mh,qy;function nM(){if(qy)return mh;qy=1;var i=function(){};return mh=i,mh}var iM=nM();const De=iv(iM),Zw=P.createContext(null),sM="noopener noreferrer nofollow";class rM{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Vt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Vt(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{Vt(this.pdfDocument),Vt(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{Vt(Array.isArray(e));const n=e[0];new Promise(r=>{Vt(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(a=>{r(a)}).catch(()=>{Vt(!1)}):typeof n=="number"?r(n):Vt(!1)}).then(r=>{const a=r+1;Vt(this.pdfViewer),Vt(a>=1&&a<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:r,pageNumber:a})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;Vt(this.pdfViewer),Vt(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||sM,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}function nr({children:i,type:t}){return F.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:i})}const Yy={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function oM(i,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function rr(){return P.useReducer(oM,{value:void 0,error:void 0})}const Gl=typeof window<"u",tb=Gl&&window.location.protocol==="file:";function aM(i){return typeof i<"u"}function ns(i){return aM(i)&&i!==null}function lM(i){return typeof i=="string"}function cM(i){return i instanceof ArrayBuffer}function uM(i){return Vt(Gl),i instanceof Blob}function Yh(i){return lM(i)&&/^data:/.test(i)}function Qy(i){Vt(Yh(i));const[t="",e=""]=i.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function hM(){return Gl&&window.devicePixelRatio||1}const eb="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Jy(){De(!tb,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${eb}`)}function dM(){De(!tb,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${eb}`)}function fs(i){i?.cancel&&i.cancel()}function Qh(i,t){return Object.defineProperty(i,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function fM(i){return i.name==="RenderingCancelledException"}function pM(i){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=r=>{if(!r.target)return e(new Error("Error while reading a file."));const{error:a}=r.target;if(!a)return e(new Error("Error while reading a file."));switch(a.code){case a.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case a.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case a.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(i)})}const{PDFDataRangeTransport:mM}=NR,gM=(i,t)=>{switch(t){case Yy.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");i(e);break}case Yy.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");i(e);break}}};function Zy(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const yM=P.forwardRef(function({children:t,className:e,error:n="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:a,file:l,inputRef:c,imageResourcesPath:h,loading:d="Loading PDF…",noData:f="No PDF file specified.",onItemClick:m,onLoadError:g,onLoadProgress:w,onLoadSuccess:b,onPassword:x=gM,onSourceError:S,onSourceSuccess:E,options:_,renderMode:C,rotate:R,scale:k,...N},O){const[L,H]=rr(),{value:W,error:Y}=L,[ft,dt]=rr(),{value:nt,error:xt}=ft,G=P.useRef(new rM),U=P.useRef([]),B=P.useRef(void 0),tt=P.useRef(void 0);l&&l!==B.current&&Zy(l)&&(De(!er(l,B.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),B.current=l),_&&_!==tt.current&&(De(!er(_,tt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),tt.current=_);const Q=P.useRef({scrollPageIntoView:Lt=>{const{dest:jt,pageNumber:Qt,pageIndex:te=Qt-1}=Lt;if(m){m({dest:jt,pageIndex:te,pageNumber:Qt});return}const Pn=U.current[te];if(Pn){Pn.scrollIntoView();return}De(!1,`An internal link leading to page ${Qt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});P.useImperativeHandle(O,()=>({linkService:G,pages:U,viewer:Q}),[]);function D(){E&&E()}function $(){Y&&(De(!1,Y.toString()),S&&S(Y))}function Z(){H({type:"RESET"})}P.useEffect(Z,[l,H]);const st=P.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return Yh(l)?{data:Qy(l)}:(Jy(),{url:l});if(l instanceof mM)return{range:l};if(cM(l))return{data:l};if(Gl&&uM(l))return{data:await pM(l)};if(Vt(typeof l=="object"),Vt(Zy(l)),"url"in l&&typeof l.url=="string"){if(Yh(l.url)){const{url:Lt,...jt}=l;return{data:Qy(Lt),...jt}}Jy()}return l},[l]);P.useEffect(()=>{const Lt=Wo(st());return Lt.promise.then(jt=>{H({type:"RESOLVE",value:jt})}).catch(jt=>{H({type:"REJECT",error:jt})}),()=>{fs(Lt)}},[st,H]),P.useEffect(()=>{if(!(typeof W>"u")){if(W===!1){$();return}D()}},[W]);function mt(){nt&&(b&&b(nt),U.current=new Array(nt.numPages),G.current.setDocument(nt))}function wt(){xt&&(De(!1,xt.toString()),g&&g(xt))}P.useEffect(function(){dt({type:"RESET"})},[dt,W]),P.useEffect(function(){if(!W)return;const jt=_?{...W,..._}:W,Qt=qd(jt);w&&(Qt.onProgress=w),x&&(Qt.onPassword=x);const te=Qt,Pn=te.promise.then(ui=>{dt({type:"RESOLVE",value:ui})}).catch(ui=>{te.destroyed||dt({type:"REJECT",error:ui})});return()=>{Pn.finally(()=>te.destroy())}},[_,dt,W]),P.useEffect(()=>{if(!(typeof nt>"u")){if(nt===!1){wt();return}mt()}},[nt]),P.useEffect(function(){G.current.setViewer(Q.current),G.current.setExternalLinkRel(r),G.current.setExternalLinkTarget(a)},[r,a]);const et=P.useCallback((Lt,jt)=>{U.current[Lt]=jt},[]),_t=P.useCallback(Lt=>{delete U.current[Lt]},[]),kt=P.useMemo(()=>({imageResourcesPath:h,linkService:G.current,onItemClick:m,pdf:nt,registerPage:et,renderMode:C,rotate:R,scale:k,unregisterPage:_t}),[h,m,nt,et,C,R,k,_t]),Tt=P.useMemo(()=>Jw(N,()=>nt),[N,nt]);function ge(){function Lt(Qt){return!!Qt?.pdf}if(!Lt(kt))throw new Error("pdf is undefined");const jt=typeof t=="function"?t(kt):t;return F.jsx(Zw.Provider,{value:kt,children:jt})}function Se(){return l?nt==null?F.jsx(nr,{type:"loading",children:typeof d=="function"?d():d}):nt===!1?F.jsx(nr,{type:"error",children:typeof n=="function"?n():n}):ge():F.jsx(nr,{type:"no-data",children:typeof f=="function"?f():f})}return F.jsx("div",{className:lr("react-pdf__Document",e),ref:c,...Tt,children:Se()})});function nb(){return P.useContext(Zw)}function ib(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var e=i.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(a){for(var l=0,c=e;l<c.length;l++){var h=c[l];typeof h=="function"?h(a):h&&(h.current=a)}}}const sb=P.createContext(null);function Xl(){return P.useContext(sb)}function vM(){const i=nb(),t=Xl();Vt(t);const e={...i,...t},{imageResourcesPath:n,linkService:r,onGetAnnotationsError:a,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:h,page:d,pdf:f,renderForms:m,rotate:g,scale:w=1}=e;Vt(f),Vt(d),Vt(r);const[b,x]=rr(),{value:S,error:E}=b,_=P.useRef(null);De(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function C(){S&&l&&l(S)}function R(){E&&(De(!1,E.toString()),a&&a(E))}P.useEffect(function(){x({type:"RESET"})},[x,d]),P.useEffect(function(){if(!d)return;const H=Wo(d.getAnnotations()),W=H;return H.promise.then(Y=>{x({type:"RESOLVE",value:Y})}).catch(Y=>{x({type:"REJECT",error:Y})}),()=>{fs(W)}},[x,d]),P.useEffect(()=>{if(S!==void 0){if(S===!1){R();return}C()}},[S]);function k(){h&&h()}function N(L){De(!1,`${L}`),c&&c(L)}const O=P.useMemo(()=>d.getViewport({scale:w,rotation:g}),[d,g,w]);return P.useEffect(function(){if(!f||!d||!r||!S)return;const{current:H}=_;if(!H)return;const W=O.clone({dontFlip:!0}),Y={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:H,l10n:null,page:d,structTreeLayer:null,viewport:W},ft={annotations:S,annotationStorage:f.annotationStorage,div:H,imageResourcesPath:n,linkService:r,page:d,renderForms:m,viewport:W};H.innerHTML="";try{new tf(Y).render(ft),k()}catch(dt){N(dt)}return()=>{}},[S,n,r,d,f,m,O]),F.jsx("div",{className:lr("react-pdf__Page__annotations","annotationLayer"),ref:_})}const rb={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},wM=/^H(\d+)$/;function bM(i){return i in rb}function Kl(i){return"children"in i}function ob(i){return Kl(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function xM(i){const t={};if(Kl(i)){const{role:e}=i,n=e.match(wM);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(bM(e)){const r=rb[e];r&&(t.role=r)}}return t}function ab(i){const t={};if(Kl(i)){if(i.alt!==void 0&&(t["aria-label"]=i.alt),i.lang!==void 0&&(t.lang=i.lang),ob(i)){const[e]=i.children;if(e){const n=ab(e);return{...t,...n}}}}else"id"in i&&(t["aria-owns"]=i.id);return t}function AM(i){return i?{...xM(i),...ab(i)}:null}function lb({className:i,node:t}){const e=P.useMemo(()=>AM(t),[t]),n=P.useMemo(()=>!Kl(t)||ob(t)?null:t.children.map((r,a)=>F.jsx(lb,{node:r},a)),[t]);return F.jsx("span",{className:i,...e,children:n})}function SM(){const i=Xl();Vt(i);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=i,[n,r]=rr(),{value:a,error:l}=n,{customTextRenderer:c,page:h}=i;function d(){a&&e&&e(a)}function f(){l&&(De(!1,l.toString()),t&&t(l))}return P.useEffect(function(){r({type:"RESET"})},[r,h]),P.useEffect(function(){if(c||!h)return;const g=Wo(h.getStructTree()),w=g;return g.promise.then(b=>{r({type:"RESOLVE",value:b})}).catch(b=>{r({type:"REJECT",error:b})}),()=>fs(w)},[c,h,r]),P.useEffect(()=>{if(a!==void 0){if(a===!1){f();return}d()}},[a]),a?F.jsx(lb,{className:"react-pdf__Page__structTree structTree",node:a}):null}const tv=Vn;function EM(i){const t=Xl();Vt(t);const e={...t,...i},{_className:n,canvasBackground:r,devicePixelRatio:a=hM(),onRenderError:l,onRenderSuccess:c,page:h,renderForms:d,renderTextLayer:f,rotate:m,scale:g}=e,{canvasRef:w}=i;Vt(h);const b=P.useRef(null);function x(){h&&c&&c(Qh(h,g))}function S(R){fM(R)||(De(!1,R.toString()),l&&l(R))}const E=P.useMemo(()=>h.getViewport({scale:g*a,rotation:m}),[a,h,m,g]),_=P.useMemo(()=>h.getViewport({scale:g,rotation:m}),[h,m,g]);P.useEffect(function(){if(!h)return;h.cleanup();const{current:k}=b;if(!k)return;k.width=E.width,k.height=E.height,k.style.width=`${Math.floor(_.width)}px`,k.style.height=`${Math.floor(_.height)}px`,k.style.visibility="hidden";const N={annotationMode:d?tv.ENABLE_FORMS:tv.ENABLE,canvasContext:k.getContext("2d",{alpha:!1}),viewport:E};r&&(N.background=r);const O=h.render(N),L=O;return O.promise.then(()=>{k.style.visibility="",x()}).catch(S),()=>fs(L)},[r,h,d,E,_]);const C=P.useCallback(()=>{const{current:R}=b;R&&(R.width=0,R.height=0)},[]);return P.useEffect(()=>C,[C]),F.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:ib(w,b),style:{display:"block",userSelect:"none"},children:f?F.jsx(SM,{}):null})}function CM(i){return"str"in i}function _M(){const i=Xl();Vt(i);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:r,onRenderTextLayerSuccess:a,page:l,pageIndex:c,pageNumber:h,rotate:d,scale:f}=i;Vt(l);const[m,g]=rr(),{value:w,error:b}=m,x=P.useRef(null);De(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function S(){w&&n&&n(w)}function E(){b&&(De(!1,b.toString()),e&&e(b))}P.useEffect(function(){g({type:"RESET"})},[l,g]),P.useEffect(function(){if(!l)return;const L=Wo(l.getTextContent()),H=L;return L.promise.then(W=>{g({type:"RESOLVE",value:W})}).catch(W=>{g({type:"REJECT",error:W})}),()=>fs(H)},[l,g]),P.useEffect(()=>{if(w!==void 0){if(w===!1){E();return}S()}},[w]);const _=P.useCallback(()=>{a&&a()},[a]),C=P.useCallback(O=>{De(!1,O.toString()),r&&r(O)},[r]);function R(){const O=x.current;O&&O.classList.add("selecting")}function k(){const O=x.current;O&&O.classList.remove("selecting")}const N=P.useMemo(()=>l.getViewport({scale:f,rotation:d}),[l,d,f]);return P.useLayoutEffect(function(){if(!l||!w)return;const{current:L}=x;if(!L)return;L.innerHTML="";const H=l.streamTextContent({includeMarkedContent:!0}),W={container:L,textContentSource:H,viewport:N},Y=new To(W),ft=Y;return Y.render().then(()=>{const dt=document.createElement("div");dt.className="endOfContent",L.append(dt);const nt=L.querySelectorAll('[role="presentation"]');if(t){let xt=0;w.items.forEach((G,U)=>{if(!CM(G))return;const B=nt[xt];if(!B)return;const tt=t({pageIndex:c,pageNumber:h,itemIndex:U,...G});B.innerHTML=tt,xt+=G.str&&G.hasEOL?2:1})}_()}).catch(C),()=>fs(ft)},[t,C,_,l,c,h,w,N]),F.jsx("div",{className:lr("react-pdf__Page__textContent","textLayer"),onMouseUp:k,onMouseDown:R,ref:x})}const ev=1;function TM(i){const e={...nb(),...i},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:a,canvasRef:l,children:c,className:h,customRenderer:d,customTextRenderer:f,devicePixelRatio:m,error:g="Failed to load the page.",height:w,inputRef:b,loading:x="Loading page…",noData:S="No page specified.",onGetAnnotationsError:E,onGetAnnotationsSuccess:_,onGetStructTreeError:C,onGetStructTreeSuccess:R,onGetTextError:k,onGetTextSuccess:N,onLoadError:O,onLoadSuccess:L,onRenderAnnotationLayerError:H,onRenderAnnotationLayerSuccess:W,onRenderError:Y,onRenderSuccess:ft,onRenderTextLayerError:dt,onRenderTextLayerSuccess:nt,pageIndex:xt,pageNumber:G,pdf:U,registerPage:B,renderAnnotationLayer:tt=!0,renderForms:Q=!1,renderMode:D="canvas",renderTextLayer:$=!0,rotate:Z,scale:st=ev,unregisterPage:mt,width:wt,...et}=e,[_t,kt]=rr(),{value:Tt,error:ge}=_t,Se=P.useRef(null);Vt(U);const Lt=ns(G)?G-1:xt??null,jt=G??(ns(xt)?xt+1:null),Qt=Z??(Tt?Tt.rotate:null),te=P.useMemo(()=>{if(!Tt)return null;let nn=1;const yn=st??ev;if(wt||w){const vn=Tt.getViewport({scale:1,rotation:Qt});wt?nn=wt/vn.width:w&&(nn=w/vn.height)}return yn*nn},[w,Tt,Qt,st,wt]);P.useEffect(function(){return()=>{ns(Lt)&&r&&mt&&mt(Lt)}},[r,U,Lt,mt]);function Pn(){if(L){if(!Tt||!te)return;L(Qh(Tt,te))}if(r&&B){if(!ns(Lt)||!Se.current)return;B(Lt,Se.current)}}function ui(){ge&&(De(!1,ge.toString()),O&&O(ge))}P.useEffect(function(){kt({type:"RESET"})},[kt,U,Lt]),P.useEffect(function(){if(!U||!jt)return;const yn=Wo(U.getPage(jt)),vn=yn;return yn.promise.then(Gn=>{kt({type:"RESOLVE",value:Gn})}).catch(Gn=>{kt({type:"REJECT",error:Gn})}),()=>fs(vn)},[kt,U,jt]),P.useEffect(()=>{if(Tt!==void 0){if(Tt===!1){ui();return}Pn()}},[Tt,te]);const Bi=P.useMemo(()=>ns(Lt)&&jt&&ns(Qt)&&ns(te)?{_className:n,canvasBackground:a,customTextRenderer:f,devicePixelRatio:m,onGetAnnotationsError:E,onGetAnnotationsSuccess:_,onGetStructTreeError:C,onGetStructTreeSuccess:R,onGetTextError:k,onGetTextSuccess:N,onRenderAnnotationLayerError:H,onRenderAnnotationLayerSuccess:W,onRenderError:Y,onRenderSuccess:ft,onRenderTextLayerError:dt,onRenderTextLayerSuccess:nt,page:Tt,pageIndex:Lt,pageNumber:jt,renderForms:Q,renderTextLayer:$,rotate:Qt,scale:te}:null,[n,a,f,m,E,_,C,R,k,N,H,W,Y,ft,dt,nt,Tt,Lt,jt,Q,$,Qt,te]),Vi=P.useMemo(()=>Jw(et,()=>Tt&&(te?Qh(Tt,te):void 0)),[et,Tt,te]),gn=`${Lt}@${te}/${Qt}`;function mr(){switch(D){case"custom":return Vt(d),F.jsx(d,{},`${gn}_custom`);case"none":return null;case"canvas":default:return F.jsx(EM,{canvasRef:l},`${gn}_canvas`)}}function Go(){return $?F.jsx(_M,{},`${gn}_text`):null}function Xo(){return tt?F.jsx(vM,{},`${gn}_annotations`):null}function Ko(){function nn(vn){return!!vn?.page}if(!nn(Bi))throw new Error("page is undefined");const yn=typeof c=="function"?c(Bi):c;return F.jsxs(sb.Provider,{value:Bi,children:[mr(),Go(),Xo(),yn]})}function qo(){return jt?U===null||Tt===void 0||Tt===null?F.jsx(nr,{type:"loading",children:typeof x=="function"?x():x}):U===!1||Tt===!1?F.jsx(nr,{type:"error",children:typeof g=="function"?g():g}):Ko():F.jsx(nr,{type:"no-data",children:typeof S=="function"?S():S})}return F.jsx("div",{className:lr(n,h),"data-page-number":jt,ref:ib(b,Se),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${te}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Vi,children:qo()})}dM();Ii.workerSrc="pdf.worker.mjs";Ii.workerSrc="https://unpkg.com/pdfjs-dist@2.10.377/es5/build/pdf.worker.min.js";const nv="/weiyings-portfolio/lee-wei-ying-resume.pdf";function kM(){const[i,t]=P.useState(window.innerWidth),[e,n]=P.useState(!1);P.useEffect(()=>{const l=()=>t(window.innerWidth);return window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]);const r=()=>{const l=document.createElement("a");l.href=nv,l.download="Lee_Wei_Ying_Resume.pdf",l.target="_blank",document.body.appendChild(l),l.click(),document.body.removeChild(l)},a=()=>{n(!0),document.getElementById("resume-preview")?.scrollIntoView({behavior:"smooth"})};return F.jsx("div",{className:"min-h-screen pt-20 pb-16",children:F.jsxs("div",{className:"container mx-auto px-4 text-center",children:[F.jsxs(Ot.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"mb-16",children:[F.jsx("h1",{className:"text-4xl md:text-5xl mb-6",children:"Resume"}),F.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto mb-8",children:"Download my resume or preview it below"}),F.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[F.jsx(Ot.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:F.jsxs(Li,{size:"lg",onClick:r,className:"px-8 py-3 text-lg",children:[F.jsx(Zk,{size:20,className:"mr-2"}),"Download Resume"]})}),F.jsx(Ot.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:F.jsx(Li,{variant:"outline",size:"lg",onClick:a,className:"px-8 py-3 text-lg",children:"Preview Resume"})})]})]}),e&&F.jsx("div",{id:"resume-preview",className:"resume my-8 flex justify-center",children:F.jsx(yM,{file:nv,children:F.jsx(TM,{pageNumber:1,scale:i>786?1.7:.6})})})]})})}function PM(){const i=new Date().getFullYear(),t=[{name:"Email",icon:JS,href:"mailto:leeweiying.info@gmail.com",color:"hover:text-blue-500"},{name:"LinkedIn",icon:xv,href:"https://www.linkedin.com/in/lee-weiying",color:"hover:text-[#0077B5]"},{name:"GitHub",icon:Cl,href:"https://github.com/emery97",color:"hover:text-gray-600 dark:hover:text-gray-400"},{name:"Telegram",icon:n1,href:"https://t.me/getanicesleep",color:"hover:text-[#0088cc]"}];return F.jsx("footer",{className:"bg-background border-t border-border pt-16 pb-32 px-4",children:F.jsxs("div",{className:"flex flex-col items-center gap-8",children:[F.jsx("div",{className:"flex items-center gap-6",children:t.map((e,n)=>F.jsx(Ot.a,{href:e.href,target:e.href.startsWith("mailto:")?"_self":"_blank",rel:e.href.startsWith("mailto:")?"":"noopener noreferrer",className:`text-muted-foreground transition-colors duration-200 ${e.color}`,whileHover:{scale:1.1},whileTap:{scale:.95},initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.1+n*.1},"aria-label":e.name,children:F.jsx(e.icon,{size:24})},e.name))}),F.jsx(Ot.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.6},className:"text-muted-foreground text-sm text-center",children:"Built with ❤️ by wei ying"}),F.jsxs(Ot.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.7},className:"text-muted-foreground text-xs text-center mb-8",children:["Last updated ",i]})]})})}function RM(){const[i,t]=P.useState(!1);return P.useEffect(()=>{const e=localStorage.getItem("theme"),n=window.matchMedia("(prefers-color-scheme: dark)").matches;(e==="dark"||!e&&n)&&(t(!0),document.documentElement.classList.add("dark"))},[]),P.useEffect(()=>{localStorage.setItem("theme",i?"dark":"light")},[i]),F.jsx(TS,{basename:"/weiyings-portfolio",children:F.jsxs("div",{className:"min-h-screen bg-background text-foreground flex flex-col",children:[F.jsx(q1,{isDark:i,setIsDark:t}),F.jsx("main",{className:"flex-1 pt-16",children:F.jsxs(sS,{children:[F.jsx(Hs,{path:"/",element:F.jsx(Sy,{})}),F.jsx(Hs,{path:"/about",element:F.jsx(Nk,{})}),F.jsx(Hs,{path:"/projects",element:F.jsx(Uk,{})}),F.jsx(Hs,{path:"/resume",element:F.jsx(kM,{})}),F.jsx(Hs,{path:"*",element:F.jsx(Sy,{})})]})}),F.jsx(PM,{})]})})}fA.createRoot(document.getElementById("root")).render(F.jsx(RM,{}));
